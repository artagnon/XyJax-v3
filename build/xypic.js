(()=>{"use strict";var e={821:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(e){return"object"==typeof e&&null!==e}function a(e,t){var r,o;try{for(var s=n(Object.keys(t)),u=s.next();!u.done;u=s.next()){var c=u.value;"__esModule"!==c&&(!i(e[c])||!i(t[c])||t[c]instanceof Promise?null!==t[c]&&void 0!==t[c]&&(e[c]=t[c]):a(e[c],t[c]))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.MathJax=t.combineWithMathJax=t.combineDefaults=t.combineConfig=t.isObject=void 0,t.isObject=i,t.combineConfig=a,t.combineDefaults=function e(t,r,a){var o,s;t[r]||(t[r]={}),t=t[r];try{for(var u=n(Object.keys(a)),c=u.next();!c.done;c=u.next()){var h=c.value;i(t[h])&&i(a[h])?e(t,h,a[h]):null==t[h]&&null!=a[h]&&(t[h]=a[h])}}catch(e){o={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return t},t.combineWithMathJax=function(e){return a(t.MathJax,e)},void 0===r.g.MathJax&&(r.g.MathJax={}),r.g.MathJax.version||(r.g.MathJax={version:"3.1.2",_:{},config:r.g.MathJax}),t.MathJax=r.g.MathJax},514:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerList=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.register=function(e){return this.add(e,e.priority)},t.prototype.unregister=function(e){this.remove(e)},t.prototype.handlesDocument=function(e){var t,r;try{for(var n=a(this),i=n.next();!i.done;i=n.next()){var o=i.value.item;if(o.handlesDocument(e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}throw new Error("Can't find handler for document")},t.prototype.document=function(e,t){return void 0===t&&(t=null),this.handlesDocument(e).create(e,t)},t}(r(721).PrioritizedList);t.HandlerList=o},605:(e,t)=>{t.ed=void 0,function(){function e(e,r,n,i,a){void 0===n&&(n=!0),void 0===i&&(i={i:0,n:0,delim:""}),void 0===a&&(a={i:0,n:0,delim:""}),this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={},this._state=t.ed.UNPROCESSED,this.math=e,this.inputJax=r,this.display=n,this.start=i,this.end=a,this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={}}Object.defineProperty(e.prototype,"isEscaped",{get:function(){return null===this.display},enumerable:!1,configurable:!0}),e.prototype.render=function(e){e.renderActions.renderMath(this,e)},e.prototype.rerender=function(e,r){void 0===r&&(r=t.ed.RERENDER),this.state()>=r&&this.state(r-1),e.renderActions.renderMath(this,e,r)},e.prototype.convert=function(e,r){void 0===r&&(r=t.ed.LAST),e.renderActions.renderConvert(this,e,r)},e.prototype.compile=function(e){this.state()<t.ed.COMPILED&&(this.root=this.inputJax.compile(this,e),this.state(t.ed.COMPILED))},e.prototype.typeset=function(e){this.state()<t.ed.TYPESET&&(this.typesetRoot=e.outputJax[this.isEscaped?"escaped":"typeset"](this,e),this.state(t.ed.TYPESET))},e.prototype.updateDocument=function(e){},e.prototype.removeFromDocument=function(e){void 0===e&&(e=!1)},e.prototype.setMetrics=function(e,t,r,n,i){this.metrics={em:e,ex:t,containerWidth:r,lineWidth:n,scale:i}},e.prototype.state=function(e,r){return void 0===e&&(e=null),void 0===r&&(r=!1),null!=e&&(e<t.ed.INSERTED&&this._state>=t.ed.INSERTED&&this.removeFromDocument(r),e<t.ed.TYPESET&&this._state>=t.ed.TYPESET&&(this.outputData={}),e<t.ed.COMPILED&&this._state>=t.ed.COMPILED&&(this.inputData={}),this._state=e),this._state},e.prototype.reset=function(e){void 0===e&&(e=!1),this.state(t.ed.UNPROCESSED,e)}}(),t.ed={UNPROCESSED:0,FINDMATH:10,COMPILED:20,CONVERT:100,METRICS:110,RERENDER:125,TYPESET:150,INSERTED:200,LAST:1e4}},518:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Attributes=t.INHERIT=void 0,t.INHERIT="_inherit_";var n=function(){function e(e,t){this.global=t,this.defaults=Object.create(t),this.inherited=Object.create(this.defaults),this.attributes=Object.create(this.inherited),Object.assign(this.defaults,e)}return e.prototype.set=function(e,t){this.attributes[e]=t},e.prototype.setList=function(e){Object.assign(this.attributes,e)},e.prototype.get=function(e){var r=this.attributes[e];return r===t.INHERIT&&(r=this.global[e]),r},e.prototype.getExplicit=function(e){if(this.attributes.hasOwnProperty(e))return this.attributes[e]},e.prototype.getList=function(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a={};try{for(var o=r(n),s=o.next();!s.done;s=o.next()){var u=s.value;a[u]=this.get(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return a},e.prototype.setInherited=function(e,t){this.inherited[e]=t},e.prototype.getInherited=function(e){return this.inherited[e]},e.prototype.getDefault=function(e){return this.defaults[e]},e.prototype.isSet=function(e){return this.attributes.hasOwnProperty(e)||this.inherited.hasOwnProperty(e)},e.prototype.hasDefault=function(e){return e in this.defaults},e.prototype.getExplicitNames=function(){return Object.keys(this.attributes)},e.prototype.getInheritedNames=function(){return Object.keys(this.inherited)},e.prototype.getDefaultNames=function(){return Object.keys(this.defaults)},e.prototype.getGlobalNames=function(){return Object.keys(this.global)},e.prototype.getAllAttributes=function(){return this.attributes},e.prototype.getAllInherited=function(){return this.inherited},e.prototype.getAllDefaults=function(){return this.defaults},e.prototype.getAllGlobals=function(){return this.global},e}();t.Attributes=n},45:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.XMLNode=t.TextNode=t.AbstractMmlEmptyNode=t.AbstractMmlBaseNode=t.AbstractMmlLayoutNode=t.AbstractMmlTokenNode=t.AbstractMmlNode=t.indentAttributes=t.TEXCLASSNAMES=t.TEXCLASS=void 0;var u=r(518),c=r(403);t.TEXCLASS={ORD:0,OP:1,BIN:2,REL:3,OPEN:4,CLOSE:5,PUNCT:6,INNER:7,VCENTER:8,NONE:-1},t.TEXCLASSNAMES=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER","VCENTER"];var h=["","thinmathspace","mediummathspace","thickmathspace"],l=[[0,-1,2,3,0,0,0,1],[-1,-1,0,3,0,0,0,1],[2,2,0,0,2,0,0,2],[3,3,0,0,3,0,0,3],[0,0,0,0,0,0,0,0],[0,-1,2,3,0,0,0,1],[1,1,0,1,1,1,1,1],[1,-1,2,3,1,0,1,1]];t.indentAttributes=["indentalign","indentalignfirst","indentshift","indentshiftfirst"];var p=function(e){function r(t,r,n){void 0===r&&(r={}),void 0===n&&(n=[]);var i=e.call(this,t)||this;return i.texClass=null,i.prevClass=null,i.prevLevel=null,i.arity<0&&(i.childNodes=[t.create("inferredMrow")],i.childNodes[0].parent=i),i.setChildren(n),i.attributes=new u.Attributes(t.getNodeClass(i.kind).defaults,t.getNodeClass("math").defaults),i.attributes.setList(r),i}return i(r,e),Object.defineProperty(r.prototype,"isToken",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasNewLine",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 1/0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInferred",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){for(var e=this.parent;e&&e.notParent;)e=e.Parent;return e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.setChildren=function(t){return this.arity<0?this.childNodes[0].setChildren(t):e.prototype.setChildren.call(this,t)},r.prototype.appendChild=function(t){return this.arity<0?(this.childNodes[0].appendChild(t),t):e.prototype.appendChild.call(this,t)},r.prototype.replaceChild=function(t,r){return this.arity<0?(this.childNodes[0].replaceChild(t,r),t):e.prototype.replaceChild.call(this,t,r)},r.prototype.core=function(){return this},r.prototype.coreMO=function(){return this},r.prototype.coreIndex=function(){return 0},r.prototype.childPosition=function(){for(var e,t,r=this,n=r.parent;n&&n.notParent;)r=n,n=n.parent;if(n){var i=0;try{for(var a=o(n.childNodes),s=a.next();!s.done;s=a.next()){if(s.value===r)return i;i++}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}}return null},r.prototype.setTeXclass=function(e){return this.getPrevClass(e),null!=this.texClass?this:e},r.prototype.updateTeXclass=function(e){e&&(this.prevClass=e.prevClass,this.prevLevel=e.prevLevel,e.prevClass=e.prevLevel=null,this.texClass=e.texClass)},r.prototype.getPrevClass=function(e){e&&(this.prevClass=e.texClass,this.prevLevel=e.attributes.get("scriptlevel"))},r.prototype.texSpacing=function(){var e=null!=this.prevClass?this.prevClass:t.TEXCLASS.NONE,r=this.texClass||t.TEXCLASS.ORD;if(e===t.TEXCLASS.NONE||r===t.TEXCLASS.NONE)return"";e===t.TEXCLASS.VCENTER&&(e=t.TEXCLASS.ORD),r===t.TEXCLASS.VCENTER&&(r=t.TEXCLASS.ORD);var n=l[e][r];return(this.prevLevel>0||this.attributes.get("scriptlevel")>0)&&n>=0?"":h[Math.abs(n)]},r.prototype.hasSpacingAttributes=function(){return this.isEmbellished&&this.coreMO().hasSpacingAttributes()},r.prototype.setInheritedAttributes=function(e,t,n,i){var a,u;void 0===e&&(e={}),void 0===t&&(t=!1),void 0===n&&(n=0),void 0===i&&(i=!1);var c=this.attributes.getAllDefaults();try{for(var h=o(Object.keys(e)),l=h.next();!l.done;l=h.next()){var p=l.value;if(c.hasOwnProperty(p)||r.alwaysInherit.hasOwnProperty(p)){var f=s(e[p],2),d=f[0],m=f[1];((r.noInherit[d]||{})[this.kind]||{})[p]||this.attributes.setInherited(p,m)}}}catch(e){a={error:e}}finally{try{l&&!l.done&&(u=h.return)&&u.call(h)}finally{if(a)throw a.error}}void 0===this.attributes.getExplicit("displaystyle")&&this.attributes.setInherited("displaystyle",t),void 0===this.attributes.getExplicit("scriptlevel")&&this.attributes.setInherited("scriptlevel",n),i&&this.setProperty("texprimestyle",i);var y=this.arity;if(y>=0&&y!==1/0&&(1===y&&0===this.childNodes.length||1!==y&&this.childNodes.length!==y))if(y<this.childNodes.length)this.childNodes=this.childNodes.slice(0,y);else for(;this.childNodes.length<y;)this.appendChild(this.factory.create("mrow"));this.setChildInheritedAttributes(e,t,n,i)},r.prototype.setChildInheritedAttributes=function(e,t,r,n){var i,a;try{for(var s=o(this.childNodes),u=s.next();!u.done;u=s.next()){u.value.setInheritedAttributes(e,t,r,n)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},r.prototype.addInheritedAttributes=function(e,t){var r,n,i=a({},e);try{for(var s=o(Object.keys(t)),u=s.next();!u.done;u=s.next()){var c=u.value;"displaystyle"!==c&&"scriptlevel"!==c&&"style"!==c&&(i[c]=[this.kind,t[c]])}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},r.prototype.inheritAttributesFrom=function(e){var t=e.attributes,r=t.get("displaystyle"),n=t.get("scriptlevel"),i=t.isSet("mathsize")?{mathsize:["math",t.get("mathsize")]}:{},a=e.getProperty("texprimestyle")||!1;this.setInheritedAttributes(i,r,n,a)},r.prototype.verifyTree=function(e){if(void 0===e&&(e=null),null!==e){this.verifyAttributes(e);var t=this.arity;e.checkArity&&t>=0&&t!==1/0&&(1===t&&0===this.childNodes.length||1!==t&&this.childNodes.length!==t)&&this.mError('Wrong number of children for "'+this.kind+'" node',e,!0),this.verifyChildren(e)}},r.prototype.verifyAttributes=function(e){var t,r;if(e.checkAttributes){var n=this.attributes,i=[];try{for(var a=o(n.getExplicitNames()),s=a.next();!s.done;s=a.next()){var u=s.value;"data-"===u.substr(0,5)||void 0!==n.getDefault(u)||u.match(/^(?:class|style|id|(?:xlink:)?href)$/)||i.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}i.length&&this.mError("Unknown attributes for "+this.kind+" node: "+i.join(", "),e)}},r.prototype.verifyChildren=function(e){var t,r;try{for(var n=o(this.childNodes),i=n.next();!i.done;i=n.next()){i.value.verifyTree(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},r.prototype.mError=function(e,t,r){if(void 0===r&&(r=!1),this.parent&&this.parent.isKind("merror"))return null;var n=this.factory.create("merror");if(t.fullErrors||r){var i=this.factory.create("mtext"),a=this.factory.create("text");a.setText(t.fullErrors?e:this.kind),i.appendChild(a),n.appendChild(i),this.parent.replaceChild(n,this)}else this.parent.replaceChild(n,this),n.appendChild(this);return n},r.defaults={mathbackground:u.INHERIT,mathcolor:u.INHERIT,mathsize:u.INHERIT,dir:u.INHERIT},r.noInherit={mstyle:{mpadded:{width:!0,height:!0,depth:!0,lspace:!0,voffset:!0},mtable:{width:!0,height:!0,depth:!0,align:!0}},maligngroup:{mrow:{groupalign:!0},mtable:{groupalign:!0}}},r.alwaysInherit={scriptminsize:!0,scriptsizemultiplier:!0},r.verifyDefaults={checkArity:!0,checkAttributes:!1,fullErrors:!1,fixMmultiscripts:!0,fixMtables:!0},r}(c.AbstractNode);t.AbstractMmlNode=p;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"isToken",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getText=function(){var e,t,r="";try{for(var n=o(this.childNodes),i=n.next();!i.done;i=n.next()){var a=i.value;a instanceof x&&(r+=a.getText())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},t.prototype.setChildInheritedAttributes=function(e,t,r,n){var i,a;try{for(var s=o(this.childNodes),u=s.next();!u.done;u=s.next()){var c=u.value;c instanceof p&&c.setInheritedAttributes(e,t,r,n)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},t.prototype.walkTree=function(e,t){var r,n;e(this,t);try{for(var i=o(this.childNodes),a=i.next();!a.done;a=i.next()){var s=a.value;s instanceof p&&s.walkTree(e,t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t},t.defaults=a(a({},p.defaults),{mathvariant:"normal",mathsize:u.INHERIT}),t}(p);t.AbstractMmlTokenNode=f;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"isSpacelike",{get:function(){return this.childNodes[0].isSpacelike},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmbellished",{get:function(){return this.childNodes[0].isEmbellished},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),t.prototype.core=function(){return this.childNodes[0]},t.prototype.coreMO=function(){return this.childNodes[0].coreMO()},t.prototype.setTeXclass=function(e){return e=this.childNodes[0].setTeXclass(e),this.updateTeXclass(this.childNodes[0]),e},t.defaults=p.defaults,t}(p);t.AbstractMmlLayoutNode=d;var m=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return this.childNodes[0].isEmbellished},enumerable:!1,configurable:!0}),r.prototype.core=function(){return this.childNodes[0]},r.prototype.coreMO=function(){return this.childNodes[0].coreMO()},r.prototype.setTeXclass=function(e){var r,n;this.getPrevClass(e),this.texClass=t.TEXCLASS.ORD;var i=this.childNodes[0];i?this.isEmbellished||i.isKind("mi")?(e=i.setTeXclass(e),this.updateTeXclass(this.core())):(i.setTeXclass(null),e=this):e=this;try{for(var a=o(this.childNodes.slice(1)),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.setTeXclass(null)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e},r.defaults=p.defaults,r}(p);t.AbstractMmlBaseNode=m;var y=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),Object.defineProperty(r.prototype,"isToken",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasNewLine",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInferred",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parent",{get:function(){return this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texClass",{get:function(){return t.TEXCLASS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"prevClass",{get:function(){return t.TEXCLASS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"prevLevel",{get:function(){return 0},enumerable:!1,configurable:!0}),r.prototype.hasSpacingAttributes=function(){return!1},Object.defineProperty(r.prototype,"attributes",{get:function(){return null},enumerable:!1,configurable:!0}),r.prototype.core=function(){return this},r.prototype.coreMO=function(){return this},r.prototype.coreIndex=function(){return 0},r.prototype.childPosition=function(){return 0},r.prototype.setTeXclass=function(e){return e},r.prototype.texSpacing=function(){return""},r.prototype.setInheritedAttributes=function(e,t,r,n){},r.prototype.inheritAttributesFrom=function(e){},r.prototype.verifyTree=function(e){},r.prototype.mError=function(e,t,r){void 0===r&&(r=!1)},r}(c.AbstractEmptyNode);t.AbstractMmlEmptyNode=y;var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text="",t}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"text"},enumerable:!1,configurable:!0}),t.prototype.getText=function(){return this.text},t.prototype.setText=function(e){return this.text=e,this},t.prototype.toString=function(){return this.text},t}(y);t.TextNode=x;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xml=null,t.adaptor=null,t}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"XML"},enumerable:!1,configurable:!0}),t.prototype.getXML=function(){return this.xml},t.prototype.setXML=function(e,t){return void 0===t&&(t=null),this.xml=e,this.adaptor=t,this},t.prototype.getSerializedXML=function(){return this.adaptor.outerHTML(this.xml)},t.prototype.toString=function(){return"XML data"},t}(y);t.XMLNode=v},625:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.MmlMo=void 0;var u=r(45),c=r(772),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._texClass=null,t.lspace=5/18,t.rspace=5/18,t}return i(t,e),Object.defineProperty(t.prototype,"texClass",{get:function(){if(null===this._texClass){var e=this.getText(),t=o(this.handleExplicitForm(this.getForms()),3),r=t[0],n=t[1],i=t[2],a=this.constructor.OPTABLE,s=a[r][e]||a[n][e]||a[i][e];return s?s[2]:u.TEXCLASS.REL}return this._texClass},set:function(e){this._texClass=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kind",{get:function(){return"mo"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmbellished",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNewLine",{get:function(){return"newline"===this.attributes.get("linebreak")},enumerable:!1,configurable:!0}),t.prototype.coreParent=function(){for(var e=this,t=this,r=this.factory.getNodeClass("math");t&&t.isEmbellished&&t.coreMO()===this&&!(t instanceof r);)e=t,t=t.Parent;return e},t.prototype.coreText=function(e){if(!e)return"";if(e.isEmbellished)return e.coreMO().getText();for(;((e.isKind("mrow")||e.isKind("TeXAtom")||e.isKind("mstyle")||e.isKind("mphantom"))&&1===e.childNodes.length||e.isKind("munderover"))&&e.childNodes[0];)e=e.childNodes[0];return e.isToken?e.getText():""},t.prototype.hasSpacingAttributes=function(){return this.attributes.isSet("lspace")||this.attributes.isSet("rspace")},Object.defineProperty(t.prototype,"isAccent",{get:function(){var e=!1,t=this.coreParent().parent;if(t){var r=t.isKind("mover")?t.childNodes[t.over].coreMO()?"accent":"":t.isKind("munder")?t.childNodes[t.under].coreMO()?"accentunder":"":t.isKind("munderover")?this===t.childNodes[t.over].coreMO()?"accent":this===t.childNodes[t.under].coreMO()?"accentunder":"":"";if(r)e=void 0!==t.attributes.getExplicit(r)?e:this.attributes.get("accent")}return e},enumerable:!1,configurable:!0}),t.prototype.setTeXclass=function(e){var t=this.attributes.getList("form","fence"),r=t.form,n=t.fence;return void 0===this.getProperty("texClass")&&(this.attributes.isSet("lspace")||this.attributes.isSet("rspace"))?null:(n&&this.texClass===u.TEXCLASS.REL&&("prefix"===r&&(this.texClass=u.TEXCLASS.OPEN),"postfix"===r&&(this.texClass=u.TEXCLASS.CLOSE)),"\u2061"===this.getText()?(e&&(e.texClass=u.TEXCLASS.OP,e.setProperty("fnOP",!0)),this.texClass=this.prevClass=u.TEXCLASS.NONE,e):this.adjustTeXclass(e))},t.prototype.adjustTeXclass=function(e){var t=this.texClass,r=this.prevClass;if(t===u.TEXCLASS.NONE)return e;if(e?(!e.getProperty("autoOP")||t!==u.TEXCLASS.BIN&&t!==u.TEXCLASS.REL||(r=e.texClass=u.TEXCLASS.ORD),r=this.prevClass=e.texClass||u.TEXCLASS.ORD,this.prevLevel=this.attributes.getInherited("scriptlevel")):r=this.prevClass=u.TEXCLASS.NONE,t!==u.TEXCLASS.BIN||r!==u.TEXCLASS.NONE&&r!==u.TEXCLASS.BIN&&r!==u.TEXCLASS.OP&&r!==u.TEXCLASS.REL&&r!==u.TEXCLASS.OPEN&&r!==u.TEXCLASS.PUNCT)if(r!==u.TEXCLASS.BIN||t!==u.TEXCLASS.REL&&t!==u.TEXCLASS.CLOSE&&t!==u.TEXCLASS.PUNCT){if(t===u.TEXCLASS.BIN){for(var n=this,i=this.parent;i&&i.parent&&i.isEmbellished&&(1===i.childNodes.length||!i.isKind("mrow")&&i.core()===n);)n=i,i=i.parent;i.childNodes[i.childNodes.length-1]===n&&(this.texClass=u.TEXCLASS.ORD)}}else e.texClass=this.prevClass=u.TEXCLASS.ORD;else this.texClass=u.TEXCLASS.ORD;return this},t.prototype.setInheritedAttributes=function(t,r,n,i){var a,u;void 0===t&&(t={}),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===i&&(i=!1),e.prototype.setInheritedAttributes.call(this,t,r,n,i);var c=this.getText(),h=o(this.handleExplicitForm(this.getForms()),3),l=h[0],p=h[1],f=h[2];this.attributes.setInherited("form",l);var d=this.constructor.OPTABLE,m=d[l][c]||d[p][c]||d[f][c];if(m){void 0===this.getProperty("texClass")&&(this.texClass=m[2]);try{for(var y=s(Object.keys(m[3]||{})),x=y.next();!x.done;x=y.next()){var v=x.value;this.attributes.setInherited(v,m[3][v])}}catch(e){a={error:e}}finally{try{x&&!x.done&&(u=y.return)&&u.call(y)}finally{if(a)throw a.error}}this.lspace=(m[0]+1)/18,this.rspace=(m[1]+1)/18}else{var g=this.getRange(c);if(g){void 0===this.getProperty("texClass")&&(this.texClass=g[2]);var M=this.constructor.MMLSPACING[g[2]];this.lspace=(M[0]+1)/18,this.rspace=(M[1]+1)/18}}},t.prototype.getForms=function(){for(var e=this,t=this.parent,r=this.Parent;r&&r.isEmbellished;)e=t,t=r.parent,r=r.Parent;if(t&&t.isKind("mrow")&&1!==t.nonSpaceLength()){if(t.firstNonSpace()===e)return["prefix","infix","postfix"];if(t.lastNonSpace()===e)return["postfix","infix","prefix"]}return["infix","prefix","postfix"]},t.prototype.handleExplicitForm=function(e){if(this.attributes.isSet("form")){var t=this.attributes.get("form");e=[t].concat(e.filter((function(e){return e!==t})))}return e},t.prototype.getRange=function(e){var t,r;if(!e.match(/^[\uD800-\uDBFF]?.$/))return null;var n=e.codePointAt(0),i=this.constructor.RANGES;try{for(var a=s(i),o=a.next();!o.done;o=a.next()){var u=o.value;if(u[0]<=n&&n<=u[1])return u;if(n<u[0])return null}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return null},t.defaults=a(a({},u.AbstractMmlTokenNode.defaults),{form:"infix",fence:!1,separator:!1,lspace:"thickmathspace",rspace:"thickmathspace",stretchy:!1,symmetric:!1,maxsize:"infinity",minsize:"0em",largeop:!1,movablelimits:!1,accent:!1,linebreak:"auto",lineleading:"1ex",linebreakstyle:"before",indentalign:"auto",indentshift:"0",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),t.RANGES=c.RANGES,t.MMLSPACING=c.MMLSPACING,t.OPTABLE=c.OPTABLE,t}(u.AbstractMmlTokenNode);t.MmlMo=h},772:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OPTABLE=t.MMLSPACING=t.RANGES=t.MO=t.OPDEF=void 0;var n=r(45);function i(e,t,r,i){return void 0===r&&(r=n.TEXCLASS.BIN),void 0===i&&(i=null),[e,t,r,i]}t.OPDEF=i,t.MO={ORD:i(0,0,n.TEXCLASS.ORD),ORD11:i(1,1,n.TEXCLASS.ORD),ORD21:i(2,1,n.TEXCLASS.ORD),ORD02:i(0,2,n.TEXCLASS.ORD),ORD55:i(5,5,n.TEXCLASS.ORD),OP:i(1,2,n.TEXCLASS.OP,{largeop:!0,movablelimits:!0,symmetric:!0}),OPFIXED:i(1,2,n.TEXCLASS.OP,{largeop:!0,movablelimits:!0}),INTEGRAL:i(0,1,n.TEXCLASS.OP,{largeop:!0,symmetric:!0}),INTEGRAL2:i(1,2,n.TEXCLASS.OP,{largeop:!0,symmetric:!0}),BIN3:i(3,3,n.TEXCLASS.BIN),BIN4:i(4,4,n.TEXCLASS.BIN),BIN01:i(0,1,n.TEXCLASS.BIN),BIN5:i(5,5,n.TEXCLASS.BIN),TALLBIN:i(4,4,n.TEXCLASS.BIN,{stretchy:!0}),BINOP:i(4,4,n.TEXCLASS.BIN,{largeop:!0,movablelimits:!0}),REL:i(5,5,n.TEXCLASS.REL),REL1:i(1,1,n.TEXCLASS.REL,{stretchy:!0}),REL4:i(4,4,n.TEXCLASS.REL),RELSTRETCH:i(5,5,n.TEXCLASS.REL,{stretchy:!0}),RELACCENT:i(5,5,n.TEXCLASS.REL,{accent:!0}),WIDEREL:i(5,5,n.TEXCLASS.REL,{accent:!0,stretchy:!0}),OPEN:i(0,0,n.TEXCLASS.OPEN,{fence:!0,stretchy:!0,symmetric:!0}),CLOSE:i(0,0,n.TEXCLASS.CLOSE,{fence:!0,stretchy:!0,symmetric:!0}),INNER:i(0,0,n.TEXCLASS.INNER),PUNCT:i(0,3,n.TEXCLASS.PUNCT),ACCENT:i(0,0,n.TEXCLASS.ORD,{accent:!0}),WIDEACCENT:i(0,0,n.TEXCLASS.ORD,{accent:!0,stretchy:!0})},t.RANGES=[[32,127,n.TEXCLASS.REL,"BasicLatin"],[160,255,n.TEXCLASS.ORD,"Latin1Supplement"],[256,383,n.TEXCLASS.ORD,"LatinExtendedA"],[384,591,n.TEXCLASS.ORD,"LatinExtendedB"],[688,767,n.TEXCLASS.ORD,"SpacingModLetters"],[768,879,n.TEXCLASS.ORD,"CombDiacritMarks"],[880,1023,n.TEXCLASS.ORD,"GreekAndCoptic"],[7680,7935,n.TEXCLASS.ORD,"LatinExtendedAdditional"],[8192,8303,n.TEXCLASS.PUNCT,"GeneralPunctuation"],[8304,8351,n.TEXCLASS.ORD,"SuperAndSubscripts"],[8352,8399,n.TEXCLASS.ORD,"Currency"],[8400,8447,n.TEXCLASS.ORD,"CombDiactForSymbols"],[8448,8527,n.TEXCLASS.ORD,"LetterlikeSymbols"],[8528,8591,n.TEXCLASS.ORD,"NumberForms"],[8592,8703,n.TEXCLASS.REL,"Arrows"],[8704,8959,n.TEXCLASS.BIN,"MathOperators"],[8960,9215,n.TEXCLASS.ORD,"MiscTechnical"],[9312,9471,n.TEXCLASS.ORD,"EnclosedAlphaNums"],[9472,9631,n.TEXCLASS.ORD,"BoxDrawing"],[9632,9727,n.TEXCLASS.ORD,"GeometricShapes"],[9984,10175,n.TEXCLASS.ORD,"Dingbats"],[10176,10223,n.TEXCLASS.ORD,"MiscMathSymbolsA"],[10224,10239,n.TEXCLASS.REL,"SupplementalArrowsA"],[10496,10623,n.TEXCLASS.REL,"SupplementalArrowsB"],[10624,10751,n.TEXCLASS.ORD,"MiscMathSymbolsB"],[10752,11007,n.TEXCLASS.BIN,"SuppMathOperators"],[11008,11263,n.TEXCLASS.ORD,"MiscSymbolsAndArrows"],[119808,120831,n.TEXCLASS.ORD,"MathAlphabets"]],t.MMLSPACING=[[0,0],[1,2],[3,3],[4,4],[0,0],[0,0],[0,3]],t.OPTABLE={prefix:{"(":t.MO.OPEN,"+":t.MO.BIN01,"-":t.MO.BIN01,"[":t.MO.OPEN,"{":t.MO.OPEN,"|":t.MO.OPEN,"||":[0,0,n.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,n.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"\xac":t.MO.ORD21,"\xb1":t.MO.BIN01,"\u2016":[0,0,n.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2018":[0,0,n.TEXCLASS.OPEN,{fence:!0}],"\u201c":[0,0,n.TEXCLASS.OPEN,{fence:!0}],\u2145:t.MO.ORD21,\u2146:i(2,0,n.TEXCLASS.ORD),"\u2200":t.MO.ORD21,"\u2202":t.MO.ORD21,"\u2203":t.MO.ORD21,"\u2204":t.MO.ORD21,"\u2207":t.MO.ORD21,"\u220f":t.MO.OP,"\u2210":t.MO.OP,"\u2211":t.MO.OP,"\u2212":t.MO.BIN01,"\u2213":t.MO.BIN01,"\u221a":[1,1,n.TEXCLASS.ORD,{stretchy:!0}],"\u221b":t.MO.ORD11,"\u221c":t.MO.ORD11,"\u2220":t.MO.ORD,"\u2221":t.MO.ORD,"\u2222":t.MO.ORD,"\u222b":t.MO.INTEGRAL,"\u222c":t.MO.INTEGRAL,"\u222d":t.MO.INTEGRAL,"\u222e":t.MO.INTEGRAL,"\u222f":t.MO.INTEGRAL,"\u2230":t.MO.INTEGRAL,"\u2231":t.MO.INTEGRAL,"\u2232":t.MO.INTEGRAL,"\u2233":t.MO.INTEGRAL,"\u22c0":t.MO.OP,"\u22c1":t.MO.OP,"\u22c2":t.MO.OP,"\u22c3":t.MO.OP,"\u2308":t.MO.OPEN,"\u230a":t.MO.OPEN,"\u2772":t.MO.OPEN,"\u27e6":t.MO.OPEN,"\u27e8":t.MO.OPEN,"\u27ea":t.MO.OPEN,"\u27ec":t.MO.OPEN,"\u27ee":t.MO.OPEN,"\u2980":[0,0,n.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2983":t.MO.OPEN,"\u2985":t.MO.OPEN,"\u2987":t.MO.OPEN,"\u2989":t.MO.OPEN,"\u298b":t.MO.OPEN,"\u298d":t.MO.OPEN,"\u298f":t.MO.OPEN,"\u2991":t.MO.OPEN,"\u2993":t.MO.OPEN,"\u2995":t.MO.OPEN,"\u2997":t.MO.OPEN,"\u29fc":t.MO.OPEN,"\u2a00":t.MO.OP,"\u2a01":t.MO.OP,"\u2a02":t.MO.OP,"\u2a03":t.MO.OP,"\u2a04":t.MO.OP,"\u2a05":t.MO.OP,"\u2a06":t.MO.OP,"\u2a07":t.MO.OP,"\u2a08":t.MO.OP,"\u2a09":t.MO.OP,"\u2a0a":t.MO.OP,"\u2a0b":t.MO.INTEGRAL2,"\u2a0c":t.MO.INTEGRAL,"\u2a0d":t.MO.INTEGRAL2,"\u2a0e":t.MO.INTEGRAL2,"\u2a0f":t.MO.INTEGRAL2,"\u2a10":t.MO.OP,"\u2a11":t.MO.OP,"\u2a12":t.MO.OP,"\u2a13":t.MO.OP,"\u2a14":t.MO.OP,"\u2a15":t.MO.INTEGRAL2,"\u2a16":t.MO.INTEGRAL2,"\u2a17":t.MO.INTEGRAL2,"\u2a18":t.MO.INTEGRAL2,"\u2a19":t.MO.INTEGRAL2,"\u2a1a":t.MO.INTEGRAL2,"\u2a1b":t.MO.INTEGRAL2,"\u2a1c":t.MO.INTEGRAL2,"\u2afc":t.MO.OP,"\u2aff":t.MO.OP},postfix:{"!!":i(1,0),"!":[1,0,n.TEXCLASS.CLOSE,null],"&":t.MO.ORD,")":t.MO.CLOSE,"++":i(0,0),"--":i(0,0),"..":i(0,0),"...":t.MO.ORD,"'":t.MO.ACCENT,"]":t.MO.CLOSE,"^":t.MO.WIDEACCENT,_:t.MO.WIDEACCENT,"`":t.MO.ACCENT,"|":t.MO.CLOSE,"}":t.MO.CLOSE,"~":t.MO.WIDEACCENT,"||":[0,0,n.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,n.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"\xa8":t.MO.ACCENT,"\xaf":t.MO.WIDEACCENT,"\xb0":t.MO.ORD,"\xb4":t.MO.ACCENT,"\xb8":t.MO.ACCENT,\u02c6:t.MO.WIDEACCENT,\u02c7:t.MO.WIDEACCENT,\u02c9:t.MO.WIDEACCENT,\u02ca:t.MO.ACCENT,\u02cb:t.MO.ACCENT,\u02cd:t.MO.WIDEACCENT,"\u02d8":t.MO.ACCENT,"\u02d9":t.MO.ACCENT,"\u02da":t.MO.ACCENT,"\u02dc":t.MO.WIDEACCENT,"\u02dd":t.MO.ACCENT,"\u02f7":t.MO.WIDEACCENT,"\u0302":t.MO.WIDEACCENT,"\u0311":t.MO.ACCENT,"\u03f6":t.MO.REL,"\u2016":[0,0,n.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2019":[0,0,n.TEXCLASS.CLOSE,{fence:!0}],"\u201d":[0,0,n.TEXCLASS.CLOSE,{fence:!0}],"\u2032":t.MO.ORD02,"\u203e":t.MO.WIDEACCENT,"\u20db":t.MO.ACCENT,"\u20dc":t.MO.ACCENT,"\u2309":t.MO.CLOSE,"\u230b":t.MO.CLOSE,"\u23b4":t.MO.WIDEACCENT,"\u23b5":t.MO.WIDEACCENT,"\u23dc":t.MO.WIDEACCENT,"\u23dd":t.MO.WIDEACCENT,"\u23de":t.MO.WIDEACCENT,"\u23df":t.MO.WIDEACCENT,"\u23e0":t.MO.WIDEACCENT,"\u23e1":t.MO.WIDEACCENT,"\u25a0":t.MO.BIN3,"\u25a1":t.MO.BIN3,"\u25aa":t.MO.BIN3,"\u25ab":t.MO.BIN3,"\u25ad":t.MO.BIN3,"\u25ae":t.MO.BIN3,"\u25af":t.MO.BIN3,"\u25b0":t.MO.BIN3,"\u25b1":t.MO.BIN3,"\u25b2":t.MO.BIN4,"\u25b4":t.MO.BIN4,"\u25b6":t.MO.BIN4,"\u25b7":t.MO.BIN4,"\u25b8":t.MO.BIN4,"\u25bc":t.MO.BIN4,"\u25be":t.MO.BIN4,"\u25c0":t.MO.BIN4,"\u25c1":t.MO.BIN4,"\u25c2":t.MO.BIN4,"\u25c4":t.MO.BIN4,"\u25c5":t.MO.BIN4,"\u25c6":t.MO.BIN4,"\u25c7":t.MO.BIN4,"\u25c8":t.MO.BIN4,"\u25c9":t.MO.BIN4,"\u25cc":t.MO.BIN4,"\u25cd":t.MO.BIN4,"\u25ce":t.MO.BIN4,"\u25cf":t.MO.BIN4,"\u25d6":t.MO.BIN4,"\u25d7":t.MO.BIN4,"\u25e6":t.MO.BIN4,"\u266d":t.MO.ORD02,"\u266e":t.MO.ORD02,"\u266f":t.MO.ORD02,"\u2773":t.MO.CLOSE,"\u27e7":t.MO.CLOSE,"\u27e9":t.MO.CLOSE,"\u27eb":t.MO.CLOSE,"\u27ed":t.MO.CLOSE,"\u27ef":t.MO.CLOSE,"\u2980":[0,0,n.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"\u2984":t.MO.CLOSE,"\u2986":t.MO.CLOSE,"\u2988":t.MO.CLOSE,"\u298a":t.MO.CLOSE,"\u298c":t.MO.CLOSE,"\u298e":t.MO.CLOSE,"\u2990":t.MO.CLOSE,"\u2992":t.MO.CLOSE,"\u2994":t.MO.CLOSE,"\u2996":t.MO.CLOSE,"\u2998":t.MO.CLOSE,"\u29fd":t.MO.CLOSE},infix:{"!=":t.MO.BIN4,"#":t.MO.ORD,$:t.MO.ORD,"%":[3,3,n.TEXCLASS.ORD,null],"&&":t.MO.BIN4,"":t.MO.ORD,"*":t.MO.BIN3,"**":i(1,1),"*=":t.MO.BIN4,"+":t.MO.BIN4,"+=":t.MO.BIN4,",":[0,3,n.TEXCLASS.PUNCT,{linebreakstyle:"after",separator:!0}],"-":t.MO.BIN4,"-=":t.MO.BIN4,"->":t.MO.BIN5,".":[0,3,n.TEXCLASS.PUNCT,{separator:!0}],"/":t.MO.ORD11,"//":i(1,1),"/=":t.MO.BIN4,":":[1,2,n.TEXCLASS.REL,null],":=":t.MO.BIN4,";":[0,3,n.TEXCLASS.PUNCT,{linebreakstyle:"after",separator:!0}],"<":t.MO.REL,"<=":t.MO.BIN5,"<>":i(1,1),"=":t.MO.REL,"==":t.MO.BIN4,">":t.MO.REL,">=":t.MO.BIN5,"?":[1,1,n.TEXCLASS.CLOSE,null],"@":t.MO.ORD11,"\\":t.MO.ORD,"^":t.MO.ORD11,_:t.MO.ORD11,"|":[2,2,n.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"||":[2,2,n.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[2,2,n.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"\xb1":t.MO.BIN4,"\xb7":t.MO.BIN4,"\xd7":t.MO.BIN4,"\xf7":t.MO.BIN4,\u02b9:t.MO.ORD,"\u0300":t.MO.ACCENT,"\u0301":t.MO.ACCENT,"\u0303":t.MO.WIDEACCENT,"\u0304":t.MO.ACCENT,"\u0306":t.MO.ACCENT,"\u0307":t.MO.ACCENT,"\u0308":t.MO.ACCENT,"\u030c":t.MO.ACCENT,"\u0332":t.MO.WIDEACCENT,"\u0338":t.MO.REL4,"\u2015":[0,0,n.TEXCLASS.ORD,{stretchy:!0}],"\u2017":[0,0,n.TEXCLASS.ORD,{stretchy:!0}],"\u2020":t.MO.BIN3,"\u2021":t.MO.BIN3,"\u2022":t.MO.BIN4,"\u2026":t.MO.INNER,"\u2044":t.MO.TALLBIN,"\u2061":t.MO.ORD,"\u2062":t.MO.ORD,"\u2063":[0,0,n.TEXCLASS.ORD,{linebreakstyle:"after",separator:!0}],"\u2064":t.MO.ORD,"\u20d7":t.MO.ACCENT,\u2111:t.MO.ORD,\u2113:t.MO.ORD,\u2118:t.MO.ORD,\u211c:t.MO.ORD,"\u2190":t.MO.WIDEREL,"\u2191":t.MO.RELSTRETCH,"\u2192":t.MO.WIDEREL,"\u2193":t.MO.RELSTRETCH,"\u2194":t.MO.WIDEREL,"\u2195":t.MO.RELSTRETCH,"\u2196":t.MO.RELSTRETCH,"\u2197":t.MO.RELSTRETCH,"\u2198":t.MO.RELSTRETCH,"\u2199":t.MO.RELSTRETCH,"\u219a":t.MO.RELACCENT,"\u219b":t.MO.RELACCENT,"\u219c":t.MO.WIDEREL,"\u219d":t.MO.WIDEREL,"\u219e":t.MO.WIDEREL,"\u219f":t.MO.WIDEREL,"\u21a0":t.MO.WIDEREL,"\u21a1":t.MO.RELSTRETCH,"\u21a2":t.MO.WIDEREL,"\u21a3":t.MO.WIDEREL,"\u21a4":t.MO.WIDEREL,"\u21a5":t.MO.RELSTRETCH,"\u21a6":t.MO.WIDEREL,"\u21a7":t.MO.RELSTRETCH,"\u21a8":t.MO.RELSTRETCH,"\u21a9":t.MO.WIDEREL,"\u21aa":t.MO.WIDEREL,"\u21ab":t.MO.WIDEREL,"\u21ac":t.MO.WIDEREL,"\u21ad":t.MO.WIDEREL,"\u21ae":t.MO.RELACCENT,"\u21af":t.MO.RELSTRETCH,"\u21b0":t.MO.RELSTRETCH,"\u21b1":t.MO.RELSTRETCH,"\u21b2":t.MO.RELSTRETCH,"\u21b3":t.MO.RELSTRETCH,"\u21b4":t.MO.RELSTRETCH,"\u21b5":t.MO.RELSTRETCH,"\u21b6":t.MO.RELACCENT,"\u21b7":t.MO.RELACCENT,"\u21b8":t.MO.REL,"\u21b9":t.MO.WIDEREL,"\u21ba":t.MO.REL,"\u21bb":t.MO.REL,"\u21bc":t.MO.WIDEREL,"\u21bd":t.MO.WIDEREL,"\u21be":t.MO.RELSTRETCH,"\u21bf":t.MO.RELSTRETCH,"\u21c0":t.MO.WIDEREL,"\u21c1":t.MO.WIDEREL,"\u21c2":t.MO.RELSTRETCH,"\u21c3":t.MO.RELSTRETCH,"\u21c4":t.MO.WIDEREL,"\u21c5":t.MO.RELSTRETCH,"\u21c6":t.MO.WIDEREL,"\u21c7":t.MO.WIDEREL,"\u21c8":t.MO.RELSTRETCH,"\u21c9":t.MO.WIDEREL,"\u21ca":t.MO.RELSTRETCH,"\u21cb":t.MO.WIDEREL,"\u21cc":t.MO.WIDEREL,"\u21cd":t.MO.RELACCENT,"\u21ce":t.MO.RELACCENT,"\u21cf":t.MO.RELACCENT,"\u21d0":t.MO.WIDEREL,"\u21d1":t.MO.RELSTRETCH,"\u21d2":t.MO.WIDEREL,"\u21d3":t.MO.RELSTRETCH,"\u21d4":t.MO.WIDEREL,"\u21d5":t.MO.RELSTRETCH,"\u21d6":t.MO.RELSTRETCH,"\u21d7":t.MO.RELSTRETCH,"\u21d8":t.MO.RELSTRETCH,"\u21d9":t.MO.RELSTRETCH,"\u21da":t.MO.WIDEREL,"\u21db":t.MO.WIDEREL,"\u21dc":t.MO.WIDEREL,"\u21dd":t.MO.WIDEREL,"\u21de":t.MO.REL,"\u21df":t.MO.REL,"\u21e0":t.MO.WIDEREL,"\u21e1":t.MO.RELSTRETCH,"\u21e2":t.MO.WIDEREL,"\u21e3":t.MO.RELSTRETCH,"\u21e4":t.MO.WIDEREL,"\u21e5":t.MO.WIDEREL,"\u21e6":t.MO.WIDEREL,"\u21e7":t.MO.RELSTRETCH,"\u21e8":t.MO.WIDEREL,"\u21e9":t.MO.RELSTRETCH,"\u21ea":t.MO.RELSTRETCH,"\u21eb":t.MO.RELSTRETCH,"\u21ec":t.MO.RELSTRETCH,"\u21ed":t.MO.RELSTRETCH,"\u21ee":t.MO.RELSTRETCH,"\u21ef":t.MO.RELSTRETCH,"\u21f0":t.MO.WIDEREL,"\u21f1":t.MO.REL,"\u21f2":t.MO.REL,"\u21f3":t.MO.RELSTRETCH,"\u21f4":t.MO.RELACCENT,"\u21f5":t.MO.RELSTRETCH,"\u21f6":t.MO.WIDEREL,"\u21f7":t.MO.RELACCENT,"\u21f8":t.MO.RELACCENT,"\u21f9":t.MO.RELACCENT,"\u21fa":t.MO.RELACCENT,"\u21fb":t.MO.RELACCENT,"\u21fc":t.MO.RELACCENT,"\u21fd":t.MO.WIDEREL,"\u21fe":t.MO.WIDEREL,"\u21ff":t.MO.WIDEREL,"\u2201":i(1,2,n.TEXCLASS.ORD),"\u2205":t.MO.ORD,"\u2206":t.MO.BIN3,"\u2208":t.MO.REL,"\u2209":t.MO.REL,"\u220a":t.MO.REL,"\u220b":t.MO.REL,"\u220c":t.MO.REL,"\u220d":t.MO.REL,"\u220e":t.MO.BIN3,"\u2212":t.MO.BIN4,"\u2213":t.MO.BIN4,"\u2214":t.MO.BIN4,"\u2215":t.MO.TALLBIN,"\u2216":t.MO.BIN4,"\u2217":t.MO.BIN4,"\u2218":t.MO.BIN4,"\u2219":t.MO.BIN4,"\u221d":t.MO.REL,"\u221e":t.MO.ORD,"\u221f":t.MO.REL,"\u2223":t.MO.REL,"\u2224":t.MO.REL,"\u2225":t.MO.REL,"\u2226":t.MO.REL,"\u2227":t.MO.BIN4,"\u2228":t.MO.BIN4,"\u2229":t.MO.BIN4,"\u222a":t.MO.BIN4,"\u2234":t.MO.REL,"\u2235":t.MO.REL,"\u2236":t.MO.REL,"\u2237":t.MO.REL,"\u2238":t.MO.BIN4,"\u2239":t.MO.REL,"\u223a":t.MO.BIN4,"\u223b":t.MO.REL,"\u223c":t.MO.REL,"\u223d":t.MO.REL,"\u223d\u0331":t.MO.BIN3,"\u223e":t.MO.REL,"\u223f":t.MO.BIN3,"\u2240":t.MO.BIN4,"\u2241":t.MO.REL,"\u2242":t.MO.REL,"\u2242\u0338":t.MO.REL,"\u2243":t.MO.REL,"\u2244":t.MO.REL,"\u2245":t.MO.REL,"\u2246":t.MO.REL,"\u2247":t.MO.REL,"\u2248":t.MO.REL,"\u2249":t.MO.REL,"\u224a":t.MO.REL,"\u224b":t.MO.REL,"\u224c":t.MO.REL,"\u224d":t.MO.REL,"\u224e":t.MO.REL,"\u224e\u0338":t.MO.REL,"\u224f":t.MO.REL,"\u224f\u0338":t.MO.REL,"\u2250":t.MO.REL,"\u2251":t.MO.REL,"\u2252":t.MO.REL,"\u2253":t.MO.REL,"\u2254":t.MO.REL,"\u2255":t.MO.REL,"\u2256":t.MO.REL,"\u2257":t.MO.REL,"\u2258":t.MO.REL,"\u2259":t.MO.REL,"\u225a":t.MO.REL,"\u225c":t.MO.REL,"\u225d":t.MO.REL,"\u225e":t.MO.REL,"\u225f":t.MO.REL,"\u2260":t.MO.REL,"\u2261":t.MO.REL,"\u2262":t.MO.REL,"\u2263":t.MO.REL,"\u2264":t.MO.REL,"\u2265":t.MO.REL,"\u2266":t.MO.REL,"\u2266\u0338":t.MO.REL,"\u2267":t.MO.REL,"\u2268":t.MO.REL,"\u2269":t.MO.REL,"\u226a":t.MO.REL,"\u226a\u0338":t.MO.REL,"\u226b":t.MO.REL,"\u226b\u0338":t.MO.REL,"\u226c":t.MO.REL,"\u226d":t.MO.REL,"\u226e":t.MO.REL,"\u226f":t.MO.REL,"\u2270":t.MO.REL,"\u2271":t.MO.REL,"\u2272":t.MO.REL,"\u2273":t.MO.REL,"\u2274":t.MO.REL,"\u2275":t.MO.REL,"\u2276":t.MO.REL,"\u2277":t.MO.REL,"\u2278":t.MO.REL,"\u2279":t.MO.REL,"\u227a":t.MO.REL,"\u227b":t.MO.REL,"\u227c":t.MO.REL,"\u227d":t.MO.REL,"\u227e":t.MO.REL,"\u227f":t.MO.REL,"\u227f\u0338":t.MO.REL,"\u2280":t.MO.REL,"\u2281":t.MO.REL,"\u2282":t.MO.REL,"\u2282\u20d2":t.MO.REL,"\u2283":t.MO.REL,"\u2283\u20d2":t.MO.REL,"\u2284":t.MO.REL,"\u2285":t.MO.REL,"\u2286":t.MO.REL,"\u2287":t.MO.REL,"\u2288":t.MO.REL,"\u2289":t.MO.REL,"\u228a":t.MO.REL,"\u228b":t.MO.REL,"\u228c":t.MO.BIN4,"\u228d":t.MO.BIN4,"\u228e":t.MO.BIN4,"\u228f":t.MO.REL,"\u228f\u0338":t.MO.REL,"\u2290":t.MO.REL,"\u2290\u0338":t.MO.REL,"\u2291":t.MO.REL,"\u2292":t.MO.REL,"\u2293":t.MO.BIN4,"\u2294":t.MO.BIN4,"\u2295":t.MO.BIN4,"\u2296":t.MO.BIN4,"\u2297":t.MO.BIN4,"\u2298":t.MO.BIN4,"\u2299":t.MO.BIN4,"\u229a":t.MO.BIN4,"\u229b":t.MO.BIN4,"\u229c":t.MO.BIN4,"\u229d":t.MO.BIN4,"\u229e":t.MO.BIN4,"\u229f":t.MO.BIN4,"\u22a0":t.MO.BIN4,"\u22a1":t.MO.BIN4,"\u22a2":t.MO.REL,"\u22a3":t.MO.REL,"\u22a4":t.MO.ORD55,"\u22a5":t.MO.REL,"\u22a6":t.MO.REL,"\u22a7":t.MO.REL,"\u22a8":t.MO.REL,"\u22a9":t.MO.REL,"\u22aa":t.MO.REL,"\u22ab":t.MO.REL,"\u22ac":t.MO.REL,"\u22ad":t.MO.REL,"\u22ae":t.MO.REL,"\u22af":t.MO.REL,"\u22b0":t.MO.REL,"\u22b1":t.MO.REL,"\u22b2":t.MO.REL,"\u22b3":t.MO.REL,"\u22b4":t.MO.REL,"\u22b5":t.MO.REL,"\u22b6":t.MO.REL,"\u22b7":t.MO.REL,"\u22b8":t.MO.REL,"\u22b9":t.MO.REL,"\u22ba":t.MO.BIN4,"\u22bb":t.MO.BIN4,"\u22bc":t.MO.BIN4,"\u22bd":t.MO.BIN4,"\u22be":t.MO.BIN3,"\u22bf":t.MO.BIN3,"\u22c4":t.MO.BIN4,"\u22c5":t.MO.BIN4,"\u22c6":t.MO.BIN4,"\u22c7":t.MO.BIN4,"\u22c8":t.MO.REL,"\u22c9":t.MO.BIN4,"\u22ca":t.MO.BIN4,"\u22cb":t.MO.BIN4,"\u22cc":t.MO.BIN4,"\u22cd":t.MO.REL,"\u22ce":t.MO.BIN4,"\u22cf":t.MO.BIN4,"\u22d0":t.MO.REL,"\u22d1":t.MO.REL,"\u22d2":t.MO.BIN4,"\u22d3":t.MO.BIN4,"\u22d4":t.MO.REL,"\u22d5":t.MO.REL,"\u22d6":t.MO.REL,"\u22d7":t.MO.REL,"\u22d8":t.MO.REL,"\u22d9":t.MO.REL,"\u22da":t.MO.REL,"\u22db":t.MO.REL,"\u22dc":t.MO.REL,"\u22dd":t.MO.REL,"\u22de":t.MO.REL,"\u22df":t.MO.REL,"\u22e0":t.MO.REL,"\u22e1":t.MO.REL,"\u22e2":t.MO.REL,"\u22e3":t.MO.REL,"\u22e4":t.MO.REL,"\u22e5":t.MO.REL,"\u22e6":t.MO.REL,"\u22e7":t.MO.REL,"\u22e8":t.MO.REL,"\u22e9":t.MO.REL,"\u22ea":t.MO.REL,"\u22eb":t.MO.REL,"\u22ec":t.MO.REL,"\u22ed":t.MO.REL,"\u22ee":t.MO.ORD55,"\u22ef":t.MO.INNER,"\u22f0":t.MO.REL,"\u22f1":[5,5,n.TEXCLASS.INNER,null],"\u22f2":t.MO.REL,"\u22f3":t.MO.REL,"\u22f4":t.MO.REL,"\u22f5":t.MO.REL,"\u22f6":t.MO.REL,"\u22f7":t.MO.REL,"\u22f8":t.MO.REL,"\u22f9":t.MO.REL,"\u22fa":t.MO.REL,"\u22fb":t.MO.REL,"\u22fc":t.MO.REL,"\u22fd":t.MO.REL,"\u22fe":t.MO.REL,"\u22ff":t.MO.REL,"\u2305":t.MO.BIN3,"\u2306":t.MO.BIN3,"\u2322":t.MO.REL4,"\u2323":t.MO.REL4,"\u2329":t.MO.OPEN,"\u232a":t.MO.CLOSE,"\u23aa":t.MO.ORD,"\u23af":[0,0,n.TEXCLASS.ORD,{stretchy:!0}],"\u23b0":t.MO.OPEN,"\u23b1":t.MO.CLOSE,"\u2500":t.MO.ORD,"\u25b3":t.MO.BIN4,"\u25b5":t.MO.BIN4,"\u25b9":t.MO.BIN4,"\u25bd":t.MO.BIN4,"\u25bf":t.MO.BIN4,"\u25c3":t.MO.BIN4,"\u25ef":t.MO.BIN3,"\u2660":t.MO.ORD,"\u2661":t.MO.ORD,"\u2662":t.MO.ORD,"\u2663":t.MO.ORD,"\u2758":t.MO.REL,"\u27f0":t.MO.RELSTRETCH,"\u27f1":t.MO.RELSTRETCH,"\u27f5":t.MO.WIDEREL,"\u27f6":t.MO.WIDEREL,"\u27f7":t.MO.WIDEREL,"\u27f8":t.MO.WIDEREL,"\u27f9":t.MO.WIDEREL,"\u27fa":t.MO.WIDEREL,"\u27fb":t.MO.WIDEREL,"\u27fc":t.MO.WIDEREL,"\u27fd":t.MO.WIDEREL,"\u27fe":t.MO.WIDEREL,"\u27ff":t.MO.WIDEREL,"\u2900":t.MO.RELACCENT,"\u2901":t.MO.RELACCENT,"\u2902":t.MO.RELACCENT,"\u2903":t.MO.RELACCENT,"\u2904":t.MO.RELACCENT,"\u2905":t.MO.RELACCENT,"\u2906":t.MO.RELACCENT,"\u2907":t.MO.RELACCENT,"\u2908":t.MO.REL,"\u2909":t.MO.REL,"\u290a":t.MO.RELSTRETCH,"\u290b":t.MO.RELSTRETCH,"\u290c":t.MO.WIDEREL,"\u290d":t.MO.WIDEREL,"\u290e":t.MO.WIDEREL,"\u290f":t.MO.WIDEREL,"\u2910":t.MO.WIDEREL,"\u2911":t.MO.RELACCENT,"\u2912":t.MO.RELSTRETCH,"\u2913":t.MO.RELSTRETCH,"\u2914":t.MO.RELACCENT,"\u2915":t.MO.RELACCENT,"\u2916":t.MO.RELACCENT,"\u2917":t.MO.RELACCENT,"\u2918":t.MO.RELACCENT,"\u2919":t.MO.RELACCENT,"\u291a":t.MO.RELACCENT,"\u291b":t.MO.RELACCENT,"\u291c":t.MO.RELACCENT,"\u291d":t.MO.RELACCENT,"\u291e":t.MO.RELACCENT,"\u291f":t.MO.RELACCENT,"\u2920":t.MO.RELACCENT,"\u2921":t.MO.RELSTRETCH,"\u2922":t.MO.RELSTRETCH,"\u2923":t.MO.REL,"\u2924":t.MO.REL,"\u2925":t.MO.REL,"\u2926":t.MO.REL,"\u2927":t.MO.REL,"\u2928":t.MO.REL,"\u2929":t.MO.REL,"\u292a":t.MO.REL,"\u292b":t.MO.REL,"\u292c":t.MO.REL,"\u292d":t.MO.REL,"\u292e":t.MO.REL,"\u292f":t.MO.REL,"\u2930":t.MO.REL,"\u2931":t.MO.REL,"\u2932":t.MO.REL,"\u2933":t.MO.RELACCENT,"\u2934":t.MO.REL,"\u2935":t.MO.REL,"\u2936":t.MO.REL,"\u2937":t.MO.REL,"\u2938":t.MO.REL,"\u2939":t.MO.REL,"\u293a":t.MO.RELACCENT,"\u293b":t.MO.RELACCENT,"\u293c":t.MO.RELACCENT,"\u293d":t.MO.RELACCENT,"\u293e":t.MO.REL,"\u293f":t.MO.REL,"\u2940":t.MO.REL,"\u2941":t.MO.REL,"\u2942":t.MO.RELACCENT,"\u2943":t.MO.RELACCENT,"\u2944":t.MO.RELACCENT,"\u2945":t.MO.RELACCENT,"\u2946":t.MO.RELACCENT,"\u2947":t.MO.RELACCENT,"\u2948":t.MO.RELACCENT,"\u2949":t.MO.REL,"\u294a":t.MO.RELACCENT,"\u294b":t.MO.RELACCENT,"\u294c":t.MO.REL,"\u294d":t.MO.REL,"\u294e":t.MO.WIDEREL,"\u294f":t.MO.RELSTRETCH,"\u2950":t.MO.WIDEREL,"\u2951":t.MO.RELSTRETCH,"\u2952":t.MO.WIDEREL,"\u2953":t.MO.WIDEREL,"\u2954":t.MO.RELSTRETCH,"\u2955":t.MO.RELSTRETCH,"\u2956":t.MO.RELSTRETCH,"\u2957":t.MO.RELSTRETCH,"\u2958":t.MO.RELSTRETCH,"\u2959":t.MO.RELSTRETCH,"\u295a":t.MO.WIDEREL,"\u295b":t.MO.WIDEREL,"\u295c":t.MO.RELSTRETCH,"\u295d":t.MO.RELSTRETCH,"\u295e":t.MO.WIDEREL,"\u295f":t.MO.WIDEREL,"\u2960":t.MO.RELSTRETCH,"\u2961":t.MO.RELSTRETCH,"\u2962":t.MO.RELACCENT,"\u2963":t.MO.REL,"\u2964":t.MO.RELACCENT,"\u2965":t.MO.REL,"\u2966":t.MO.RELACCENT,"\u2967":t.MO.RELACCENT,"\u2968":t.MO.RELACCENT,"\u2969":t.MO.RELACCENT,"\u296a":t.MO.RELACCENT,"\u296b":t.MO.RELACCENT,"\u296c":t.MO.RELACCENT,"\u296d":t.MO.RELACCENT,"\u296e":t.MO.RELSTRETCH,"\u296f":t.MO.RELSTRETCH,"\u2970":t.MO.RELACCENT,"\u2971":t.MO.RELACCENT,"\u2972":t.MO.RELACCENT,"\u2973":t.MO.RELACCENT,"\u2974":t.MO.RELACCENT,"\u2975":t.MO.RELACCENT,"\u2976":t.MO.RELACCENT,"\u2977":t.MO.RELACCENT,"\u2978":t.MO.RELACCENT,"\u2979":t.MO.RELACCENT,"\u297a":t.MO.RELACCENT,"\u297b":t.MO.RELACCENT,"\u297c":t.MO.RELACCENT,"\u297d":t.MO.RELACCENT,"\u297e":t.MO.REL,"\u297f":t.MO.REL,"\u2981":t.MO.BIN3,"\u2982":t.MO.BIN3,"\u2999":t.MO.BIN3,"\u299a":t.MO.BIN3,"\u299b":t.MO.BIN3,"\u299c":t.MO.BIN3,"\u299d":t.MO.BIN3,"\u299e":t.MO.BIN3,"\u299f":t.MO.BIN3,"\u29a0":t.MO.BIN3,"\u29a1":t.MO.BIN3,"\u29a2":t.MO.BIN3,"\u29a3":t.MO.BIN3,"\u29a4":t.MO.BIN3,"\u29a5":t.MO.BIN3,"\u29a6":t.MO.BIN3,"\u29a7":t.MO.BIN3,"\u29a8":t.MO.BIN3,"\u29a9":t.MO.BIN3,"\u29aa":t.MO.BIN3,"\u29ab":t.MO.BIN3,"\u29ac":t.MO.BIN3,"\u29ad":t.MO.BIN3,"\u29ae":t.MO.BIN3,"\u29af":t.MO.BIN3,"\u29b0":t.MO.BIN3,"\u29b1":t.MO.BIN3,"\u29b2":t.MO.BIN3,"\u29b3":t.MO.BIN3,"\u29b4":t.MO.BIN3,"\u29b5":t.MO.BIN3,"\u29b6":t.MO.BIN4,"\u29b7":t.MO.BIN4,"\u29b8":t.MO.BIN4,"\u29b9":t.MO.BIN4,"\u29ba":t.MO.BIN4,"\u29bb":t.MO.BIN4,"\u29bc":t.MO.BIN4,"\u29bd":t.MO.BIN4,"\u29be":t.MO.BIN4,"\u29bf":t.MO.BIN4,"\u29c0":t.MO.REL,"\u29c1":t.MO.REL,"\u29c2":t.MO.BIN3,"\u29c3":t.MO.BIN3,"\u29c4":t.MO.BIN4,"\u29c5":t.MO.BIN4,"\u29c6":t.MO.BIN4,"\u29c7":t.MO.BIN4,"\u29c8":t.MO.BIN4,"\u29c9":t.MO.BIN3,"\u29ca":t.MO.BIN3,"\u29cb":t.MO.BIN3,"\u29cc":t.MO.BIN3,"\u29cd":t.MO.BIN3,"\u29ce":t.MO.REL,"\u29cf":t.MO.REL,"\u29cf\u0338":t.MO.REL,"\u29d0":t.MO.REL,"\u29d0\u0338":t.MO.REL,"\u29d1":t.MO.REL,"\u29d2":t.MO.REL,"\u29d3":t.MO.REL,"\u29d4":t.MO.REL,"\u29d5":t.MO.REL,"\u29d6":t.MO.BIN4,"\u29d7":t.MO.BIN4,"\u29d8":t.MO.BIN3,"\u29d9":t.MO.BIN3,"\u29db":t.MO.BIN3,"\u29dc":t.MO.BIN3,"\u29dd":t.MO.BIN3,"\u29de":t.MO.REL,"\u29df":t.MO.BIN3,"\u29e0":t.MO.BIN3,"\u29e1":t.MO.REL,"\u29e2":t.MO.BIN4,"\u29e3":t.MO.REL,"\u29e4":t.MO.REL,"\u29e5":t.MO.REL,"\u29e6":t.MO.REL,"\u29e7":t.MO.BIN3,"\u29e8":t.MO.BIN3,"\u29e9":t.MO.BIN3,"\u29ea":t.MO.BIN3,"\u29eb":t.MO.BIN3,"\u29ec":t.MO.BIN3,"\u29ed":t.MO.BIN3,"\u29ee":t.MO.BIN3,"\u29ef":t.MO.BIN3,"\u29f0":t.MO.BIN3,"\u29f1":t.MO.BIN3,"\u29f2":t.MO.BIN3,"\u29f3":t.MO.BIN3,"\u29f4":t.MO.REL,"\u29f5":t.MO.BIN4,"\u29f6":t.MO.BIN4,"\u29f7":t.MO.BIN4,"\u29f8":t.MO.BIN3,"\u29f9":t.MO.BIN3,"\u29fa":t.MO.BIN3,"\u29fb":t.MO.BIN3,"\u29fe":t.MO.BIN4,"\u29ff":t.MO.BIN4,"\u2a1d":t.MO.BIN3,"\u2a1e":t.MO.BIN3,"\u2a1f":t.MO.BIN3,"\u2a20":t.MO.BIN3,"\u2a21":t.MO.BIN3,"\u2a22":t.MO.BIN4,"\u2a23":t.MO.BIN4,"\u2a24":t.MO.BIN4,"\u2a25":t.MO.BIN4,"\u2a26":t.MO.BIN4,"\u2a27":t.MO.BIN4,"\u2a28":t.MO.BIN4,"\u2a29":t.MO.BIN4,"\u2a2a":t.MO.BIN4,"\u2a2b":t.MO.BIN4,"\u2a2c":t.MO.BIN4,"\u2a2d":t.MO.BIN4,"\u2a2e":t.MO.BIN4,"\u2a2f":t.MO.BIN4,"\u2a30":t.MO.BIN4,"\u2a31":t.MO.BIN4,"\u2a32":t.MO.BIN4,"\u2a33":t.MO.BIN4,"\u2a34":t.MO.BIN4,"\u2a35":t.MO.BIN4,"\u2a36":t.MO.BIN4,"\u2a37":t.MO.BIN4,"\u2a38":t.MO.BIN4,"\u2a39":t.MO.BIN4,"\u2a3a":t.MO.BIN4,"\u2a3b":t.MO.BIN4,"\u2a3c":t.MO.BIN4,"\u2a3d":t.MO.BIN4,"\u2a3e":t.MO.BIN4,"\u2a3f":t.MO.BIN4,"\u2a40":t.MO.BIN4,"\u2a41":t.MO.BIN4,"\u2a42":t.MO.BIN4,"\u2a43":t.MO.BIN4,"\u2a44":t.MO.BIN4,"\u2a45":t.MO.BIN4,"\u2a46":t.MO.BIN4,"\u2a47":t.MO.BIN4,"\u2a48":t.MO.BIN4,"\u2a49":t.MO.BIN4,"\u2a4a":t.MO.BIN4,"\u2a4b":t.MO.BIN4,"\u2a4c":t.MO.BIN4,"\u2a4d":t.MO.BIN4,"\u2a4e":t.MO.BIN4,"\u2a4f":t.MO.BIN4,"\u2a50":t.MO.BIN4,"\u2a51":t.MO.BIN4,"\u2a52":t.MO.BIN4,"\u2a53":t.MO.BIN4,"\u2a54":t.MO.BIN4,"\u2a55":t.MO.BIN4,"\u2a56":t.MO.BIN4,"\u2a57":t.MO.BIN4,"\u2a58":t.MO.BIN4,"\u2a59":t.MO.REL,"\u2a5a":t.MO.BIN4,"\u2a5b":t.MO.BIN4,"\u2a5c":t.MO.BIN4,"\u2a5d":t.MO.BIN4,"\u2a5e":t.MO.BIN4,"\u2a5f":t.MO.BIN4,"\u2a60":t.MO.BIN4,"\u2a61":t.MO.BIN4,"\u2a62":t.MO.BIN4,"\u2a63":t.MO.BIN4,"\u2a64":t.MO.BIN4,"\u2a65":t.MO.BIN4,"\u2a66":t.MO.REL,"\u2a67":t.MO.REL,"\u2a68":t.MO.REL,"\u2a69":t.MO.REL,"\u2a6a":t.MO.REL,"\u2a6b":t.MO.REL,"\u2a6c":t.MO.REL,"\u2a6d":t.MO.REL,"\u2a6e":t.MO.REL,"\u2a6f":t.MO.REL,"\u2a70":t.MO.REL,"\u2a71":t.MO.BIN4,"\u2a72":t.MO.BIN4,"\u2a73":t.MO.REL,"\u2a74":t.MO.REL,"\u2a75":t.MO.REL,"\u2a76":t.MO.REL,"\u2a77":t.MO.REL,"\u2a78":t.MO.REL,"\u2a79":t.MO.REL,"\u2a7a":t.MO.REL,"\u2a7b":t.MO.REL,"\u2a7c":t.MO.REL,"\u2a7d":t.MO.REL,"\u2a7d\u0338":t.MO.REL,"\u2a7e":t.MO.REL,"\u2a7e\u0338":t.MO.REL,"\u2a7f":t.MO.REL,"\u2a80":t.MO.REL,"\u2a81":t.MO.REL,"\u2a82":t.MO.REL,"\u2a83":t.MO.REL,"\u2a84":t.MO.REL,"\u2a85":t.MO.REL,"\u2a86":t.MO.REL,"\u2a87":t.MO.REL,"\u2a88":t.MO.REL,"\u2a89":t.MO.REL,"\u2a8a":t.MO.REL,"\u2a8b":t.MO.REL,"\u2a8c":t.MO.REL,"\u2a8d":t.MO.REL,"\u2a8e":t.MO.REL,"\u2a8f":t.MO.REL,"\u2a90":t.MO.REL,"\u2a91":t.MO.REL,"\u2a92":t.MO.REL,"\u2a93":t.MO.REL,"\u2a94":t.MO.REL,"\u2a95":t.MO.REL,"\u2a96":t.MO.REL,"\u2a97":t.MO.REL,"\u2a98":t.MO.REL,"\u2a99":t.MO.REL,"\u2a9a":t.MO.REL,"\u2a9b":t.MO.REL,"\u2a9c":t.MO.REL,"\u2a9d":t.MO.REL,"\u2a9e":t.MO.REL,"\u2a9f":t.MO.REL,"\u2aa0":t.MO.REL,"\u2aa1":t.MO.REL,"\u2aa1\u0338":t.MO.REL,"\u2aa2":t.MO.REL,"\u2aa2\u0338":t.MO.REL,"\u2aa3":t.MO.REL,"\u2aa4":t.MO.REL,"\u2aa5":t.MO.REL,"\u2aa6":t.MO.REL,"\u2aa7":t.MO.REL,"\u2aa8":t.MO.REL,"\u2aa9":t.MO.REL,"\u2aaa":t.MO.REL,"\u2aab":t.MO.REL,"\u2aac":t.MO.REL,"\u2aad":t.MO.REL,"\u2aae":t.MO.REL,"\u2aaf":t.MO.REL,"\u2aaf\u0338":t.MO.REL,"\u2ab0":t.MO.REL,"\u2ab0\u0338":t.MO.REL,"\u2ab1":t.MO.REL,"\u2ab2":t.MO.REL,"\u2ab3":t.MO.REL,"\u2ab4":t.MO.REL,"\u2ab5":t.MO.REL,"\u2ab6":t.MO.REL,"\u2ab7":t.MO.REL,"\u2ab8":t.MO.REL,"\u2ab9":t.MO.REL,"\u2aba":t.MO.REL,"\u2abb":t.MO.REL,"\u2abc":t.MO.REL,"\u2abd":t.MO.REL,"\u2abe":t.MO.REL,"\u2abf":t.MO.REL,"\u2ac0":t.MO.REL,"\u2ac1":t.MO.REL,"\u2ac2":t.MO.REL,"\u2ac3":t.MO.REL,"\u2ac4":t.MO.REL,"\u2ac5":t.MO.REL,"\u2ac6":t.MO.REL,"\u2ac7":t.MO.REL,"\u2ac8":t.MO.REL,"\u2ac9":t.MO.REL,"\u2aca":t.MO.REL,"\u2acb":t.MO.REL,"\u2acc":t.MO.REL,"\u2acd":t.MO.REL,"\u2ace":t.MO.REL,"\u2acf":t.MO.REL,"\u2ad0":t.MO.REL,"\u2ad1":t.MO.REL,"\u2ad2":t.MO.REL,"\u2ad3":t.MO.REL,"\u2ad4":t.MO.REL,"\u2ad5":t.MO.REL,"\u2ad6":t.MO.REL,"\u2ad7":t.MO.REL,"\u2ad8":t.MO.REL,"\u2ad9":t.MO.REL,"\u2ada":t.MO.REL,"\u2adb":t.MO.REL,"\u2adc":t.MO.REL,"\u2add":t.MO.REL,"\u2ade":t.MO.REL,"\u2adf":t.MO.REL,"\u2ae0":t.MO.REL,"\u2ae1":t.MO.REL,"\u2ae2":t.MO.REL,"\u2ae3":t.MO.REL,"\u2ae4":t.MO.REL,"\u2ae5":t.MO.REL,"\u2ae6":t.MO.REL,"\u2ae7":t.MO.REL,"\u2ae8":t.MO.REL,"\u2ae9":t.MO.REL,"\u2aea":t.MO.REL,"\u2aeb":t.MO.REL,"\u2aec":t.MO.REL,"\u2aed":t.MO.REL,"\u2aee":t.MO.REL,"\u2aef":t.MO.REL,"\u2af0":t.MO.REL,"\u2af1":t.MO.REL,"\u2af2":t.MO.REL,"\u2af3":t.MO.REL,"\u2af4":t.MO.BIN4,"\u2af5":t.MO.BIN4,"\u2af6":t.MO.BIN4,"\u2af7":t.MO.REL,"\u2af8":t.MO.REL,"\u2af9":t.MO.REL,"\u2afa":t.MO.REL,"\u2afb":t.MO.BIN4,"\u2afd":t.MO.BIN4,"\u2afe":t.MO.BIN3,"\u2b45":t.MO.RELSTRETCH,"\u2b46":t.MO.RELSTRETCH,"\u3008":t.MO.OPEN,"\u3009":t.MO.CLOSE,"\ufe37":t.MO.WIDEACCENT,"\ufe38":t.MO.WIDEACCENT}},t.OPTABLE.infix["^"]=t.MO.WIDEREL,t.OPTABLE.infix._=t.MO.WIDEREL,t.OPTABLE.prefix["\u2223"]=t.MO.OPEN,t.OPTABLE.prefix["\u2225"]=t.MO.OPEN,t.OPTABLE.postfix["\u2223"]=t.MO.CLOSE,t.OPTABLE.postfix["\u2225"]=t.MO.CLOSE},403:function(e,t){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractEmptyNode=t.AbstractNode=void 0;var a=function(){function e(e,t,r){var n,a;void 0===t&&(t={}),void 0===r&&(r=[]),this.parent=null,this.properties={},this._factory=null,this.childNodes=[],this._factory=e;try{for(var o=i(Object.keys(t)),s=o.next();!s.done;s=o.next()){var u=s.value;this.setProperty(u,t[u])}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}r.length&&this.setChildren(r)}return Object.defineProperty(e.prototype,"factory",{get:function(){return this._factory},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return"unknown"},enumerable:!1,configurable:!0}),e.prototype.setProperty=function(e,t){this.properties[e]=t},e.prototype.getProperty=function(e){return this.properties[e]},e.prototype.getPropertyNames=function(){return Object.keys(this.properties)},e.prototype.getAllProperties=function(){return this.properties},e.prototype.removeProperty=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var s=o.value;delete this.properties[s]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}},e.prototype.isKind=function(e){return this.factory.nodeIsKind(this,e)},e.prototype.setChildren=function(e){var t,r;this.childNodes=[];try{for(var n=i(e),a=n.next();!a.done;a=n.next()){var o=a.value;this.appendChild(o)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.appendChild=function(e){return this.childNodes.push(e),e.parent=this,e},e.prototype.replaceChild=function(e,t){var r=this.childIndex(t);return null!==r&&(this.childNodes[r]=e,e.parent=this),e},e.prototype.childIndex=function(e){var t=this.childNodes.indexOf(e);return-1===t?null:t},e.prototype.findNodes=function(e){var t=[];return this.walkTree((function(r){r.isKind(e)&&t.push(r)})),t},e.prototype.walkTree=function(e,t){var r,n;e(this,t);try{for(var a=i(this.childNodes),o=a.next();!o.done;o=a.next()){var s=o.value;s&&s.walkTree(e,t)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return t},e.prototype.toString=function(){return this.kind+"("+this.childNodes.join(",")+")"},e}();t.AbstractNode=a;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.setChildren=function(e){},t.prototype.appendChild=function(e){return e},t.prototype.replaceChild=function(e,t){return t},t.prototype.childIndex=function(e){return null},t.prototype.walkTree=function(e,t){return e(this,t),t},t.prototype.toString=function(){return this.kind},t}(a);t.AbstractEmptyNode=o},960:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractWrapper=void 0;var r=function(){function e(e,t){this.factory=e,this.node=t}return Object.defineProperty(e.prototype,"kind",{get:function(){return this.node.kind},enumerable:!1,configurable:!0}),e.prototype.wrap=function(e){return this.factory.wrap(e)},e}();t.AbstractWrapper=r},401:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.ParserConfiguration=t.ConfigurationHandler=t.Configuration=void 0;var a,o=r(498),s=r(683),u=r(341),c=r(721),h=r(723),l=function(){function e(e,t,r,n,i,a,o,s,u,c,h,l){void 0===t&&(t={}),void 0===r&&(r={}),void 0===n&&(n={}),void 0===i&&(i={}),void 0===a&&(a={}),void 0===o&&(o={}),void 0===s&&(s=[]),void 0===u&&(u=[]),void 0===c&&(c=null),void 0===h&&(h=null),this.name=e,this.handler=t,this.fallback=r,this.items=n,this.tags=i,this.options=a,this.nodes=o,this.preprocessors=s,this.postprocessors=u,this.initMethod=c,this.configMethod=h,this.priority=l,this.handler=Object.assign({character:[],delimiter:[],macro:[],environment:[]},t)}return e.makeProcessor=function(e,t){return Array.isArray(e)?e:[e,t]},e._create=function(t,r){var n=this;void 0===r&&(r={});var i=r.priority||c.PrioritizedList.DEFAULTPRIORITY,a=r.init?this.makeProcessor(r.init,i):null,o=r.config?this.makeProcessor(r.config,i):null,s=(r.preprocessors||[]).map((function(e){return n.makeProcessor(e,i)})),u=(r.postprocessors||[]).map((function(e){return n.makeProcessor(e,i)}));return new e(t,r.handler||{},r.fallback||{},r.items||{},r.tags||{},r.options||{},r.nodes||{},s,u,a,o,i)},e.create=function(t,r){void 0===r&&(r={});var n=e._create(t,r);return a.set(t,n),n},e.local=function(t){return void 0===t&&(t={}),e._create("",t)},Object.defineProperty(e.prototype,"init",{get:function(){return this.initMethod?this.initMethod[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.configMethod?this.configMethod[0]:null},enumerable:!1,configurable:!0}),e}();t.Configuration=l,function(e){var t=new Map;e.set=function(e,r){t.set(e,r)},e.get=function(e){return t.get(e)},e.keys=function(){return t.keys()}}(a=t.ConfigurationHandler||(t.ConfigurationHandler={}));var p=function(){function e(e){var t,r,i,a;this.initMethod=new u.FunctionList,this.configMethod=new u.FunctionList,this.configurations=new c.PrioritizedList,this.handlers=new s.SubHandlers,this.items={},this.tags={},this.options={},this.nodes={};try{for(var o=n(e.slice().reverse()),h=o.next();!h.done;h=o.next()){var l=h.value;this.addPackage(l)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}try{for(var p=n(this.configurations),f=p.next();!f.done;f=p.next()){var d=f.value,m=d.item,y=d.priority;this.append(m,y)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return e.prototype.init=function(){this.initMethod.execute(this)},e.prototype.config=function(e){var t,r;this.configMethod.execute(this,e);try{for(var i=n(this.configurations),a=i.next();!a.done;a=i.next()){var o=a.value;this.addFilters(e,o.item)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.addPackage=function(e){var t="string"==typeof e?e:e[0],r=a.get(t);r&&this.configurations.add(r,"string"==typeof e?r.priority:e[1])},e.prototype.add=function(e,t,r){var i,a;void 0===r&&(r={}),this.append(e),this.configurations.add(e,e.priority),this.init();var s=t.parseOptions;s.nodeFactory.setCreators(e.nodes);try{for(var u=n(Object.keys(e.items)),c=u.next();!c.done;c=u.next()){var l=c.value;s.itemFactory.setNodeClass(l,e.items[l])}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}h.TagsFactory.addTags(e.tags),o.defaultOptions(s.options,e.options),o.userOptions(s.options,r),this.addFilters(t,e),e.config&&e.config(this,t)},e.prototype.append=function(e,t){t=t||e.priority,e.initMethod&&this.initMethod.add(e.initMethod[0],e.initMethod[1]),e.configMethod&&this.configMethod.add(e.configMethod[0],e.configMethod[1]),this.handlers.add(e.handler,e.fallback,t),Object.assign(this.items,e.items),Object.assign(this.tags,e.tags),o.defaultOptions(this.options,e.options),Object.assign(this.nodes,e.nodes)},e.prototype.addFilters=function(e,t){var r,a,o,s;try{for(var u=n(t.preprocessors),c=u.next();!c.done;c=u.next()){var h=i(c.value,2),l=h[0],p=h[1];e.preFilters.add(l,p)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}try{for(var f=n(t.postprocessors),d=f.next();!d.done;d=f.next()){var m=i(d.value,2),y=m[0];p=m[1];e.postFilters.add(y,p)}}catch(e){o={error:e}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}},e}();t.ParserConfiguration=p},683:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.SubHandlers=t.SubHandler=t.MapHandler=void 0;var a,o=r(721),s=r(341);!function(e){var t=new Map;e.register=function(e){t.set(e.name,e)},e.getMap=function(e){return t.get(e)}}(a=t.MapHandler||(t.MapHandler={}));var u=function(){function e(){this._configuration=new o.PrioritizedList,this._fallback=new s.FunctionList}return e.prototype.add=function(e,t,r){var i,s;void 0===r&&(r=o.PrioritizedList.DEFAULTPRIORITY);try{for(var u=n(e.slice().reverse()),c=u.next();!c.done;c=u.next()){var h=c.value,l=a.getMap(h);if(!l)return void this.warn("Configuration "+h+" not found! Omitted.");this._configuration.add(l,r)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}t&&this._fallback.add(t,r)},e.prototype.parse=function(e){var t,r;try{for(var a=n(this._configuration),o=a.next();!o.done;o=a.next()){var s=o.value.item.parse(e);if(s)return s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}var u=i(e,2),c=u[0],h=u[1];this._fallback.toArray()[0].item(c,h)},e.prototype.lookup=function(e){var t=this.applicable(e);return t?t.lookup(e):null},e.prototype.contains=function(e){return!!this.applicable(e)},e.prototype.toString=function(){var e,t,r=[];try{for(var i=n(this._configuration),a=i.next();!a.done;a=i.next()){var o=a.value.item;r.push(o.name)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r.join(", ")},e.prototype.applicable=function(e){var t,r;try{for(var i=n(this._configuration),a=i.next();!a.done;a=i.next()){var o=a.value.item;if(o.contains(e))return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return null},e.prototype.retrieve=function(e){var t,r;try{for(var i=n(this._configuration),a=i.next();!a.done;a=i.next()){var o=a.value.item;if(o.name===e)return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return null},e.prototype.warn=function(e){console.log("TexParser Warning: "+e)},e}();t.SubHandler=u;var c=function(){function e(){this.map=new Map}return e.prototype.add=function(e,t,r){var i,a;void 0===r&&(r=o.PrioritizedList.DEFAULTPRIORITY);try{for(var s=n(Object.keys(e)),c=s.next();!c.done;c=s.next()){var h=c.value,l=this.get(h);l||(l=new u,this.set(h,l)),l.add(e[h],t[h],r)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},e.prototype.set=function(e,t){this.map.set(e,t)},e.prototype.get=function(e){return this.map.get(e)},e.prototype.retrieve=function(e){var t,r;try{for(var i=n(this.map.values()),a=i.next();!a.done;a=i.next()){var o=a.value.retrieve(e);if(o)return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return null},e.prototype.keys=function(){return this.map.keys()},e}();t.SubHandlers=c},972:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(45),u=r(625);!function(e){var t=new Map([["autoOP",!0],["fnOP",!0],["movesupsub",!0],["subsupOK",!0],["texprimestyle",!0],["useHeight",!0],["variantForm",!0],["withDelims",!0],["open",!0],["close",!0]]);function r(e,r){var i,a;try{for(var o=n(Object.keys(r)),s=o.next();!s.done;s=o.next()){var u=s.value,c=r[u];"texClass"===u?(e.texClass=c,e.setProperty(u,c)):"movablelimits"===u?(e.setProperty("movablelimits",c),(e.isKind("mo")||e.isKind("mstyle"))&&e.attributes.set("movablelimits",c)):"inferred"===u||(t.has(u)?e.setProperty(u,c):e.attributes.set(u,c))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function i(e,t,r){e.childNodes[t]=r,r&&(r.parent=e)}function o(e,t){return e.isKind(t)}e.createEntity=function(e){return String.fromCodePoint(parseInt(e,16))},e.getChildren=function(e){return e.childNodes},e.getText=function(e){return e.getText()},e.appendChildren=function(e,t){var r,i;try{for(var a=n(t),o=a.next();!o.done;o=a.next()){var s=o.value;e.appendChild(s)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.setAttribute=function(e,t,r){e.attributes.set(t,r)},e.setProperty=function(e,t,r){e.setProperty(t,r)},e.setProperties=r,e.getProperty=function(e,t){return e.getProperty(t)},e.getAttribute=function(e,t){return e.attributes.get(t)},e.removeProperties=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e.removeProperty.apply(e,a(t))},e.getChildAt=function(e,t){return e.childNodes[t]},e.setChild=i,e.copyChildren=function(e,t){for(var r=e.childNodes,n=0;n<r.length;n++)i(t,n,r[n])},e.copyAttributes=function(e,t){t.attributes=e.attributes,r(t,e.getAllProperties())},e.isType=o,e.isEmbellished=function(e){return e.isEmbellished},e.getTexClass=function(e){return e.texClass},e.getCoreMO=function(e){return e.coreMO()},e.isNode=function(e){return e instanceof s.AbstractMmlNode||e instanceof s.AbstractMmlEmptyNode},e.isInferred=function(e){return e.isInferred},e.getForm=function(e){var t,r;if(!o(e,"mo"))return null;var i=e,a=i.getForms();try{for(var s=n(a),c=s.next();!c.done;c=s.next()){var h=c.value,l=u.MmlMo.OPTABLE[h][i.getText()];if(l)return l}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return null}}(o||(o={})),t.default=o},362:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(972),s=r(27),u=r(38);!function(e){e.variable=function(e,t){var r=u.default.getFontDef(e),n=e.create("token","mi",r,t);e.Push(n)},e.digit=function(e,t){var r,n=e.configuration.options.digits,i=e.string.slice(e.i-1).match(n),a=u.default.getFontDef(e);i?(r=e.create("token","mn",a,i[0].replace(/[{}]/g,"")),e.i+=i[0].length-1):r=e.create("token","mo",a,t),e.Push(r)},e.controlSequence=function(e,t){var r=e.GetCS();e.parse("macro",[e,r])},e.mathchar0mi=function(e,t){var r=t.attributes||{mathvariant:s.TexConstant.Variant.ITALIC},n=e.create("token","mi",r,t.char);e.Push(n)},e.mathchar0mo=function(e,t){var r=t.attributes||{};r.stretchy=!1;var n=e.create("token","mo",r,t.char);o.default.setProperty(n,"fixStretchy",!0),e.configuration.addNode("fixStretchy",n),e.Push(n)},e.mathchar7=function(e,t){var r=t.attributes||{mathvariant:s.TexConstant.Variant.NORMAL};e.stack.env.font&&(r.mathvariant=e.stack.env.font);var n=e.create("token","mi",r,t.char);e.Push(n)},e.delimiter=function(e,t){var r=t.attributes||{};r=Object.assign({fence:!1,stretchy:!1},r);var n=e.create("token","mo",r,t.char);e.Push(n)},e.environment=function(e,t,r,n){var a=n[0],o=e.itemFactory.create("begin").setProperties({name:t,end:a});o=r.apply(void 0,i([e,o],n.slice(1))),e.Push(o)}}(a||(a={})),t.default=a},38:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(45),s=r(972),u=r(32),c=r(420),h=r(51);r(663),function(e){var t=7.2,r={em:function(e){return e},ex:function(e){return.43*e},pt:function(e){return e/10},pc:function(e){return 1.2*e},px:function(e){return e*t/72},in:function(e){return e*t},cm:function(e){return e*t/2.54},mm:function(e){return e*t/25.4},mu:function(e){return e/18}},a="([-+]?([.,]\\d+|\\d+([.,]\\d*)?))",l="(pt|em|ex|mu|px|mm|cm|in|pc)",p=RegExp("^\\s*"+a+"\\s*"+l+"\\s*$"),f=RegExp("^\\s*"+a+"\\s*"+l+" ?");function d(e,t){void 0===t&&(t=!1);var i=e.match(t?f:p);return i?function(e){var t=n(e,3),i=t[0],a=t[1],o=t[2];if("mu"!==a)return[i,a,o];return[m(r[a](parseFloat(i||"1"))).slice(0,-2),"em",o]}([i[1].replace(/,/,"."),i[4],i[0].length]):[null,null,0]}function m(e){return Math.abs(e)<6e-4?"0em":e.toFixed(3).replace(/\.?0+$/,"")+"em"}function y(e,t,r){"{"!==t&&"}"!==t||(t="\\"+t);var n="{\\bigg"+r+" "+t+"}",i="{\\big"+r+" "+t+"}";return new u.default("\\mathchoice"+n+i+i+i,{},e).mml()}function x(e,t,r){t=t.replace(/^\s+/,h.entities.nbsp).replace(/\s+$/,h.entities.nbsp);var n=e.create("text",t);return e.create("node","mtext",[],r,n)}function v(e,t,r){if(r.match(/^[a-z]/i)&&t.match(/(^|[^\\])(\\\\)*\\[a-z]+$/i)&&(t+=" "),t.length+r.length>e.configuration.options.maxBuffer)throw new c.default("MaxBufferSize","MathJax internal buffer size exceeded; is there a recursive macro call?");return t+r}function g(e,t){for(;t>0;)e=e.trim().slice(1,-1),t--;return e.trim()}function M(e,t){for(var r=e.length,n=0,i="",a=0,o=0,s=!0,u=!1;a<r;){var h=e[a++];switch(h){case" ":break;case"{":s?o++:(u=!1,o>n&&(o=n)),n++;break;case"}":n&&n--,(s||u)&&(o--,u=!0),s=!1;break;default:if(!n&&-1!==t.indexOf(h))return[u?"true":g(i,o),h,e.slice(a)];s=!1,u=!1}i+=h}if(n)throw new c.default("ExtraOpenMissingClose","Extra open brace or missing close brace");return[u?"true":g(i,o),"",e.slice(a)]}e.matchDimen=d,e.dimen2em=function(e){var t=n(d(e),2),i=t[0],a=t[1],o=parseFloat(i||"1"),s=r[a];return s?s(o):0},e.Em=m,e.fenced=function(e,t,r,n,i){void 0===i&&(i="");var a,c=e.nodeFactory,h=c.create("node","mrow",[],{open:t,close:n,texClass:o.TEXCLASS.INNER});if(i)a=new u.default("\\"+i+"l"+t,e.parser.stack.env,e).mml();else{var l=c.create("text",t);a=c.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:o.TEXCLASS.OPEN},l)}if(s.default.appendChildren(h,[a]),s.default.isType(r,"mrow")&&s.default.isInferred(r)?s.default.appendChildren(h,s.default.getChildren(r)):s.default.appendChildren(h,[r]),i)a=new u.default("\\"+i+"r"+n,e.parser.stack.env,e).mml();else{var p=c.create("text",n);a=c.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:o.TEXCLASS.CLOSE},p)}return s.default.appendChildren(h,[a]),h},e.fixedFence=function(e,t,r,n){var i=e.nodeFactory.create("node","mrow",[],{open:t,close:n,texClass:o.TEXCLASS.ORD});return t&&s.default.appendChildren(i,[y(e,t,"l")]),s.default.isType(r,"mrow")?s.default.appendChildren(i,s.default.getChildren(r)):s.default.appendChildren(i,[r]),n&&s.default.appendChildren(i,[y(e,n,"r")]),i},e.mathPalette=y,e.fixInitialMO=function(e,t){for(var r=0,n=t.length;r<n;r++){var i=t[r];if(i&&!s.default.isType(i,"mspace")&&(!s.default.isType(i,"TeXAtom")||s.default.getChildren(i)[0]&&s.default.getChildren(s.default.getChildren(i)[0]).length)){if(s.default.isEmbellished(i)||s.default.isType(i,"TeXAtom")&&s.default.getTexClass(i)===o.TEXCLASS.REL){var a=e.nodeFactory.create("node","mi");t.unshift(a)}break}}},e.internalMath=function(e,t,r,n){if(e.configuration.options.internalMath)return e.configuration.options.internalMath(e,t,r,n);var i,a,o=n||e.stack.env.font,s=o?{mathvariant:o}:{},h=[],l=0,p=0,f="",d=0;if(t.match(/\\?[${}\\]|\\\(|\\(eq)?ref\s*\{/)){for(;l<t.length;)if("$"===(i=t.charAt(l++)))"$"===f&&0===d?(a=e.create("node","TeXAtom",[new u.default(t.slice(p,l-1),{},e.configuration).mml()]),h.push(a),f="",p=l):""===f&&(p<l-1&&h.push(x(e,t.slice(p,l-1),s)),f="$",p=l);else if("{"===i&&""!==f)d++;else if("}"===i)if("}"===f&&0===d){var m=new u.default(t.slice(p,l),{},e.configuration).mml();a=e.create("node","TeXAtom",[m],s),h.push(a),f="",p=l}else""!==f&&d&&d--;else if("\\"===i)if(""===f&&t.substr(l).match(/^(eq)?ref\s*\{/)){var y=RegExp["$&"].length;p<l-1&&h.push(x(e,t.slice(p,l-1),s)),f="}",p=l-1,l+=y}else"("===(i=t.charAt(l++))&&""===f?(p<l-2&&h.push(x(e,t.slice(p,l-2),s)),f=")",p=l):")"===i&&")"===f&&0===d?(a=e.create("node","TeXAtom",[new u.default(t.slice(p,l-2),{},e.configuration).mml()]),h.push(a),f="",p=l):i.match(/[${}\\]/)&&""===f&&(l--,t=t.substr(0,l-1)+t.substr(l));if(""!==f)throw new c.default("MathNotTerminated","Math not terminated in text box")}return p<t.length&&h.push(x(e,t.slice(p),s)),null!=r?h=[e.create("node","mstyle",h,{displaystyle:!1,scriptlevel:r})]:h.length>1&&(h=[e.create("node","mrow",h)]),h},e.internalText=x,e.trimSpaces=function(e){if("string"!=typeof e)return e;var t=e.trim();return t.match(/\\$/)&&e.match(/ $/)&&(t+=" "),t},e.setArrayAlign=function(t,r){return"t"===(r=e.trimSpaces(r||""))?t.arraydef.align="baseline 1":"b"===r?t.arraydef.align="baseline -1":"c"===r?t.arraydef.align="center":r&&(t.arraydef.align=r),t},e.substituteArgs=function(e,t,r){for(var n="",i="",a=0;a<r.length;){var o=r.charAt(a++);if("\\"===o)n+=o+r.charAt(a++);else if("#"===o)if("#"===(o=r.charAt(a++)))n+=o;else{if(!o.match(/[1-9]/)||parseInt(o,10)>t.length)throw new c.default("IllegalMacroParam","Illegal macro parameter reference");i=v(e,v(e,i,n),t[parseInt(o,10)-1]),n=""}else n+=o}return v(e,i,n)},e.addArgs=v,e.checkEqnEnv=function(e){if(e.stack.global.eqnenv)throw new c.default("ErroneousNestingEq","Erroneous nesting of equation structures");e.stack.global.eqnenv=!0},e.MmlFilterAttribute=function(e,t,r){return r},e.getFontDef=function(e){var t=e.stack.env.font;return t?{mathvariant:t}:{}},e.keyvalOptions=function(e,t,r){var a,o;void 0===t&&(t=null),void 0===r&&(r=!1);var s=function(e){var t,r,i,a,o,s={},u=e;for(;u;)a=(t=n(M(u,["=",","]),3))[0],i=t[1],u=t[2],"="===i?(o=(r=n(M(u,[","]),3))[0],i=r[1],u=r[2],o="false"===o||"true"===o?JSON.parse(o):o,s[a]=o):a&&(s[a]=!0);return s}(e);if(t)try{for(var u=i(Object.keys(s)),h=u.next();!h.done;h=u.next()){var l=h.value;if(!t.hasOwnProperty(l)){if(r)throw new c.default("InvalidOption","Invalid optional argument: %1",l);delete s[l]}}}catch(e){a={error:e}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}return s}}(a||(a={})),t.default=a},758:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(972),s=function(){function e(e,t,r){this._factory=e,this._env=t,this.global={},this.stack=[],this.global={isInner:r},this.stack=[this._factory.create("start",this.global)],t&&(this.stack[0].env=t),this.env=this.stack[0].env}return Object.defineProperty(e.prototype,"env",{get:function(){return this._env},set:function(e){this._env=e},enumerable:!1,configurable:!0}),e.prototype.Push=function(){for(var e,t,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{for(var u=n(r),c=u.next();!c.done;c=u.next()){var h=c.value;if(h){var l=o.default.isNode(h)?this._factory.create("mml",h):h;l.global=this.global;var p=i(this.stack.length?this.Top().checkItem(l):[null,!0],2),f=p[0],d=p[1];d&&(f?(this.Pop(),this.Push.apply(this,a(f))):(this.stack.push(l),l.env?(l.copyEnv&&Object.assign(l.env,this.env),this.env=l.env):l.env=this.env))}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}},e.prototype.Pop=function(){var e=this.stack.pop();return e.isOpen||delete e.env,this.env=this.stack.length?this.Top().env:{},e},e.prototype.Top=function(e){return void 0===e&&(e=1),this.stack.length<e?null:this.stack[this.stack.length-e]},e.prototype.Prev=function(e){var t=this.Top();return e?t.First:t.Pop()},e.prototype.toString=function(){return"stack[\n  "+this.stack.join("\n  ")+"\n]"},e}();t.default=s},539:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseItem=t.MmlStack=void 0;var u=r(420),c=function(){function e(e){this._nodes=e}return Object.defineProperty(e.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),e.prototype.Push=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this._nodes).push.apply(e,o(t))},e.prototype.Pop=function(){return this._nodes.pop()},Object.defineProperty(e.prototype,"First",{get:function(){return this._nodes[this.Size()-1]},set:function(e){this._nodes[this.Size()-1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Last",{get:function(){return this._nodes[0]},set:function(e){this._nodes[0]=e},enumerable:!1,configurable:!0}),e.prototype.Peek=function(e){return null==e&&(e=1),this._nodes.slice(this.Size()-e)},e.prototype.Size=function(){return this._nodes.length},e.prototype.Clear=function(){this._nodes=[]},e.prototype.toMml=function(e,t){return void 0===e&&(e=!0),1!==this._nodes.length||t?this.create("node",e?"inferredMrow":"mrow",this._nodes,{}):this.First},e.prototype.create=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this.factory.configuration.nodeFactory).create.apply(t,o([e],r))},e}();t.MmlStack=c;var h=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.call(this,r)||this;return i.factory=t,i.global={},i._properties={},i.isOpen&&(i._env={}),i}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"base"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"env",{get:function(){return this._env},set:function(e){this._env=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyEnv",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getProperty=function(e){return this._properties[e]},t.prototype.setProperty=function(e,t){return this._properties[e]=t,this},Object.defineProperty(t.prototype,"isOpen",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFinal",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.isKind=function(e){return e===this.kind},t.prototype.checkItem=function(e){if(e.isKind("over")&&this.isOpen&&(e.setProperty("num",this.toMml(!1)),this.Clear()),e.isKind("cell")&&this.isOpen){if(e.getProperty("linebreak"))return t.fail;throw new u.default("Misplaced","Misplaced %1",e.getName())}if(e.isClose&&this.getErrors(e.kind)){var r=a(this.getErrors(e.kind),2),n=r[0],i=r[1];throw new u.default(n,i,e.getName())}return e.isFinal?(this.Push(e.First),t.fail):t.success},t.prototype.clearEnv=function(){var e,t;try{for(var r=s(Object.keys(this.env)),n=r.next();!n.done;n=r.next()){var i=n.value;delete this.env[i]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.setProperties=function(e){return Object.assign(this._properties,e),this},t.prototype.getName=function(){return this.getProperty("name")},t.prototype.toString=function(){return this.kind+"["+this.nodes.join("; ")+"]"},t.prototype.getErrors=function(e){return(this.constructor.errors||{})[e]||t.errors[e]},t.fail=[null,!1],t.success=[null,!0],t.errors={end:["MissingBeginExtraEnd","Missing \\begin{%1} or extra \\end{%1}"],close:["ExtraCloseMissingOpen","Extra close brace or missing open brace"],right:["MissingLeftExtraRight","Missing \\left or extra \\right"]},t}(c);t.BaseItem=h},735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Macro=t.Symbol=void 0;var r=function(){function e(e,t,r){this._symbol=e,this._char=t,this._attributes=r}return Object.defineProperty(e.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"char",{get:function(){return this._char},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this._attributes},enumerable:!1,configurable:!0}),e}();t.Symbol=r;var n=function(){function e(e,t,r){void 0===r&&(r=[]),this._symbol=e,this._func=t,this._args=r}return Object.defineProperty(e.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"func",{get:function(){return this._func},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"args",{get:function(){return this._args},enumerable:!1,configurable:!0}),e}();t.Macro=n},695:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentMap=t.CommandMap=t.MacroMap=t.DelimiterMap=t.CharacterMap=t.AbstractParseMap=t.RegExpMap=t.AbstractSymbolMap=void 0;var u=r(735),c=r(683),h=function(){function e(e,t){this._name=e,this._parser=t,c.MapHandler.register(this)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e.prototype.parserFor=function(e){return this.contains(e)?this.parser:null},e.prototype.parse=function(e){var t=a(e,2),r=t[0],n=t[1],i=this.parserFor(n),o=this.lookup(n);return i&&o?i(r,o)||!0:null},Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser},set:function(e){this._parser=e},enumerable:!1,configurable:!0}),e}();t.AbstractSymbolMap=h;var l=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i._regExp=n,i}return i(t,e),t.prototype.contains=function(e){return this._regExp.test(e)},t.prototype.lookup=function(e){return this.contains(e)?e:null},t}(h);t.RegExpMap=l;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map=new Map,t}return i(t,e),t.prototype.lookup=function(e){return this.map.get(e)},t.prototype.contains=function(e){return this.map.has(e)},t.prototype.add=function(e,t){this.map.set(e,t)},t.prototype.remove=function(e){this.map.delete(e)},t}(h);t.AbstractParseMap=p;var f=function(e){function t(t,r,n){var i,s,c=e.call(this,t,r)||this;try{for(var h=o(Object.keys(n)),l=h.next();!l.done;l=h.next()){var p=l.value,f=n[p],d=a("string"==typeof f?[f,null]:f,2),m=d[0],y=d[1],x=new u.Symbol(p,m,y);c.add(p,x)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return c}return i(t,e),t}(p);t.CharacterMap=f;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(t){var r=a(t,2),n=r[0],i=r[1];return e.prototype.parse.call(this,[n,"\\"+i])},t}(f);t.DelimiterMap=d;var m=function(e){function t(t,r,n){var i,s,c=e.call(this,t,null)||this;try{for(var h=o(Object.keys(r)),l=h.next();!l.done;l=h.next()){var p=l.value,f=r[p],d=a("string"==typeof f?[f]:f),m=d[0],y=d.slice(1),x=new u.Macro(p,n[m],y);c.add(p,x)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return c}return i(t,e),t.prototype.parserFor=function(e){var t=this.lookup(e);return t?t.func:null},t.prototype.parse=function(e){var t=a(e,2),r=t[0],n=t[1],i=this.lookup(n),o=this.parserFor(n);return i&&o?o.apply(void 0,s([r,i.symbol],i.args))||!0:null},t}(p);t.MacroMap=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=a(e,2),r=t[0],n=t[1],i=this.lookup(n),o=this.parserFor(n);if(!i||!o)return null;if(!o)return null;var u=r.currentCS;r.currentCS="\\"+n;var c=o.apply(void 0,s([r,"\\"+i.symbol],i.args));return r.currentCS=u,c||!0},t}(m);t.CommandMap=y;var x=function(e){function t(t,r,n,i){var a=e.call(this,t,n,i)||this;return a.parser=r,a}return i(t,e),t.prototype.parse=function(e){var t=a(e,2),r=t[0],n=t[1],i=this.lookup(n),o=this.parserFor(n);return i&&o?(this.parser(r,i.symbol,o,i.args),!0):null},t}(m);t.EnvironmentMap=x},723:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.TagsFactory=t.AllTags=t.NoTags=t.AbstractTags=t.TagInfo=t.Label=void 0;var o=r(32),s=function(e,t){void 0===e&&(e="???"),void 0===t&&(t=""),this.tag=e,this.id=t};t.Label=s;var u=function(e,t,r,n,i,a,o,s){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===i&&(i=""),void 0===a&&(a=""),void 0===o&&(o=!1),void 0===s&&(s=""),this.env=e,this.taggable=t,this.defaultTags=r,this.tag=n,this.tagId=i,this.tagFormat=a,this.noTag=o,this.labelId=s};t.TagInfo=u;var c=function(){function e(){this.counter=0,this.allCounter=0,this.configuration=null,this.ids={},this.allIds={},this.labels={},this.allLabels={},this.redo=!1,this.refUpdate=!1,this.currentTag=new u,this.history=[],this.stack=[],this.enTag=function(e,t){var r=this.configuration.nodeFactory,n=r.create("node","mtd",[e]),i=r.create("node","mlabeledtr",[t,n]);return r.create("node","mtable",[i],{side:this.configuration.options.tagSide,minlabelspacing:this.configuration.options.tagIndent,displaystyle:!0})}}return e.prototype.start=function(e,t,r){this.currentTag&&this.stack.push(this.currentTag),this.currentTag=new u(e,t,r)},Object.defineProperty(e.prototype,"env",{get:function(){return this.currentTag.env},enumerable:!1,configurable:!0}),e.prototype.end=function(){this.history.push(this.currentTag),this.currentTag=this.stack.pop()},e.prototype.tag=function(e,t){this.currentTag.tag=e,this.currentTag.tagFormat=t?e:this.formatTag(e),this.currentTag.noTag=!1},e.prototype.notag=function(){this.tag("",!0),this.currentTag.noTag=!0},Object.defineProperty(e.prototype,"noTag",{get:function(){return this.currentTag.noTag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.currentTag.labelId},set:function(e){this.currentTag.labelId=e},enumerable:!1,configurable:!0}),e.prototype.formatUrl=function(e,t){return t+"#"+encodeURIComponent(e)},e.prototype.formatTag=function(e){return"("+e+")"},e.prototype.formatId=function(e){return"mjx-eqn-"+e.replace(/\s/g,"_")},e.prototype.formatNumber=function(e){return e.toString()},e.prototype.autoTag=function(){null==this.currentTag.tag&&(this.counter++,this.tag(this.formatNumber(this.counter),!1))},e.prototype.clearTag=function(){this.label="",this.tag(null,!0),this.currentTag.tagId=""},e.prototype.getTag=function(e){if(void 0===e&&(e=!1),e)return this.autoTag(),this.makeTag();var t=this.currentTag;return t.taggable&&!t.noTag&&(t.defaultTags&&this.autoTag(),t.tag)?this.makeTag():null},e.prototype.resetTag=function(){this.history=[],this.redo=!1,this.refUpdate=!1,this.clearTag()},e.prototype.reset=function(e){void 0===e&&(e=0),this.resetTag(),this.counter=this.allCounter=e,this.allLabels={},this.allIds={}},e.prototype.startEquation=function(e){this.labels={},this.ids={},this.counter=this.allCounter,this.redo=!1;var t=e.inputData.recompile;t&&(this.refUpdate=!0,this.counter=t.counter)},e.prototype.finishEquation=function(e){this.redo&&(e.inputData.recompile={state:e.state(),counter:this.allCounter}),this.refUpdate||(this.allCounter=this.counter),Object.assign(this.allIds,this.ids),Object.assign(this.allLabels,this.labels)},e.prototype.finalize=function(e,t){if(!t.display||this.currentTag.env||null==this.currentTag.tag)return e;var r=this.makeTag();return this.enTag(e,r)},e.prototype.makeId=function(){this.currentTag.tagId=this.formatId(this.configuration.options.useLabelIds&&this.label||this.currentTag.tag)},e.prototype.makeTag=function(){this.makeId(),this.label&&(this.labels[this.label]=new s(this.currentTag.tag,this.currentTag.tagId));var e=new o.default("\\text{"+this.currentTag.tagFormat+"}",{},this.configuration).mml();return this.configuration.nodeFactory.create("node","mtd",[e],{id:this.currentTag.tagId})},e}();t.AbstractTags=c;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.autoTag=function(){},t.prototype.getTag=function(){return this.currentTag.tag?e.prototype.getTag.call(this):null},t}(c);t.NoTags=h;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.finalize=function(e,t){if(!t.display||this.history.find((function(e){return e.taggable})))return e;var r=this.getTag(!0);return this.enTag(e,r)},t}(c);t.AllTags=l,function(e){var t=new Map([["none",h],["all",l]]),r="none";e.OPTIONS={tags:r,tagSide:"right",tagIndent:"0.8em",multlineWidth:"85%",useLabelIds:!0,ignoreDuplicateLabels:!1},e.add=function(e,r){t.set(e,r)},e.addTags=function(t){var r,n;try{for(var i=a(Object.keys(t)),o=i.next();!o.done;o=i.next()){var s=o.value;e.add(s,t[s])}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.create=function(e){var n=t.get(e)||t.get(r);if(!n)throw Error("Unknown tags class");return new n},e.setDefault=function(e){r=e},e.getDefault=function(){return e.create(r)}}(t.TagsFactory||(t.TagsFactory={}))},27:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TexConstant=void 0,function(e){e.Variant={NORMAL:"normal",BOLD:"bold",ITALIC:"italic",BOLDITALIC:"bold-italic",DOUBLESTRUCK:"double-struck",FRAKTUR:"fraktur",BOLDFRAKTUR:"bold-fraktur",SCRIPT:"script",BOLDSCRIPT:"bold-script",SANSSERIF:"sans-serif",BOLDSANSSERIF:"bold-sans-serif",SANSSERIFITALIC:"sans-serif-italic",SANSSERIFBOLDITALIC:"sans-serif-bold-italic",MONOSPACE:"monospace",INITIAL:"inital",TAILED:"tailed",LOOPED:"looped",STRETCHED:"stretched",CALLIGRAPHIC:"-tex-calligraphic",OLDSTYLE:"-tex-oldstyle"},e.Form={PREFIX:"prefix",INFIX:"infix",POSTFIX:"postfix"},e.LineBreak={AUTO:"auto",NEWLINE:"newline",NOBREAK:"nobreak",GOODBREAK:"goodbreak",BADBREAK:"badbreak"},e.LineBreakStyle={BEFORE:"before",AFTER:"after",DUPLICATE:"duplicate",INFIXLINBREAKSTYLE:"infixlinebreakstyle"},e.IndentAlign={LEFT:"left",CENTER:"center",RIGHT:"right",AUTO:"auto",ID:"id",INDENTALIGN:"indentalign"},e.IndentShift={INDENTSHIFT:"indentshift"},e.LineThickness={THIN:"thin",MEDIUM:"medium",THICK:"thick"},e.Notation={LONGDIV:"longdiv",ACTUARIAL:"actuarial",PHASORANGLE:"phasorangle",RADICAL:"radical",BOX:"box",ROUNDEDBOX:"roundedbox",CIRCLE:"circle",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",UPDIAGONALSTRIKE:"updiagonalstrike",DOWNDIAGONALSTRIKE:"downdiagonalstrike",VERTICALSTRIKE:"verticalstrike",HORIZONTALSTRIKE:"horizontalstrike",NORTHEASTARROW:"northeastarrow",MADRUWB:"madruwb",UPDIAGONALARROW:"updiagonalarrow"},e.Align={TOP:"top",BOTTOM:"bottom",CENTER:"center",BASELINE:"baseline",AXIS:"axis",LEFT:"left",RIGHT:"right"},e.Lines={NONE:"none",SOLID:"solid",DASHED:"dashed"},e.Side={LEFT:"left",RIGHT:"right",LEFTOVERLAP:"leftoverlap",RIGHTOVERLAP:"rightoverlap"},e.Width={AUTO:"auto",FIT:"fit"},e.Actiontype={TOGGLE:"toggle",STATUSLINE:"statusline",TOOLTIP:"tooltip",INPUT:"input"},e.Length={VERYVERYTHINMATHSPACE:"veryverythinmathspace",VERYTHINMATHSPACE:"verythinmathspace",THINMATHSPACE:"thinmathspace",MEDIUMMATHSPACE:"mediummathspace",THICKMATHSPACE:"thickmathspace",VERYTHICKMATHSPACE:"verythickmathspace",VERYVERYTHICKMATHSPACE:"veryverythickmathspace",NEGATIVEVERYVERYTHINMATHSPACE:"negativeveryverythinmathspace",NEGATIVEVERYTHINMATHSPACE:"negativeverythinmathspace",NEGATIVETHINMATHSPACE:"negativethinmathspace",NEGATIVEMEDIUMMATHSPACE:"negativemediummathspace",NEGATIVETHICKMATHSPACE:"negativethickmathspace",NEGATIVEVERYTHICKMATHSPACE:"negativeverythickmathspace",NEGATIVEVERYVERYTHICKMATHSPACE:"negativeveryverythickmathspace"},e.Overflow={LINBREAK:"linebreak",SCROLL:"scroll",ELIDE:"elide",TRUNCATE:"truncate",SCALE:"scale"},e.Unit={EM:"em",EX:"ex",PX:"px",IN:"in",CM:"cm",MM:"mm",PT:"pt",PC:"pc"}}(t.TexConstant||(t.TexConstant={}))},420:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.id=t,this.message=e.processString(r,n)}return e.processString=function(t,r){for(var n=t.split(e.pattern),i=1,a=n.length;i<a;i+=2){var o=n[i].charAt(0);if(o>="0"&&o<="9")n[i]=r[parseInt(n[i],10)-1],"number"==typeof n[i]&&(n[i]=n[i].toString());else if("{"===o){if((o=n[i].substr(1))>="0"&&o<="9")n[i]=r[parseInt(n[i].substr(1,n[i].length-2),10)-1],"number"==typeof n[i]&&(n[i]=n[i].toString());else n[i].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/)&&(n[i]="%"+n[i])}null==n[i]&&(n[i]="???")}return n.join("")},e.pattern=/%(\d+|\{\d+\}|\{[a-z]+:\%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g,e}();t.default=r},32:function(e,t,r){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(38),s=r(758),u=r(420),c=r(45),h=function(){function e(e,t,r){var i,a;this._string=e,this.configuration=r,this.macroCount=0,this.i=0,this.currentCS="";var o,u=t.hasOwnProperty("isInner"),c=t.isInner;if(delete t.isInner,t){o={};try{for(var h=n(Object.keys(t)),l=h.next();!l.done;l=h.next()){var p=l.value;o[p]=t[p]}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}this.configuration.pushParser(this),this.stack=new s.default(this.itemFactory,o,!u||c),this.Parse(),this.Push(this.itemFactory.create("stop"))}return Object.defineProperty(e.prototype,"options",{get:function(){return this.configuration.options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemFactory",{get:function(){return this.configuration.itemFactory},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this.configuration.tags},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"string",{get:function(){return this._string},set:function(e){this._string=e},enumerable:!1,configurable:!0}),e.prototype.parse=function(e,t){return this.configuration.handlers.get(e).parse(t)},e.prototype.lookup=function(e,t){return this.configuration.handlers.get(e).lookup(t)},e.prototype.contains=function(e,t){return this.configuration.handlers.get(e).contains(t)},e.prototype.toString=function(){var e,t,r="";try{for(var i=n(Array.from(this.configuration.handlers.keys())),a=i.next();!a.done;a=i.next()){var o=a.value;r+=o+": "+this.configuration.handlers.get(o)+"\n"}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},e.prototype.Parse=function(){for(var e;this.i<this.string.length;)e=this.getCodePoint(),this.i+=e.length,this.parse("character",[this,e])},e.prototype.Push=function(e){e instanceof c.AbstractMmlNode&&e.isInferred?this.PushAll(e.childNodes):this.stack.Push(e)},e.prototype.PushAll=function(e){var t,r;try{for(var i=n(e),a=i.next();!a.done;a=i.next()){var o=a.value;this.stack.Push(o)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.mml=function(){if(!this.stack.Top().isKind("mml"))return null;var e=this.stack.Top().First;return this.configuration.popParser(),e},e.prototype.convertDelimiter=function(e){var t=this.lookup("delimiter",e);return t?t.char:null},e.prototype.getCodePoint=function(){var e=this.string.codePointAt(this.i);return void 0===e?"":String.fromCodePoint(e)},e.prototype.nextIsSpace=function(){return!!this.string.charAt(this.i).match(/\s/)},e.prototype.GetNext=function(){for(;this.nextIsSpace();)this.i++;return this.getCodePoint()},e.prototype.GetCS=function(){var e=this.string.slice(this.i).match(/^(([a-z]+) ?|[\uD800-\uDBFF].|.)/i);return e?(this.i+=e[0].length,e[2]||e[1]):(this.i++," ")},e.prototype.GetArgument=function(e,t){switch(this.GetNext()){case"":if(!t)throw new u.default("MissingArgFor","Missing argument for %1",this.currentCS);return null;case"}":if(!t)throw new u.default("ExtraCloseMissingOpen","Extra close brace or missing open brace");return null;case"\\":return this.i++,"\\"+this.GetCS();case"{":for(var r=++this.i,n=1;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"\\":this.i++;break;case"{":n++;break;case"}":if(0==--n)return this.string.slice(r,this.i-1)}throw new u.default("MissingCloseBrace","Missing close brace")}var i=this.getCodePoint();return this.i+=i.length,i},e.prototype.GetBrackets=function(e,t){if("["!==this.GetNext())return t;for(var r=++this.i,n=0;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"{":n++;break;case"\\":this.i++;break;case"}":if(n--<=0)throw new u.default("ExtraCloseLooking","Extra close brace while looking for %1","']'");break;case"]":if(0===n)return this.string.slice(r,this.i-1)}throw new u.default("MissingCloseBracket","Could not find closing ']' for argument to %1",this.currentCS)},e.prototype.GetDelimiter=function(e,t){var r=this.GetNext();if(this.i+=r.length,this.i<=this.string.length&&("\\"===r?r+=this.GetCS():"{"===r&&t&&(this.i--,r=this.GetArgument(e)),this.contains("delimiter",r)))return this.convertDelimiter(r);throw new u.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},e.prototype.GetDimen=function(e){if("{"===this.GetNext()){var t=this.GetArgument(e),r=i(o.default.matchDimen(t),2),n=r[0],a=r[1];if(n)return n+a}else{t=this.string.slice(this.i);var s=i(o.default.matchDimen(t,!0),3),c=(n=s[0],a=s[1],s[2]);if(n)return this.i+=c,n+a}throw new u.default("MissingDimOrUnits","Missing dimension or its units for %1",this.currentCS)},e.prototype.GetUpTo=function(e,t){for(;this.nextIsSpace();)this.i++;for(var r=this.i,n=0;this.i<this.string.length;){var i=this.i,a=this.GetNext();switch(this.i+=a.length,a){case"\\":a+=this.GetCS();break;case"{":n++;break;case"}":if(0===n)throw new u.default("ExtraCloseLooking","Extra close brace while looking for %1",t);n--}if(0===n&&a===t)return this.string.slice(r,i)}throw new u.default("TokenNotFoundForCommand","Could not find %1 for %2",t,this.currentCS)},e.prototype.ParseArg=function(t){return new e(this.GetArgument(t),this.stack.env,this.configuration).mml()},e.prototype.ParseUpTo=function(t,r){return new e(this.GetUpTo(t,r),this.stack.env,this.configuration).mml()},e.prototype.GetDelimiterArg=function(e){var t=o.default.trimSpaces(this.GetArgument(e));if(""===t)return null;if(this.contains("delimiter",t))return t;throw new u.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},e.prototype.GetStar=function(){var e="*"===this.GetNext();return e&&this.i++,e},e.prototype.create=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this.configuration.nodeFactory).create.apply(t,a([e],r))},e}();t.default=h},201:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.EquationItem=t.EqnArrayItem=t.ArrayItem=t.DotsItem=t.NotItem=t.FnItem=t.MmlItem=t.CellItem=t.PositionItem=t.StyleItem=t.EndItem=t.BeginItem=t.RightItem=t.LeftItem=t.OverItem=t.SubsupItem=t.PrimeItem=t.CloseItem=t.OpenItem=t.StopItem=t.StartItem=void 0;var s=r(683),u=r(51),c=r(45),h=r(420),l=r(38),p=r(972),f=r(539),d=function(e){function t(t,r){var n=e.call(this,t)||this;return n.global=r,n}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"start"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isKind("stop")){var r=this.toMml();return this.global.isInner||(r=this.factory.configuration.tags.finalize(r,this.env)),[[this.factory.create("mml",r)],!0]}return e.prototype.checkItem.call(this,t)},t}(f.BaseItem);t.StartItem=d;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"stop"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(f.BaseItem);t.StopItem=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"open"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isKind("close")){var r=this.toMml(),n=this.create("node","TeXAtom",[r]);return[[this.factory.create("mml",n)],!0]}return e.prototype.checkItem.call(this,t)},t.errors=Object.assign(Object.create(f.BaseItem.errors),{stop:["ExtraOpenMissingClose","Extra open brace or missing close brace"]}),t}(f.BaseItem);t.OpenItem=y;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"close"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(f.BaseItem);t.CloseItem=x;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"prime"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(e){var t=a(this.Peek(2),2),r=t[0],n=t[1];return!p.default.isType(r,"msubsup")||p.default.isType(r,"msup")?[[this.create("node","msup",[r,n]),e],!0]:(p.default.setChild(r,r.sup,n),[[r,e],!0])},t}(f.BaseItem);t.PrimeItem=v;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"subsup"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isKind("open")||t.isKind("left"))return f.BaseItem.success;var r=this.First,n=this.getProperty("position");if(t.isKind("mml")){if(this.getProperty("primes"))if(2!==n)p.default.setChild(r,2,this.getProperty("primes"));else{p.default.setProperty(this.getProperty("primes"),"variantForm",!0);var i=this.create("node","mrow",[this.getProperty("primes"),t.First]);t.First=i}return p.default.setChild(r,n,t.First),null!=this.getProperty("movesupsub")&&p.default.setProperty(r,"movesupsub",this.getProperty("movesupsub")),[[this.factory.create("mml",r)],!0]}if(e.prototype.checkItem.call(this,t)[1]){var a=this.getErrors(["","sub","sup"][n]);throw new(h.default.bind.apply(h.default,o([void 0,a[0],a[1]],a.splice(2))))}return null},t.errors=Object.assign(Object.create(f.BaseItem.errors),{stop:["MissingScript","Missing superscript or subscript argument"],sup:["MissingOpenForSup","Missing open brace for superscript"],sub:["MissingOpenForSub","Missing open brace for subscript"]}),t}(f.BaseItem);t.SubsupItem=g;var M=function(e){function t(t){var r=e.call(this,t)||this;return r.setProperty("name","\\over"),r}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"over"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isKind("over"))throw new h.default("AmbiguousUseOf","Ambiguous use of %1",t.getName());if(t.isClose){var r=this.create("node","mfrac",[this.getProperty("num"),this.toMml(!1)]);return null!=this.getProperty("thickness")&&p.default.setAttribute(r,"linethickness",this.getProperty("thickness")),(this.getProperty("open")||this.getProperty("close"))&&(p.default.setProperty(r,"withDelims",!0),r=l.default.fixedFence(this.factory.configuration,this.getProperty("open"),r,this.getProperty("close"))),[[this.factory.create("mml",r),t],!0]}return e.prototype.checkItem.call(this,t)},t.prototype.toString=function(){return"over["+this.getProperty("num")+" / "+this.nodes.join("; ")+"]"},t}(f.BaseItem);t.OverItem=M;var w=function(e){function t(t){var r=e.call(this,t)||this;return r.setProperty("delim","("),r}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"left"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){return t.isKind("right")?[[this.factory.create("mml",l.default.fenced(this.factory.configuration,this.getProperty("delim"),this.toMml(),t.getProperty("delim")))],!0]:e.prototype.checkItem.call(this,t)},t.errors=Object.assign(Object.create(f.BaseItem.errors),{stop:["ExtraLeftMissingRight","Extra \\left or missing \\right"]}),t}(f.BaseItem);t.LeftItem=w;var b=function(e){function t(t){var r=e.call(this,t)||this;return r.setProperty("delim",")"),r}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"right"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(f.BaseItem);t.RightItem=b;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"begin"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isKind("end")){if(t.getName()!==this.getName())throw new h.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),t.getName());return this.getProperty("end")?f.BaseItem.fail:[[this.factory.create("mml",this.toMml())],!0]}if(t.isKind("stop"))throw new h.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return e.prototype.checkItem.call(this,t)},t}(f.BaseItem);t.BeginItem=S;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"end"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(f.BaseItem);t.EndItem=O;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"style"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(!t.isClose)return e.prototype.checkItem.call(this,t);var r=this.create("node","mstyle",this.nodes,this.getProperty("styles"));return[[this.factory.create("mml",r),t],!0]},t}(f.BaseItem);t.StyleItem=C;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"position"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isClose)throw new h.default("MissingBoxFor","Missing box for %1",this.getName());if(t.isFinal){var r=t.toMml();switch(this.getProperty("move")){case"vertical":return r=this.create("node","mpadded",[r],{height:this.getProperty("dh"),depth:this.getProperty("dd"),voffset:this.getProperty("dh")}),[[this.factory.create("mml",r)],!0];case"horizontal":return[[this.factory.create("mml",this.getProperty("left")),t,this.factory.create("mml",this.getProperty("right"))],!0]}}return e.prototype.checkItem.call(this,t)},t}(f.BaseItem);t.PositionItem=E;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"cell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(f.BaseItem);t.CellItem=k;var L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"isFinal",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kind",{get:function(){return"mml"},enumerable:!1,configurable:!0}),t}(f.BaseItem);t.MmlItem=L;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"fn"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){var r=this.First;if(r){if(t.isOpen)return f.BaseItem.success;if(!t.isKind("fn")){var n=t.First;if(!t.isKind("mml")||!n)return[[r,t],!0];if(p.default.isType(n,"mstyle")&&n.childNodes.length&&p.default.isType(n.childNodes[0].childNodes[0],"mspace")||p.default.isType(n,"mspace"))return[[r,t],!0];p.default.isEmbellished(n)&&(n=p.default.getCoreMO(n));var i=p.default.getForm(n);if(null!=i&&[0,0,1,1,0,1,1,0,0,0][i[2]])return[[r,t],!0]}var a=this.create("token","mo",{texClass:c.TEXCLASS.NONE},u.entities.ApplyFunction);return[[r,a,t],!0]}return e.prototype.checkItem.apply(this,arguments)},t}(f.BaseItem);t.FnItem=P;var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.remap=s.MapHandler.getMap("not_remap"),t}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"not"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(e){var t,r,n;if(e.isKind("open")||e.isKind("left"))return f.BaseItem.success;if(e.isKind("mml")&&(p.default.isType(e.First,"mo")||p.default.isType(e.First,"mi")||p.default.isType(e.First,"mtext"))&&(t=e.First,1===(r=p.default.getText(t)).length&&!p.default.getProperty(t,"movesupsub")&&1===p.default.getChildren(t).length))return this.remap.contains(r)?(n=this.create("text",this.remap.lookup(r).char),p.default.setChild(t,0,n)):(n=this.create("text","\u0338"),p.default.appendChildren(t,[n])),[[e],!0];n=this.create("text","\u29f8");var i=this.create("node","mtext",[],{},n),a=this.create("node","mpadded",[i],{width:0});return[[t=this.create("node","TeXAtom",[a],{texClass:c.TEXCLASS.REL}),e],!0]},t}(f.BaseItem);t.NotItem=R;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"dots"},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(e){if(e.isKind("open")||e.isKind("left"))return f.BaseItem.success;var t=this.getProperty("ldots"),r=e.First;if(e.isKind("mml")&&p.default.isEmbellished(r)){var n=p.default.getTexClass(p.default.getCoreMO(r));n!==c.TEXCLASS.BIN&&n!==c.TEXCLASS.REL||(t=this.getProperty("cdots"))}return[[t,e],!0]},t}(f.BaseItem);t.DotsItem=A;var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.table=[],t.row=[],t.frame=[],t.hfill=[],t.arraydef={},t.dashed=!1,t}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"array"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyEnv",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isClose&&!t.isKind("over")){if(t.getProperty("isEntry"))return this.EndEntry(),this.clearEnv(),f.BaseItem.fail;if(t.getProperty("isCR"))return this.EndEntry(),this.EndRow(),this.clearEnv(),f.BaseItem.fail;this.EndTable(),this.clearEnv();var r=this.arraydef.scriptlevel;delete this.arraydef.scriptlevel;var n=this.create("node","mtable",this.table,this.arraydef);4===this.frame.length?p.default.setAttribute(n,"frame",this.dashed?"dashed":"solid"):this.frame.length&&(this.arraydef.rowlines&&(this.arraydef.rowlines=this.arraydef.rowlines.replace(/none( none)+$/,"none")),n=this.create("node","menclose",[n],{notation:this.frame.join(" "),isFrame:!0}),"none"===(this.arraydef.columnlines||"none")&&"none"===(this.arraydef.rowlines||"none")||p.default.setAttribute(n,"padding",0)),r&&(n=this.create("node","mstyle",[n],{scriptlevel:r})),(this.getProperty("open")||this.getProperty("close"))&&(n=l.default.fenced(this.factory.configuration,this.getProperty("open"),n,this.getProperty("close")));var i=this.factory.create("mml",n);if(this.getProperty("requireClose")){if(t.isKind("close"))return[[i],!0];throw new h.default("MissingCloseBrace","Missing close brace")}return[[i,t],!0]}return e.prototype.checkItem.call(this,t)},t.prototype.EndEntry=function(){var e=this.create("node","mtd",this.nodes);this.hfill.length&&(0===this.hfill[0]&&p.default.setAttribute(e,"columnalign","right"),this.hfill[this.hfill.length-1]===this.Size()&&p.default.setAttribute(e,"columnalign",p.default.getAttribute(e,"columnalign")?"center":"left")),this.row.push(e),this.Clear(),this.hfill=[]},t.prototype.EndRow=function(){var e;this.getProperty("isNumbered")&&3===this.row.length?(this.row.unshift(this.row.pop()),e=this.create("node","mlabeledtr",this.row)):e=this.create("node","mtr",this.row),this.table.push(e),this.row=[]},t.prototype.EndTable=function(){(this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.checkLines()},t.prototype.checkLines=function(){if(this.arraydef.rowlines){var e=this.arraydef.rowlines.split(/ /);e.length===this.table.length?(this.frame.push("bottom"),e.pop(),this.arraydef.rowlines=e.join(" ")):e.length<this.table.length-1&&(this.arraydef.rowlines+=" none")}if(this.getProperty("rowspacing")){for(var t=this.arraydef.rowspacing.split(/ /);t.length<this.table.length;)t.push(this.getProperty("rowspacing")+"em");this.arraydef.rowspacing=t.join(" ")}},t}(f.BaseItem);t.ArrayItem=T;var J=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.call(this,t)||this;return i.factory.configuration.tags.start(r[0],r[2],r[1]),i}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"eqnarray"},enumerable:!1,configurable:!0}),t.prototype.EndEntry=function(){this.row.length&&l.default.fixInitialMO(this.factory.configuration,this.nodes);var e=this.create("node","mtd",this.nodes);this.row.push(e),this.Clear()},t.prototype.EndRow=function(){var e="mtr",t=this.factory.configuration.tags.getTag();t&&(this.row=[t].concat(this.row),e="mlabeledtr"),this.factory.configuration.tags.clearTag();var r=this.create("node",e,this.row);this.table.push(r),this.row=[]},t.prototype.EndTable=function(){e.prototype.EndTable.call(this),this.factory.configuration.tags.end()},t}(T);t.EqnArrayItem=J;var B=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.call(this,t)||this;return i.factory.configuration.tags.start("equation",!0,r[0]),i}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return"equation"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.checkItem=function(t){if(t.isKind("end")){var r=this.toMml(),n=this.factory.configuration.tags.getTag();return this.factory.configuration.tags.end(),[[n?this.factory.configuration.tags.enTag(r,n):r,t],!0]}if(t.isKind("stop"))throw new h.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return e.prototype.checkItem.call(this,t)},t}(f.BaseItem);t.EquationItem=B},914:function(e,t,r){var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var i=r(201),a=r(972),o=r(420),s=r(32),u=r(27),c=r(38),h=r(45),l=r(723),p=r(51);r(663),r(893),r(54);var f={},d={fontfamily:1,fontsize:1,fontweight:1,fontstyle:1,color:1,background:1,id:1,class:1,href:1,style:1};function m(e,t){var r=e.stack.env,n=r.inRoot;r.inRoot=!0;var i=new s.default(t,r,e.configuration),a=i.mml(),o=i.stack.global;if(o.leftRoot||o.upRoot){var u={};o.leftRoot&&(u.width=o.leftRoot),o.upRoot&&(u.voffset=o.upRoot,u.height=o.upRoot),a=e.create("node","mpadded",[a],u)}return r.inRoot=n,a}f.Open=function(e,t){e.Push(e.itemFactory.create("open"))},f.Close=function(e,t){e.Push(e.itemFactory.create("close"))},f.Tilde=function(e,t){e.Push(e.create("token","mtext",{},p.entities.nbsp))},f.Space=function(e,t){},f.Superscript=function(e,t){var r,i,s;e.GetNext().match(/\d/)&&(e.string=e.string.substr(0,e.i+1)+" "+e.string.substr(e.i+1));var u=e.stack.Top();u.isKind("prime")?(s=(r=n(u.Peek(2),2))[0],i=r[1],e.stack.Pop()):(s=e.stack.Prev())||(s=e.create("token","mi",{},""));var c=a.default.getProperty(s,"movesupsub"),h=a.default.isType(s,"msubsup")?s.sup:s.over;if(a.default.isType(s,"msubsup")&&!a.default.isType(s,"msup")&&a.default.getChildAt(s,s.sup)||a.default.isType(s,"munderover")&&!a.default.isType(s,"mover")&&a.default.getChildAt(s,s.over)&&!a.default.getProperty(s,"subsupOK"))throw new o.default("DoubleExponent","Double exponent: use braces to clarify");a.default.isType(s,"msubsup")&&!a.default.isType(s,"msup")||(c?((!a.default.isType(s,"munderover")||a.default.isType(s,"mover")||a.default.getChildAt(s,s.over))&&(s=e.create("node","munderover",[s],{movesupsub:!0})),h=s.over):h=(s=e.create("node","msubsup",[s])).sup),e.Push(e.itemFactory.create("subsup",s).setProperties({position:h,primes:i,movesupsub:c}))},f.Subscript=function(e,t){var r,i,s;e.GetNext().match(/\d/)&&(e.string=e.string.substr(0,e.i+1)+" "+e.string.substr(e.i+1));var u=e.stack.Top();u.isKind("prime")?(s=(r=n(u.Peek(2),2))[0],i=r[1],e.stack.Pop()):(s=e.stack.Prev())||(s=e.create("token","mi",{},""));var c=a.default.getProperty(s,"movesupsub"),h=a.default.isType(s,"msubsup")?s.sub:s.under;if(a.default.isType(s,"msubsup")&&!a.default.isType(s,"msup")&&a.default.getChildAt(s,s.sub)||a.default.isType(s,"munderover")&&!a.default.isType(s,"mover")&&a.default.getChildAt(s,s.under)&&!a.default.getProperty(s,"subsupOK"))throw new o.default("DoubleSubscripts","Double subscripts: use braces to clarify");a.default.isType(s,"msubsup")&&!a.default.isType(s,"msup")||(c?((!a.default.isType(s,"munderover")||a.default.isType(s,"mover")||a.default.getChildAt(s,s.under))&&(s=e.create("node","munderover",[s],{movesupsub:!0})),h=s.under):h=(s=e.create("node","msubsup",[s])).sub),e.Push(e.itemFactory.create("subsup",s).setProperties({position:h,primes:i,movesupsub:c}))},f.Prime=function(e,t){var r=e.stack.Prev();if(r||(r=e.create("node","mi")),a.default.isType(r,"msubsup")&&!a.default.isType(r,"msup")&&a.default.getChildAt(r,r.sup))throw new o.default("DoubleExponentPrime","Prime causes double exponent: use braces to clarify");var n="";e.i--;do{n+=p.entities.prime,e.i++,t=e.GetNext()}while("'"===t||t===p.entities.rquote);n=["","\u2032","\u2033","\u2034","\u2057"][n.length]||n;var i=e.create("token","mo",{},n);e.Push(e.itemFactory.create("prime",r,i))},f.Comment=function(e,t){for(;e.i<e.string.length&&"\n"!==e.string.charAt(e.i);)e.i++},f.Hash=function(e,t){throw new o.default("CantUseHash1","You can't use 'macro parameter character #' in math mode")},f.SetFont=function(e,t,r){e.stack.env.font=r},f.SetStyle=function(e,t,r,n,i){e.stack.env.style=r,e.stack.env.level=i,e.Push(e.itemFactory.create("style").setProperty("styles",{displaystyle:n,scriptlevel:i}))},f.SetSize=function(e,t,r){e.stack.env.size=r,e.Push(e.itemFactory.create("style").setProperty("styles",{mathsize:r+"em"}))},f.Spacer=function(e,t,r){var n=e.create("node","mspace",[],{width:r}),i=e.create("node","mstyle",[n],{scriptlevel:0});e.Push(i)},f.LeftRight=function(e,t){var r=t.substr(1);e.Push(e.itemFactory.create(r).setProperty("delim",e.GetDelimiter(t)))},f.Middle=function(e,t){var r=e.GetDelimiter(t),n=e.create("node","TeXAtom",[],{texClass:h.TEXCLASS.CLOSE});if(e.Push(n),!e.stack.Top().isKind("left"))throw new o.default("MisplacedMiddle","%1 must be within \\left and \\right",e.currentCS);n=e.create("token","mo",{stretchy:!0},r),e.Push(n),n=e.create("node","TeXAtom",[],{texClass:h.TEXCLASS.OPEN}),e.Push(n)},f.NamedFn=function(e,t,r){r||(r=t.substr(1));var n=e.create("token","mi",{texClass:h.TEXCLASS.OP},r);e.Push(e.itemFactory.create("fn",n))},f.NamedOp=function(e,t,r){r||(r=t.substr(1)),r=r.replace(/&thinsp;/,"\u2006");var n=e.create("token","mo",{movablelimits:!0,movesupsub:!0,form:u.TexConstant.Form.PREFIX,texClass:h.TEXCLASS.OP},r);e.Push(n)},f.Limits=function(e,t,r){var n=e.stack.Prev(!0);if(!n||a.default.getTexClass(a.default.getCoreMO(n))!==h.TEXCLASS.OP&&null==a.default.getProperty(n,"movesupsub"))throw new o.default("MisplacedLimits","%1 is allowed only on operators",e.currentCS);var i,s=e.stack.Top();a.default.isType(n,"munderover")&&!r?(i=e.create("node","msubsup"),a.default.copyChildren(n,i),n=s.Last=i):a.default.isType(n,"msubsup")&&r&&(i=e.create("node","munderover"),a.default.copyChildren(n,i),n=s.Last=i),a.default.setProperty(n,"movesupsub",!!r),a.default.setProperties(a.default.getCoreMO(n),{movablelimits:!1}),(a.default.getAttribute(n,"movablelimits")||a.default.getProperty(n,"movablelimits"))&&a.default.setProperties(n,{movablelimits:!1})},f.Over=function(e,t,r,n){var i=e.itemFactory.create("over").setProperty("name",e.currentCS);r||n?(i.setProperty("open",r),i.setProperty("close",n)):t.match(/withdelims$/)&&(i.setProperty("open",e.GetDelimiter(t)),i.setProperty("close",e.GetDelimiter(t))),t.match(/^\\above/)?i.setProperty("thickness",e.GetDimen(t)):(t.match(/^\\atop/)||r||n)&&i.setProperty("thickness",0),e.Push(i)},f.Frac=function(e,t){var r=e.ParseArg(t),n=e.ParseArg(t),i=e.create("node","mfrac",[r,n]);e.Push(i)},f.Sqrt=function(e,t){var r=e.GetBrackets(t),n=e.GetArgument(t);"\\frac"===n&&(n+="{"+e.GetArgument(n)+"}{"+e.GetArgument(n)+"}");var i=new s.default(n,e.stack.env,e.configuration).mml();i=r?e.create("node","mroot",[i,m(e,r)]):e.create("node","msqrt",[i]),e.Push(i)},f.Root=function(e,t){var r=e.GetUpTo(t,"\\of"),n=e.ParseArg(t),i=e.create("node","mroot",[n,m(e,r)]);e.Push(i)},f.MoveRoot=function(e,t,r){if(!e.stack.env.inRoot)throw new o.default("MisplacedMoveRoot","%1 can appear only within a root",e.currentCS);if(e.stack.global[r])throw new o.default("MultipleMoveRoot","Multiple use of %1",e.currentCS);var n=e.GetArgument(t);if(!n.match(/-?[0-9]+/))throw new o.default("IntegerArg","The argument to %1 must be an integer",e.currentCS);"-"!==(n=parseInt(n,10)/15+"em").substr(0,1)&&(n="+"+n),e.stack.global[r]=n},f.Accent=function(e,t,r,n){var i=e.ParseArg(t),o=c.default.getFontDef(e);o.accent=!0;var s=a.default.createEntity(r),u=e.create("token","mo",o,s);a.default.setAttribute(u,"stretchy",!!n);var h=a.default.isEmbellished(i)?a.default.getCoreMO(i):i;a.default.isType(h,"mo")&&a.default.setProperties(h,{movablelimits:!1});var l=e.create("node","munderover");a.default.setChild(l,0,i),a.default.setChild(l,1,null),a.default.setChild(l,2,u);var p=e.create("node","TeXAtom",[l]);e.Push(p)},f.UnderOver=function(e,t,r,n,i){var o,s=e.ParseArg(t),u=a.default.getForm(s);(u&&u[3]&&u[3].movablelimits||a.default.getProperty(s,"movablelimits"))&&a.default.setProperties(s,{movablelimits:!1}),a.default.isType(s,"munderover")&&a.default.isEmbellished(s)&&(a.default.setProperties(a.default.getCoreMO(s),{lspace:0,rspace:0}),o=e.create("node","mo",[],{rspace:0}),s=e.create("node","mrow",[o,s]));var c=e.create("node","munderover",[s]),l=a.default.createEntity(r);o=e.create("token","mo",{stretchy:!0,accent:!i},l),a.default.setChild(c,"o"===t.charAt(1)?c.over:c.under,o);var p=c;n&&(p=e.create("node","TeXAtom",[c],{texClass:h.TEXCLASS.OP,movesupsub:!0})),a.default.setProperty(p,"subsupOK",!0),e.Push(p)},f.Overset=function(e,t){var r=e.ParseArg(t),n=e.ParseArg(t);(a.default.getAttribute(n,"movablelimits")||a.default.getProperty(n,"movablelimits"))&&a.default.setProperties(n,{movablelimits:!1});var i=e.create("node","mover",[n,r]);e.Push(i)},f.Underset=function(e,t){var r=e.ParseArg(t),n=e.ParseArg(t);(a.default.isType(n,"mo")||a.default.getProperty(n,"movablelimits"))&&a.default.setProperties(n,{movablelimits:!1});var i=e.create("node","munder",[n,r]);e.Push(i)},f.TeXAtom=function(e,t,r){var n,i,a,o={texClass:r};if(r===h.TEXCLASS.OP){o.movesupsub=o.movablelimits=!0;var c=e.GetArgument(t),l=c.match(/^\s*\\rm\s+([a-zA-Z0-9 ]+)$/);l?(o.mathvariant=u.TexConstant.Variant.NORMAL,i=e.create("token","mi",o,l[1])):(a=new s.default(c,e.stack.env,e.configuration).mml(),i=e.create("node","TeXAtom",[a],o)),n=e.itemFactory.create("fn",i)}else a=e.ParseArg(t),n=e.create("node","TeXAtom",[a],o);e.Push(n)},f.MmlToken=function(e,t){var r,n=e.GetArgument(t),i=e.GetBrackets(t,"").replace(/^\s+/,""),s=e.GetArgument(t),u={};try{r=e.create("node",n)}catch(e){r=null}if(!r||!r.isToken)throw new o.default("NotMathMLToken","%1 is not a token element",n);for(;""!==i;){var h=i.match(/^([a-z]+)\s*=\s*('[^']*'|"[^"]*"|[^ ,]*)\s*,?\s*/i);if(!h)throw new o.default("InvalidMathMLAttr","Invalid MathML attribute: %1",i);if(!r.attributes.hasDefault(h[1])&&!d[h[1]])throw new o.default("UnknownAttrForElement","%1 is not a recognized attribute for %2",h[1],n);var l=c.default.MmlFilterAttribute(e,h[1],h[2].replace(/^(['"])(.*)\1$/,"$2"));l&&("true"===l.toLowerCase()?l=!0:"false"===l.toLowerCase()&&(l=!1),u[h[1]]=l),i=i.substr(h[0].length)}var p=e.create("text",s);r.appendChild(p),a.default.setProperties(r,u),e.Push(r)},f.Strut=function(e,t){var r=e.create("node","mrow"),n=e.create("node","mpadded",[r],{height:"8.6pt",depth:"3pt",width:0});e.Push(n)},f.Phantom=function(e,t,r,n){var i=e.create("node","mphantom",[e.ParseArg(t)]);(r||n)&&(i=e.create("node","mpadded",[i]),n&&(a.default.setAttribute(i,"height",0),a.default.setAttribute(i,"depth",0)),r&&a.default.setAttribute(i,"width",0));var o=e.create("node","TeXAtom",[i]);e.Push(o)},f.Smash=function(e,t){var r=c.default.trimSpaces(e.GetBrackets(t,"")),n=e.create("node","mpadded",[e.ParseArg(t)]);switch(r){case"b":a.default.setAttribute(n,"depth",0);break;case"t":a.default.setAttribute(n,"height",0);break;default:a.default.setAttribute(n,"height",0),a.default.setAttribute(n,"depth",0)}var i=e.create("node","TeXAtom",[n]);e.Push(i)},f.Lap=function(e,t){var r=e.create("node","mpadded",[e.ParseArg(t)],{width:0});"\\llap"===t&&a.default.setAttribute(r,"lspace","-1width");var n=e.create("node","TeXAtom",[r]);e.Push(n)},f.RaiseLower=function(e,t){var r=e.GetDimen(t),n=e.itemFactory.create("position").setProperties({name:e.currentCS,move:"vertical"});"-"===r.charAt(0)&&(r=r.slice(1),t="raise"===t.substr(1)?"\\lower":"\\raise"),"\\lower"===t?(n.setProperty("dh","-"+r),n.setProperty("dd","+"+r)):(n.setProperty("dh","+"+r),n.setProperty("dd","-"+r)),e.Push(n)},f.MoveLeftRight=function(e,t){var r=e.GetDimen(t),n="-"===r.charAt(0)?r.slice(1):"-"+r;if("\\moveleft"===t){var i=r;r=n,n=i}e.Push(e.itemFactory.create("position").setProperties({name:e.currentCS,move:"horizontal",left:e.create("node","mspace",[],{width:r}),right:e.create("node","mspace",[],{width:n})}))},f.Hskip=function(e,t){var r=e.create("node","mspace",[],{width:e.GetDimen(t)});e.Push(r)},f.Rule=function(e,t,r){var n={width:e.GetDimen(t),height:e.GetDimen(t),depth:e.GetDimen(t)};"blank"!==r&&(n.mathbackground=e.stack.env.color||"black");var i=e.create("node","mspace",[],n);e.Push(i)},f.rule=function(e,t){var r=e.GetBrackets(t),n=e.GetDimen(t),i=e.GetDimen(t),o=e.create("node","mspace",[],{width:n,height:i,mathbackground:e.stack.env.color||"black"});r&&(o=e.create("node","mpadded",[o],{voffset:r}),r.match(/^\-/)?(a.default.setAttribute(o,"height",r),a.default.setAttribute(o,"depth","+"+r.substr(1))):a.default.setAttribute(o,"height","+"+r)),e.Push(o)},f.MakeBig=function(e,t,r,n){var i=String(n*=1.411764705882353).replace(/(\.\d\d\d).+/,"$1")+"em",a=e.GetDelimiter(t,!0),o=e.create("token","mo",{minsize:i,maxsize:i,fence:!0,stretchy:!0,symmetric:!0},a),s=e.create("node","TeXAtom",[o],{texClass:r});e.Push(s)},f.BuildRel=function(e,t){var r=e.ParseUpTo(t,"\\over"),n=e.ParseArg(t),i=e.create("node","munderover");a.default.setChild(i,0,n),a.default.setChild(i,1,null),a.default.setChild(i,2,r);var o=e.create("node","TeXAtom",[i],{texClass:h.TEXCLASS.REL});e.Push(o)},f.HBox=function(e,t,r,n){e.PushAll(c.default.internalMath(e,e.GetArgument(t),r,n))},f.FBox=function(e,t){var r=c.default.internalMath(e,e.GetArgument(t)),n=e.create("node","menclose",r,{notation:"box"});e.Push(n)},f.Not=function(e,t){e.Push(e.itemFactory.create("not"))},f.Dots=function(e,t){var r=a.default.createEntity("2026"),n=a.default.createEntity("22EF"),i=e.create("token","mo",{stretchy:!1},r),o=e.create("token","mo",{stretchy:!1},n);e.Push(e.itemFactory.create("dots").setProperties({ldots:i,cdots:o}))},f.Matrix=function(e,t,r,n,i,a,s,u,c,h){var l=e.GetNext();if(""===l)throw new o.default("MissingArgFor","Missing argument for %1",e.currentCS);"{"===l?e.i++:(e.string=l+"}"+e.string.slice(e.i+1),e.i=0);var p=e.itemFactory.create("array").setProperty("requireClose",!0);p.arraydef={rowspacing:s||"4pt",columnspacing:a||"1em"},c&&p.setProperty("isCases",!0),h&&(p.setProperty("isNumbered",!0),p.arraydef.side=h),(r||n)&&(p.setProperty("open",r),p.setProperty("close",n)),"D"===u&&(p.arraydef.displaystyle=!0),null!=i&&(p.arraydef.columnalign=i),e.Push(p)},f.Entry=function(e,t){if(e.Push(e.itemFactory.create("cell").setProperties({isEntry:!0,name:t})),e.stack.Top().getProperty("isCases")){for(var r=e.string,n=0,i=-1,a=e.i,s=r.length;a<s;){var u=r.charAt(a);if("{"===u)n++,a++;else if("}"===u)0===n?s=0:(0===--n&&i<0&&(i=a-e.i),a++);else{if("&"===u&&0===n)throw new o.default("ExtraAlignTab","Extra alignment tab in \\cases text");"\\"===u?r.substr(a).match(/^((\\cr)[^a-zA-Z]|\\\\)/)?s=0:a+=2:a++}}var h=r.substr(e.i,a-e.i);if(!h.match(/^\s*\\text[^a-zA-Z]/)||i!==h.replace(/\s+$/,"").length-1){var l=c.default.internalMath(e,h,0);e.PushAll(l),e.i=a}}},f.Cr=function(e,t){e.Push(e.itemFactory.create("cell").setProperties({isCR:!0,name:t}))},f.CrLaTeX=function(e,t,r){var a;if(void 0===r&&(r=!1),!r&&"["===e.string.charAt(e.i)){var s=e.GetBrackets(t,""),h=n(c.default.matchDimen(s),2),l=h[0],p=h[1];if(s&&!l)throw new o.default("BracketMustBeDimension","Bracket argument to %1 must be a dimension",e.currentCS);a=l+p}e.Push(e.itemFactory.create("cell").setProperties({isCR:!0,name:t,linebreak:!0}));var f,d=e.stack.Top();if(d instanceof i.ArrayItem){if(a&&d.arraydef.rowspacing){var m=d.arraydef.rowspacing.split(/ /);if(!d.getProperty("rowspacing")){var y=c.default.dimen2em(m[0]);d.setProperty("rowspacing",y)}for(var x=d.getProperty("rowspacing");m.length<d.table.length;)m.push(c.default.Em(x));m[d.table.length-1]=c.default.Em(Math.max(0,x+c.default.dimen2em(a))),d.arraydef.rowspacing=m.join(" ")}}else a&&(f=e.create("node","mspace",[],{depth:a}),e.Push(f)),f=e.create("node","mspace",[],{linebreak:u.TexConstant.LineBreak.NEWLINE}),e.Push(f)},f.HLine=function(e,t,r){null==r&&(r="solid");var n=e.stack.Top();if(!(n instanceof i.ArrayItem)||n.Size())throw new o.default("Misplaced","Misplaced %1",e.currentCS);if(n.table.length){for(var a=n.arraydef.rowlines?n.arraydef.rowlines.split(/ /):[];a.length<n.table.length;)a.push("none");a[n.table.length-1]=r,n.arraydef.rowlines=a.join(" ")}else n.frame.push("top")},f.HFill=function(e,t){var r=e.stack.Top();if(!(r instanceof i.ArrayItem))throw new o.default("UnsupportedHFill","Unsupported use of %1",e.currentCS);r.hfill.push(r.Size())},f.BeginEnd=function(e,t){var r=e.GetArgument(t);if(r.match(/\\/i))throw new o.default("InvalidEnv","Invalid environment name '%1'",r);var n=e.configuration.handlers.get("environment").lookup(r);if(n&&"\\end"===t){if(!n.args[0]){var i=e.itemFactory.create("end").setProperty("name",r);return void e.Push(i)}e.stack.env.closing=r}if(++e.macroCount>e.configuration.options.maxMacros)throw new o.default("MaxMacroSub2","MathJax maximum substitution count exceeded; is there a recursive latex environment?");e.parse("environment",[e,r])},f.Array=function(e,t,r,n,i,a,o,s,u){i||(i=e.GetArgument("\\begin{"+t.getName()+"}"));var c=("c"+i).replace(/[^clr|:]/g,"").replace(/[^|:]([|:])+/g,"$1");i=(i=i.replace(/[^clr]/g,"").split("").join(" ")).replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var h=e.itemFactory.create("array");return h.arraydef={columnalign:i,columnspacing:a||"1em",rowspacing:o||"4pt"},c.match(/[|:]/)&&(c.charAt(0).match(/[|:]/)&&(h.frame.push("left"),h.dashed=":"===c.charAt(0)),c.charAt(c.length-1).match(/[|:]/)&&h.frame.push("right"),c=c.substr(1,c.length-2),h.arraydef.columnlines=c.split("").join(" ").replace(/[^|: ]/g,"none").replace(/\|/g,"solid").replace(/:/g,"dashed")),r&&h.setProperty("open",e.convertDelimiter(r)),n&&h.setProperty("close",e.convertDelimiter(n)),"D"===s?h.arraydef.displaystyle=!0:s&&(h.arraydef.displaystyle=!1),"S"===s&&(h.arraydef.scriptlevel=1),u&&(h.arraydef.useHeight=!1),e.Push(t),h},f.AlignedArray=function(e,t){var r=e.GetBrackets("\\begin{"+t.getName()+"}"),n=f.Array(e,t);return c.default.setArrayAlign(n,r)},f.Equation=function(e,t,r){return e.Push(t),c.default.checkEqnEnv(e),e.itemFactory.create("equation",r).setProperty("name",t.getName())},f.EqnArray=function(e,t,r,n,i,a){e.Push(t),n&&c.default.checkEqnEnv(e),i=(i=i.replace(/[^clr]/g,"").split("").join(" ")).replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var o=e.itemFactory.create("eqnarray",t.getName(),r,n,e.stack.global);return o.arraydef={displaystyle:!0,columnalign:i,columnspacing:a||"1em",rowspacing:"3pt",side:e.options.tagSide,minlabelspacing:e.options.tagIndent},o},f.HandleNoTag=function(e,t){e.tags.notag()},f.HandleLabel=function(e,t){var r=e.GetArgument(t);if(""!==r&&!e.tags.refUpdate){if(e.tags.label)throw new o.default("MultipleCommand","Multiple %1",e.currentCS);if(e.tags.label=r,(e.tags.allLabels[r]||e.tags.labels[r])&&!e.options.ignoreDuplicateLabels)throw new o.default("MultipleLabel","Label '%1' multiply defined",r);e.tags.labels[r]=new l.Label}},f.HandleRef=function(e,t,r){var n=e.GetArgument(t),i=e.tags.allLabels[n]||e.tags.labels[n];i||(e.tags.refUpdate||(e.tags.redo=!0),i=new l.Label);var a=i.tag;r&&(a=e.tags.formatTag(a));var o=e.create("node","mrow",c.default.internalMath(e,a),{href:e.tags.formatUrl(i.id,e.options.baseURL),class:"MathJax_ref"});e.Push(o)},f.Macro=function(e,t,r,n,i){if(n){var a=[];if(null!=i){var s=e.GetBrackets(t);a.push(null==s?i:s)}for(var u=a.length;u<n;u++)a.push(e.GetArgument(t));r=c.default.substituteArgs(e,a,r)}if(e.string=c.default.addArgs(e,r,e.string.slice(e.i)),e.i=0,++e.macroCount>e.configuration.options.maxMacros)throw new o.default("MaxMacroSub1","MathJax maximum macro substitution count exceeded; is there a recursive macro call?")},f.MathChoice=function(e,t){var r=e.ParseArg(t),n=e.ParseArg(t),i=e.ParseArg(t),a=e.ParseArg(t);e.Push(e.create("node","MathChoice",[r,n,i,a]))},t.default=f},971:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mathjax=void 0;var n=r(514),i=r(956);t.mathjax={version:"3.1.2",handlers:new n.HandlerList,document:function(e,r){return t.mathjax.handlers.document(e,r)},handleRetriesFor:i.handleRetriesFor,retryAfter:i.retryAfter,asyncLoad:null}},177:function(e,t,r){var n,i,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.CHTMLWrapper=t.SPACE=t.FONTSIZE=void 0;var u=r(780),c=r(80),h=r(795);t.FONTSIZE={"70.7%":"s","70%":"s","50%":"ss","60%":"Tn","85%":"sm","120%":"lg","144%":"Lg","173%":"LG","207%":"hg","249%":"HG"},t.SPACE=((i={})[u.em(2/18)]="1",i[u.em(3/18)]="2",i[u.em(4/18)]="3",i[u.em(5/18)]="4",i[u.em(6/18)]="5",i);var l=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.chtml=null,t}return a(r,e),r.prototype.toCHTML=function(e){var t,r,n=this.standardCHTMLnode(e);try{for(var i=o(this.childNodes),a=i.next();!a.done;a=i.next()){a.value.toCHTML(n)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},r.prototype.standardCHTMLnode=function(e){this.markUsed();var t=this.createCHTMLnode(e);return this.handleStyles(),this.handleVariant(),this.handleScale(),this.handleColor(),this.handleSpace(),this.handleAttributes(),this.handlePWidth(),t},r.prototype.markUsed=function(){this.constructor.used=!0},r.prototype.createCHTMLnode=function(e){var t=this.node.attributes.get("href");return t&&(e=this.adaptor.append(e,this.html("a",{href:t}))),this.chtml=this.adaptor.append(e,this.html("mjx-"+this.node.kind)),this.chtml},r.prototype.handleStyles=function(){if(this.styles){var e=this.styles.cssText;if(e){this.adaptor.setAttribute(this.chtml,"style",e);var t=this.styles.get("font-family");t&&this.adaptor.setStyle(this.chtml,"font-family","MJXZERO, "+t)}}},r.prototype.handleVariant=function(){this.node.isToken&&"-explicitFont"!==this.variant&&this.adaptor.setAttribute(this.chtml,"class",(this.font.getVariant(this.variant)||this.font.getVariant("normal")).classes)},r.prototype.handleScale=function(){this.setScale(this.chtml,this.bbox.rscale)},r.prototype.setScale=function(e,r){var n=Math.abs(r-1)<.001?1:r;if(e&&1!==n){var i=this.percent(n);t.FONTSIZE[i]?this.adaptor.setAttribute(e,"size",t.FONTSIZE[i]):this.adaptor.setStyle(e,"fontSize",i)}return e},r.prototype.handleSpace=function(){var e,r;try{for(var n=o([[this.bbox.L,"space","marginLeft"],[this.bbox.R,"rspace","marginRight"]]),i=n.next();!i.done;i=n.next()){var a=i.value,u=s(a,3),c=u[0],h=u[1],l=u[2];if(c){var p=this.em(c);t.SPACE[p]?this.adaptor.setAttribute(this.chtml,h,t.SPACE[p]):this.adaptor.setStyle(this.chtml,l,p)}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},r.prototype.handleColor=function(){var e=this.node.attributes,t=e.getExplicit("mathcolor"),r=e.getExplicit("color"),n=e.getExplicit("mathbackground"),i=e.getExplicit("background");(t||r)&&this.adaptor.setStyle(this.chtml,"color",t||r),(n||i)&&this.adaptor.setStyle(this.chtml,"backgroundColor",n||i)},r.prototype.handleAttributes=function(){var e,t,n,i,a=this.node.attributes,s=a.getAllDefaults(),u=r.skipAttributes;try{for(var c=o(a.getExplicitNames()),h=c.next();!h.done;h=c.next()){var l=h.value;!1!==u[l]&&(l in s||u[l]||this.adaptor.hasAttribute(this.chtml,l))||this.adaptor.setAttribute(this.chtml,l,a.getExplicit(l))}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(a.get("class")){var p=a.get("class").trim().split(/ +/);try{for(var f=o(p),d=f.next();!d.done;d=f.next()){var m=d.value;this.adaptor.addClass(this.chtml,m)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}},r.prototype.handlePWidth=function(){this.bbox.pwidth&&(this.bbox.pwidth===h.BBox.fullWidth?this.adaptor.setAttribute(this.chtml,"width","full"):this.adaptor.setStyle(this.chtml,"width",this.bbox.pwidth))},r.prototype.setIndent=function(e,t,r){var n=this.adaptor;if("center"===t||"left"===t){var i=this.getBBox().L;n.setStyle(e,"margin-left",this.em(r+i))}if("center"===t||"right"===t){var a=this.getBBox().R;n.setStyle(e,"margin-right",this.em(-r+a))}},r.prototype.drawBBox=function(){var e=this.getBBox(),t=e.w,r=e.h,n=e.d,i=e.R,a=this.html("mjx-box",{style:{opacity:.25,"margin-left":this.em(-t-i)}},[this.html("mjx-box",{style:{height:this.em(r),width:this.em(t),"background-color":"red"}}),this.html("mjx-box",{style:{height:this.em(n),width:this.em(t),"margin-left":this.em(-t),"vertical-align":this.em(-n),"background-color":"green"}})]),o=this.chtml||this.parent.chtml,s=this.adaptor.getAttribute(o,"size");s&&this.adaptor.setAttribute(a,"size",s);var u=this.adaptor.getStyle(o,"fontSize");u&&this.adaptor.setStyle(a,"fontSize",u),this.adaptor.append(this.adaptor.parent(o),a),this.adaptor.setStyle(o,"backgroundColor","#FFEE00")},r.prototype.html=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=[]),this.jax.html(e,t,r)},r.prototype.text=function(e){return this.jax.text(e)},r.prototype.char=function(e){return this.font.charSelector(e).substr(1)},r.kind="unknown",r.autoStyle=!0,r.used=!1,r}(c.CommonWrapper);t.CHTMLWrapper=l},549:function(e,t){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.FontData=t.NOSTRETCH=t.H=t.V=void 0,t.V=1,t.H=2,t.NOSTRETCH={dir:0};var o=function(){function e(){var e,t;this.variant={},this.delimiters={},this.cssFontMap={},this.remapChars={};var n=this.constructor;this.params=r({},n.defaultParams),this.sizeVariants=i(n.defaultSizeVariants),this.cssFontMap=r({},n.defaultCssFonts),this.cssFamilyPrefix=n.defaultCssFamilyPrefix,this.createVariants(n.defaultVariants),this.defineDelimiters(n.defaultDelimiters);try{for(var o=a(Object.keys(n.defaultChars)),s=o.next();!s.done;s=o.next()){var u=s.value;this.defineChars(u,n.defaultChars[u])}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.defineRemap("accent",n.defaultAccentMap),this.defineRemap("mo",n.defaultMoMap),this.defineRemap("mn",n.defaultMnMap)}return e.charOptions=function(e,t){var r=e[t];return 3===r.length&&(r[3]={}),r[3]},e.prototype.createVariant=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n={linked:[],chars:t?Object.create(this.variant[t].chars):{}};r&&this.variant[r]&&(Object.assign(n.chars,this.variant[r].chars),this.variant[r].linked.push(n.chars),n.chars=Object.create(n.chars)),this.remapSmpChars(n.chars,e),this.variant[e]=n},e.prototype.remapSmpChars=function(e,t){var r,i,o,s,u=this.constructor;if(u.VariantSmp[t]){var c=u.SmpRemap,h=[null,null,u.SmpRemapGreekU,u.SmpRemapGreekL];try{for(var l=a(u.SmpRanges),p=l.next();!p.done;p=l.next()){var f=n(p.value,3),d=f[0],m=f[1],y=f[2],x=u.VariantSmp[t][d];if(x){for(var v=m;v<=y;v++)if(930!==v){var g=x+v-m;e[v]=this.smpChar(c[g]||g)}if(h[d])try{for(var M=(o=void 0,a(Object.keys(h[d]).map((function(e){return parseInt(e)})))),w=M.next();!w.done;w=M.next()){e[v=w.value]=this.smpChar(x+h[d][v])}}catch(e){o={error:e}}finally{try{w&&!w.done&&(s=M.return)&&s.call(M)}finally{if(o)throw o.error}}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}"bold"===t&&(e[988]=this.smpChar(120778),e[989]=this.smpChar(120779))},e.prototype.smpChar=function(e){return[,,,{smp:e}]},e.prototype.createVariants=function(e){var t,r;try{for(var n=a(e),i=n.next();!i.done;i=n.next()){var o=i.value;this.createVariant(o[0],o[1],o[2])}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.defineChars=function(e,t){var r,n,i=this.variant[e];Object.assign(i.chars,t);try{for(var o=a(i.linked),s=o.next();!s.done;s=o.next()){var u=s.value;Object.assign(u,t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.defineDelimiters=function(e){Object.assign(this.delimiters,e)},e.prototype.defineRemap=function(e,t){this.remapChars.hasOwnProperty(e)||(this.remapChars[e]={}),Object.assign(this.remapChars[e],t)},e.prototype.getDelimiter=function(e){return this.delimiters[e]},e.prototype.getSizeVariant=function(e,t){return this.delimiters[e].variants&&(t=this.delimiters[e].variants[t]),this.sizeVariants[t]},e.prototype.getChar=function(e,t){return this.variant[e].chars[t]},e.prototype.getVariant=function(e){return this.variant[e]},e.prototype.getCssFont=function(e){return this.cssFontMap[e]||["serif",!1,!1]},e.prototype.getFamily=function(e){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+e:e},e.prototype.getRemappedChar=function(e,t){return(this.remapChars[e]||{})[t]},e.OPTIONS={},e.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"]],e.defaultCssFonts={normal:["serif",!1,!1],bold:["serif",!1,!0],italic:["serif",!0,!1],"bold-italic":["serif",!0,!0],"double-struck":["serif",!1,!0],fraktur:["serif",!1,!1],"bold-fraktur":["serif",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1]},e.defaultCssFamilyPrefix="",e.VariantSmp={bold:[119808,119834,120488,120514,120782],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},e.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],e.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},e.SmpRemapGreekU={8711:25,1012:17},e.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},e.defaultAccentMap={768:"\u02cb",769:"\u02ca",770:"\u02c6",771:"\u02dc",772:"\u02c9",774:"\u02d8",775:"\u02d9",776:"\xa8",778:"\u02da",780:"\u02c7",8594:"\u20d7",8242:"'",8243:"''",8244:"'''",8245:"`",8246:"``",8247:"```",8279:"''''",8400:"\u21bc",8401:"\u21c0",8406:"\u2190",8417:"\u2194",8432:"*",8411:"...",8412:"....",8428:"\u21c1",8429:"\u21bd",8430:"\u2190",8431:"\u2192"},e.defaultMoMap={45:"\u2212"},e.defaultMnMap={45:"\u2212"},e.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.075,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,min_rule_thickness:1.25},e.defaultDelimiters={},e.defaultChars={},e.defaultSizeVariants=[],e}();t.FontData=o},80:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonWrapper=void 0;var u=r(960),c=r(45),h=r(89),l=r(780),p=r(724),f=r(795),d=r(549),m=2/18;function y(e,t){return e?t<m?0:m:t}var x=function(e){function t(t,r,n){void 0===n&&(n=null);var i=e.call(this,t,r)||this;return i.parent=null,i.removedStyles=null,i.styles=null,i.variant="",i.bboxComputed=!1,i.stretch=d.NOSTRETCH,i.font=null,i.parent=n,i.font=t.jax.font,i.bbox=f.BBox.zero(),i.getStyles(),i.getVariant(),i.getScale(),i.getSpace(),i.childNodes=r.childNodes.map((function(e){var t=i.wrap(e);return t.bbox.pwidth&&(r.notParent||r.isKind("math"))&&(i.bbox.pwidth=f.BBox.fullWidth),t})),i}return i(t,e),Object.defineProperty(t.prototype,"jax",{get:function(){return this.factory.jax},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adaptor",{get:function(){return this.factory.jax.adaptor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metrics",{get:function(){return this.factory.jax.math.metrics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fixesPWidth",{get:function(){return!this.node.notParent&&!this.node.isToken},enumerable:!1,configurable:!0}),t.prototype.wrap=function(e,t){void 0===t&&(t=null);var r=this.factory.wrap(e,t||this);return t&&t.childNodes.push(r),this.jax.nodeMap.set(e,r),r},t.prototype.getBBox=function(e){if(void 0===e&&(e=!0),this.bboxComputed)return this.bbox;var t=e?this.bbox:f.BBox.zero();return this.computeBBox(t),this.bboxComputed=e,t},t.prototype.computeBBox=function(e,t){var r,n;void 0===t&&(t=!1),e.empty();try{for(var i=a(this.childNodes),o=i.next();!o.done;o=i.next()){var s=o.value;e.append(s.getBBox())}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.clean(),this.fixesPWidth&&this.setChildPWidths(t)&&this.computeBBox(e,!0)},t.prototype.setChildPWidths=function(e,t,r){var n,i;if(void 0===t&&(t=null),void 0===r&&(r=!0),e)return!1;r&&(this.bbox.pwidth="");var o=!1;try{for(var s=a(this.childNodes),u=s.next();!u.done;u=s.next()){var c=u.value,h=c.getBBox();h.pwidth&&c.setChildPWidths(e,null===t?h.w:t,r)&&(o=!0)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o},t.prototype.invalidateBBox=function(){this.bboxComputed&&(this.bboxComputed=!1,this.parent&&this.parent.invalidateBBox())},t.prototype.copySkewIC=function(e){var t=this.childNodes[0];t&&t.bbox.sk&&(e.sk=t.bbox.sk);var r=this.childNodes[this.childNodes.length-1];r&&r.bbox.ic&&(e.ic=r.bbox.ic,e.w+=e.ic)},t.prototype.getStyles=function(){var e=this.node.attributes.getExplicit("style");if(e)for(var r=this.styles=new p.Styles(e),n=0,i=t.removeStyles.length;n<i;n++){var a=t.removeStyles[n];r.get(a)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[a]=r.get(a),r.set(a,""))}},t.prototype.getVariant=function(){if(this.node.isToken){var e=this.node.attributes,r=e.get("mathvariant");if(!e.getExplicit("mathvariant")){var n=e.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){var i=this.removedStyles;i.fontFamily&&(n.family=i.fontFamily),i.fontWeight&&(n.weight=i.fontWeight),i.fontStyle&&(n.style=i.fontStyle)}n.fontfamily&&(n.family=n.fontfamily),n.fontweight&&(n.weight=n.fontweight),n.fontstyle&&(n.style=n.fontstyle),n.weight&&n.weight.match(/^\d+$/)&&(n.weight=parseInt(n.weight)>600?"bold":"normal"),n.family?r=this.explicitVariant(n.family,n.weight,n.style):(this.node.getProperty("variantForm")&&(r="-tex-variant"),r=(t.BOLDVARIANTS[n.weight]||{})[r]||r,r=(t.ITALICVARIANTS[n.style]||{})[r]||r)}this.variant=r}},t.prototype.explicitVariant=function(e,t,r){var n=this.styles;return n||(n=this.styles=new p.Styles),n.set("fontFamily",e),t&&n.set("fontWeight",t),r&&n.set("fontStyle",r),"-explicitFont"},t.prototype.getScale=function(){var e=1,t=this.parent,r=t?t.bbox.scale:1,n=this.node.attributes,i=Math.min(n.get("scriptlevel"),2),a=n.get("fontsize"),o=this.node.isToken||this.node.isKind("mstyle")?n.get("mathsize"):n.getInherited("mathsize");if(0!==i){e=Math.pow(n.get("scriptsizemultiplier"),i);var s=this.length2em(n.get("scriptminsize"),.8,1);e<s&&(e=s)}this.removedStyles&&this.removedStyles.fontSize&&!a&&(a=this.removedStyles.fontSize),a&&!n.getExplicit("mathsize")&&(o=a),"1"!==o&&(e*=this.length2em(o,1,1)),this.bbox.scale=e,this.bbox.rscale=e/r},t.prototype.getSpace=function(){var e=this.isTopEmbellished(),t=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||t?e&&this.getMathMLSpacing():this.getTeXSpacing(e,t)},t.prototype.getMathMLSpacing=function(){var e=this.node.coreMO(),t=e.attributes,r=t.get("scriptlevel")>0;this.bbox.L=t.isSet("lspace")?Math.max(0,this.length2em(t.get("lspace"))):y(r,e.lspace),this.bbox.R=t.isSet("rspace")?Math.max(0,this.length2em(t.get("rspace"))):y(r,e.rspace)},t.prototype.getTeXSpacing=function(e,t){if(!t){var r=this.node.texSpacing();r&&(this.bbox.L=this.length2em(r))}if(e||t){var n=this.node.coreMO().attributes;n.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(n.get("lspace")))),n.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(n.get("rspace"))))}},t.prototype.isTopEmbellished=function(){return this.node.isEmbellished&&!(this.node.Parent&&this.node.Parent.isEmbellished)},t.prototype.core=function(){return this.jax.nodeMap.get(this.node.core())},t.prototype.coreMO=function(){return this.jax.nodeMap.get(this.node.coreMO())},t.prototype.getText=function(){var e,t,r="";if(this.node.isToken)try{for(var n=a(this.node.childNodes),i=n.next();!i.done;i=n.next()){var o=i.value;o instanceof c.TextNode&&(r+=o.getText())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},t.prototype.canStretch=function(e){if(this.stretch=d.NOSTRETCH,this.node.isEmbellished){var t=this.core();t&&t.node!==this.node&&t.canStretch(e)&&(this.stretch=t.stretch)}return 0!==this.stretch.dir},t.prototype.getAlignShift=function(){var e,t=(e=this.node.attributes).getList.apply(e,s(c.indentAttributes)),r=t.indentalign,n=t.indentshift,i=t.indentalignfirst,a=t.indentshiftfirst;return"indentalign"!==i&&(r=i),"auto"===r&&(r=this.jax.options.displayAlign),"indentshift"!==a&&(n=a),"auto"===n&&(n=this.jax.options.displayIndent,"right"!==r||n.match(/^\s*0[a-z]*\s*$/)||(n=("-"+n.trim()).replace(/^--/,""))),[r,this.length2em(n,this.metrics.containerWidth)]},t.prototype.getAlignX=function(e,t,r){return"right"===r?e-(t.w+t.R)*t.rscale:"left"===r?t.L*t.rscale:(e-t.w*t.rscale)/2},t.prototype.getAlignY=function(e,t,r,n,i){return"top"===i?e-r:"bottom"===i?n-t:"middle"===i?(e-r-(t-n))/2:0},t.prototype.getWrapWidth=function(e){return this.childNodes[e].getBBox().w},t.prototype.getChildAlign=function(e){return"left"},t.prototype.percent=function(e){return l.percent(e)},t.prototype.em=function(e){return l.em(e)},t.prototype.px=function(e,t){return void 0===t&&(t=-l.BIGDIMEN),l.px(e,t,this.metrics.em)},t.prototype.length2em=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=null),null===r&&(r=this.bbox.scale),l.length2em(e,t,r,this.jax.pxPerEm)},t.prototype.unicodeChars=function(e,t){void 0===t&&(t=this.variant);var r=h.unicodeChars(e),n=this.font.getVariant(t);if(n&&n.chars){var i=n.chars;r=r.map((function(e){return((i[e]||[])[3]||{}).smp||e}))}return r},t.prototype.remapChars=function(e){return e},t.prototype.mmlText=function(e){return this.node.factory.create("text").setText(e)},t.prototype.mmlNode=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=[]),this.node.factory.create(e,t,r)},t.prototype.createMo=function(e){var t=this.node.factory,r=t.create("text").setText(e),n=t.create("mo",{stretchy:!0},[r]);n.inheritAttributesFrom(this.node);var i=this.wrap(n);return i.parent=this,i},t.prototype.getVariantChar=function(e,t){var r=this.font.getChar(e,t)||[0,0,0,{unknown:!0}];return 3===r.length&&(r[3]={}),r},t.kind="unknown",t.styles={},t.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],t.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},t.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},t.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}},t}(u.AbstractWrapper);t.CommonWrapper=x},757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLoad=void 0;var n=r(971);t.asyncLoad=function(e){return n.mathjax.asyncLoad?new Promise((function(t,r){var i=n.mathjax.asyncLoad(e);i instanceof Promise?i.then((function(e){return t(e)})).catch((function(e){return r(e)})):t(i)})):Promise.reject("Can't load '"+e+"': No asyncLoad method specified")}},795:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BBox=t.BBoxStyleAdjust=void 0;var n=r(780);t.BBoxStyleAdjust=[["borderTopWidth","h"],["borderRightWidth","w"],["borderBottomWidth","d"],["borderLeftWidth","w",0],["paddingTop","h"],["paddingRight","w"],["paddingBottom","d"],["paddingLeft","w",0]];var i=function(){function e(e){void 0===e&&(e={w:0,h:-n.BIGDIMEN,d:-n.BIGDIMEN}),this.w=e.w||0,this.h="h"in e?e.h:-n.BIGDIMEN,this.d="d"in e?e.d:-n.BIGDIMEN,this.L=this.R=this.ic=this.sk=0,this.scale=this.rscale=1,this.pwidth=""}return e.zero=function(){return new e({h:0,d:0,w:0})},e.empty=function(){return new e},e.prototype.empty=function(){return this.w=0,this.h=this.d=-n.BIGDIMEN,this},e.prototype.clean=function(){this.w===-n.BIGDIMEN&&(this.w=0),this.h===-n.BIGDIMEN&&(this.h=0),this.d===-n.BIGDIMEN&&(this.d=0)},e.prototype.rescale=function(e){this.w*=e,this.h*=e,this.d*=e},e.prototype.combine=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var n=e.rscale,i=t+n*(e.w+e.L+e.R),a=r+n*e.h,o=n*e.d-r;i>this.w&&(this.w=i),a>this.h&&(this.h=a),o>this.d&&(this.d=o)},e.prototype.append=function(e){var t=e.rscale;this.w+=t*(e.w+e.L+e.R),t*e.h>this.h&&(this.h=t*e.h),t*e.d>this.d&&(this.d=t*e.d)},e.prototype.updateFrom=function(e){this.h=e.h,this.d=e.d,this.w=e.w,e.pwidth&&(this.pwidth=e.pwidth)},e.fullWidth="100%",e}();t.BBox=i},51:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.numeric=t.translate=t.remove=t.add=t.entities=t.options=void 0;var n=r(956),i=r(757);t.options={loadMissingEntities:!0},t.entities={ApplyFunction:"\u2061",Backslash:"\u2216",Because:"\u2235",Breve:"\u02d8",Cap:"\u22d2",CenterDot:"\xb7",CircleDot:"\u2299",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",Congruent:"\u2261",ContourIntegral:"\u222e",Coproduct:"\u2210",Cross:"\u2a2f",Cup:"\u22d3",CupCap:"\u224d",Dagger:"\u2021",Del:"\u2207",Delta:"\u0394",Diamond:"\u22c4",DifferentialD:"\u2146",DotEqual:"\u2250",DoubleDot:"\xa8",DoubleRightTee:"\u22a8",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",DownLeftVector:"\u21bd",DownRightVector:"\u21c1",DownTee:"\u22a4",Downarrow:"\u21d3",Element:"\u2208",EqualTilde:"\u2242",Equilibrium:"\u21cc",Exists:"\u2203",ExponentialE:"\u2147",FilledVerySmallSquare:"\u25aa",ForAll:"\u2200",Gamma:"\u0393",Gg:"\u22d9",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Hacek:"\u02c7",Hat:"^",HumpDownHump:"\u224e",HumpEqual:"\u224f",Im:"\u2111",ImaginaryI:"\u2148",Integral:"\u222b",Intersection:"\u22c2",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",Lambda:"\u039b",Larr:"\u219e",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",LeftArrowRightArrow:"\u21c6",LeftCeiling:"\u2308",LeftDownVector:"\u21c3",LeftFloor:"\u230a",LeftRightArrow:"\u2194",LeftTee:"\u22a3",LeftTriangle:"\u22b2",LeftTriangleEqual:"\u22b4",LeftUpVector:"\u21bf",LeftVector:"\u21bc",Leftarrow:"\u21d0",Leftrightarrow:"\u21d4",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",Ll:"\u22d8",Lleftarrow:"\u21da",LongLeftArrow:"\u27f5",LongLeftRightArrow:"\u27f7",LongRightArrow:"\u27f6",Longleftarrow:"\u27f8",Longleftrightarrow:"\u27fa",Longrightarrow:"\u27f9",Lsh:"\u21b0",MinusPlus:"\u2213",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotLeftTriangle:"\u22ea",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotPrecedes:"\u2280",NotPrecedesSlantEqual:"\u22e0",NotRightTriangle:"\u22eb",NotRightTriangleEqual:"\u22ed",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsSlantEqual:"\u22e1",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotVerticalBar:"\u2224",Omega:"\u03a9",OverBar:"\u203e",OverBrace:"\u23de",PartialD:"\u2202",Phi:"\u03a6",Pi:"\u03a0",PlusMinus:"\xb1",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",Product:"\u220f",Proportional:"\u221d",Psi:"\u03a8",Rarr:"\u21a0",Re:"\u211c",ReverseEquilibrium:"\u21cb",RightAngleBracket:"\u27e9",RightArrow:"\u2192",RightArrowLeftArrow:"\u21c4",RightCeiling:"\u2309",RightDownVector:"\u21c2",RightFloor:"\u230b",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTriangle:"\u22b3",RightTriangleEqual:"\u22b5",RightUpVector:"\u21be",RightVector:"\u21c0",Rightarrow:"\u21d2",Rrightarrow:"\u21db",Rsh:"\u21b1",Sigma:"\u03a3",SmallCircle:"\u2218",Sqrt:"\u221a",Square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",Star:"\u22c6",Subset:"\u22d0",SubsetEqual:"\u2286",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",SuchThat:"\u220b",Sum:"\u2211",Superset:"\u2283",SupersetEqual:"\u2287",Supset:"\u22d1",Therefore:"\u2234",Theta:"\u0398",Tilde:"\u223c",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",UnderBar:"_",UnderBrace:"\u23df",Union:"\u22c3",UnionPlus:"\u228e",UpArrow:"\u2191",UpDownArrow:"\u2195",UpTee:"\u22a5",Uparrow:"\u21d1",Updownarrow:"\u21d5",Upsilon:"\u03a5",Vdash:"\u22a9",Vee:"\u22c1",VerticalBar:"\u2223",VerticalTilde:"\u2240",Vvdash:"\u22aa",Wedge:"\u22c0",Xi:"\u039e",amp:"&",acute:"\xb4",aleph:"\u2135",alpha:"\u03b1",amalg:"\u2a3f",and:"\u2227",ang:"\u2220",angmsd:"\u2221",angsph:"\u2222",ape:"\u224a",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",beta:"\u03b2",beth:"\u2136",between:"\u226c",bigcirc:"\u25ef",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",blacklozenge:"\u29eb",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",bowtie:"\u22c8",boxdl:"\u2510",boxdr:"\u250c",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxul:"\u2518",boxur:"\u2514",bsol:"\\",bull:"\u2022",cap:"\u2229",check:"\u2713",chi:"\u03c7",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledR:"\xae",circledS:"\u24c8",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",clubs:"\u2663",colon:":",comp:"\u2201",ctdot:"\u22ef",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cup:"\u222a",curarr:"\u21b7",curlyvee:"\u22ce",curlywedge:"\u22cf",dagger:"\u2020",daleth:"\u2138",ddarr:"\u21ca",deg:"\xb0",delta:"\u03b4",digamma:"\u03dd",div:"\xf7",divideontimes:"\u22c7",dot:"\u02d9",doteqdot:"\u2251",dotplus:"\u2214",dotsquare:"\u22a1",dtdot:"\u22f1",ecir:"\u2256",efDot:"\u2252",egs:"\u2a96",ell:"\u2113",els:"\u2a95",empty:"\u2205",epsi:"\u03b5",epsiv:"\u03f5",erDot:"\u2253",eta:"\u03b7",eth:"\xf0",flat:"\u266d",fork:"\u22d4",frown:"\u2322",gEl:"\u2a8c",gamma:"\u03b3",gap:"\u2a86",gimel:"\u2137",gnE:"\u2269",gnap:"\u2a8a",gne:"\u2a88",gnsim:"\u22e7",gt:">",gtdot:"\u22d7",harrw:"\u21ad",hbar:"\u210f",hellip:"\u2026",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",imath:"\u0131",infin:"\u221e",intcal:"\u22ba",iota:"\u03b9",jmath:"\u0237",kappa:"\u03ba",kappav:"\u03f0",lEg:"\u2a8b",lambda:"\u03bb",lap:"\u2a85",larrlp:"\u21ab",larrtl:"\u21a2",lbrace:"{",lbrack:"[",le:"\u2264",leftleftarrows:"\u21c7",leftthreetimes:"\u22cb",lessdot:"\u22d6",lmoust:"\u23b0",lnE:"\u2268",lnap:"\u2a89",lne:"\u2a87",lnsim:"\u22e6",longmapsto:"\u27fc",looparrowright:"\u21ac",lowast:"\u2217",loz:"\u25ca",lt:"<",ltimes:"\u22c9",ltri:"\u25c3",macr:"\xaf",malt:"\u2720",mho:"\u2127",mu:"\u03bc",multimap:"\u22b8",nLeftarrow:"\u21cd",nLeftrightarrow:"\u21ce",nRightarrow:"\u21cf",nVDash:"\u22af",nVdash:"\u22ae",natur:"\u266e",nearr:"\u2197",nharr:"\u21ae",nlarr:"\u219a",not:"\xac",nrarr:"\u219b",nu:"\u03bd",nvDash:"\u22ad",nvdash:"\u22ac",nwarr:"\u2196",omega:"\u03c9",omicron:"\u03bf",or:"\u2228",osol:"\u2298",period:".",phi:"\u03c6",phiv:"\u03d5",pi:"\u03c0",piv:"\u03d6",prap:"\u2ab7",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",prime:"\u2032",psi:"\u03c8",quot:'"',rarrtl:"\u21a3",rbrace:"}",rbrack:"]",rho:"\u03c1",rhov:"\u03f1",rightrightarrows:"\u21c9",rightthreetimes:"\u22cc",ring:"\u02da",rmoust:"\u23b1",rtimes:"\u22ca",rtri:"\u25b9",scap:"\u2ab8",scnE:"\u2ab6",scnap:"\u2aba",scnsim:"\u22e9",sdot:"\u22c5",searr:"\u2198",sect:"\xa7",sharp:"\u266f",sigma:"\u03c3",sigmav:"\u03c2",simne:"\u2246",smile:"\u2323",spades:"\u2660",sub:"\u2282",subE:"\u2ac5",subnE:"\u2acb",subne:"\u228a",supE:"\u2ac6",supnE:"\u2acc",supne:"\u228b",swarr:"\u2199",tau:"\u03c4",theta:"\u03b8",thetav:"\u03d1",tilde:"\u02dc",times:"\xd7",triangle:"\u25b5",triangleq:"\u225c",upsi:"\u03c5",upuparrows:"\u21c8",veebar:"\u22bb",vellip:"\u22ee",weierp:"\u2118",xi:"\u03be",yen:"\xa5",zeta:"\u03b6",zigrarr:"\u21dd"};var a={};function o(e,r){if("#"===r.charAt(0))return s(r.slice(1));if(t.entities[r])return t.entities[r];if(t.options.loadMissingEntities){var o=r.match(/^[a-zA-Z](fr|scr|opf)$/)?RegExp.$1:r.charAt(0).toLowerCase();a[o]||(a[o]=!0,n.retryAfter(i.asyncLoad("./util/entities/"+o+".js")))}return e}function s(e){var t="x"===e.charAt(0)?parseInt(e.slice(1),16):parseInt(e);return String.fromCodePoint(t)}t.add=function(e,r){Object.assign(t.entities,e),a[r]=!0},t.remove=function(e){delete t.entities[e]},t.translate=function(e){return e.replace(/&([a-z][a-z0-9]*|#(?:[0-9]+|x[0-9a-f]+));/gi,o)},t.numeric=s},341:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionList=void 0;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var i=a(this),o=i.next();!o.done;o=i.next()){var u=o.value,c=u.item.apply(u,s(r));if(!1===c)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!0},t.prototype.asyncExecute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=-1,n=this.items;return new Promise((function(t,i){!function a(){for(var o;++r<n.length;){var u=(o=n[r]).item.apply(o,s(e));if(u instanceof Promise)return void u.then(a).catch((function(e){return i(e)}));if(!1===u)return void t(!1)}t(!0)}()}))},t}(r(721).PrioritizedList);t.FunctionList=u},498:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.separateOptions=t.selectOptionsFromKeys=t.selectOptions=t.userOptions=t.defaultOptions=t.insert=t.copy=t.keys=t.makeArray=t.expandable=t.Expandable=t.REMOVE=t.APPEND=void 0;var a={}.constructor;function o(e){return"object"==typeof e&&null!==e&&(e.constructor===a||e.constructor===s)}t.APPEND="[+]",t.REMOVE="[-]";var s=function(){};function u(e){return Object.assign(Object.create(s.prototype),e)}function c(e){return e?Object.keys(e).concat(Object.getOwnPropertySymbols(e)):[]}function h(e){var t,n,i={};try{for(var a=r(c(e)),p=a.next();!p.done;p=a.next()){var f=p.value,d=Object.getOwnPropertyDescriptor(e,f),m=d.value;Array.isArray(m)?d.value=l([],m,!1):o(m)&&(d.value=h(m)),d.enumerable&&(i[f]=d)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return Object.defineProperties(e.constructor===s?u({}):{},i)}function l(e,n,a){var u,p;void 0===a&&(a=!0);var f=function(r){if(a&&void 0===e[r]&&e.constructor!==s)throw"symbol"==typeof r&&(r=r.toString()),new Error('Invalid option "'+r+'" (no default value).');var u=n[r],p=e[r];if(!o(u)||null===p||"object"!=typeof p&&"function"!=typeof p)Array.isArray(u)?(e[r]=[],l(e[r],u,!1)):o(u)?e[r]=h(u):e[r]=u;else{var f=c(u);Array.isArray(p)&&(1===f.length&&(f[0]===t.APPEND||f[0]===t.REMOVE)&&Array.isArray(u[f[0]])||2===f.length&&f.sort().join(",")===t.APPEND+","+t.REMOVE&&Array.isArray(u[t.APPEND])&&Array.isArray(u[t.REMOVE]))?(u[t.REMOVE]&&(p=e[r]=p.filter((function(e){return u[t.REMOVE].indexOf(e)<0}))),u[t.APPEND]&&(e[r]=i(p,u[t.APPEND]))):l(p,u,a)}};try{for(var d=r(c(n)),m=d.next();!m.done;m=d.next()){f(m.value)}}catch(e){u={error:e}}finally{try{m&&!m.done&&(p=d.return)&&p.call(d)}finally{if(u)throw u.error}}return e}function p(e){for(var t,n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o={};try{for(var s=r(i),u=s.next();!u.done;u=s.next()){var c=u.value;e.hasOwnProperty(c)&&(o[c]=e[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o}t.Expandable=s,t.expandable=u,t.makeArray=function(e){return Array.isArray(e)?e:[e]},t.keys=c,t.copy=h,t.insert=l,t.defaultOptions=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach((function(t){return l(e,t,!1)})),e},t.userOptions=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach((function(t){return l(e,t,!0)})),e},t.selectOptions=p,t.selectOptionsFromKeys=function(e,t){return p.apply(void 0,i([e],Object.keys(t)))},t.separateOptions=function(e){for(var t,n,i,a,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var u=[];try{for(var c=r(o),h=c.next();!h.done;h=c.next()){var l=h.value,p={},f={};try{for(var d=(i=void 0,r(Object.keys(e||{}))),m=d.next();!m.done;m=d.next()){var y=m.value;(void 0===l[y]?f:p)[y]=e[y]}}catch(e){i={error:e}}finally{try{m&&!m.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}u.push(p),e=f}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return u.unshift(e),u}},721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrioritizedList=void 0;var r=function(){function e(){this.items=[],this.items=[]}return e.prototype[Symbol.iterator]=function(){var e=0,t=this.items;return{next:function(){return{value:t[e++],done:e>t.length}}}},e.prototype.add=function(t,r){void 0===r&&(r=e.DEFAULTPRIORITY);var n=this.items.length;do{n--}while(n>=0&&r<this.items[n].priority);return this.items.splice(n+1,0,{item:t,priority:r}),t},e.prototype.remove=function(e){var t=this.items.length;do{t--}while(t>=0&&this.items[t].item!==e);t>=0&&this.items.splice(t,1)},e.prototype.toArray=function(){return Array.from(this)},e.DEFAULTPRIORITY=5,e}();t.PrioritizedList=r},956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.retryAfter=t.handleRetriesFor=void 0,t.handleRetriesFor=function(e){return new Promise((function t(r,n){try{r(e())}catch(e){e.retry&&e.retry instanceof Promise?e.retry.then((function(){return t(r,n)})).catch((function(e){return n(e)})):e.restart&&e.restart.isCallback?MathJax.Callback.After((function(){return t(r,n)}),e.restart):n(e)}}))},t.retryAfter=function(e){var t=new Error("MathJax retry");throw t.retry=e,t}},724:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Styles=void 0;var a=["top","right","bottom","left"],o=["width","style","color"];function s(e){for(var t=e.split(/((?:'[^']*'|"[^"]*"|,[\s\n]|[^\s\n])*)/g),r=[];t.length>1;)t.shift(),r.push(t.shift());return r}function u(e){var t,n,i=s(this.styles[e]);0===i.length&&i.push(""),1===i.length&&i.push(i[0]),2===i.length&&i.push(i[0]),3===i.length&&i.push(i[1]);try{for(var a=r(g.connect[e].children),o=a.next();!o.done;o=a.next()){var u=o.value;this.setStyle(this.childName(e,u),i.shift())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}function c(e){var t,n,i=g.connect[e].children,a=[];try{for(var o=r(i),s=o.next();!s.done;s=o.next()){var u=s.value,c=this.styles[e+"-"+u];if(!c)return void delete this.styles[e];a.push(c)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}a[3]===a[1]&&(a.pop(),a[2]===a[0]&&(a.pop(),a[1]===a[0]&&a.pop())),this.styles[e]=a.join(" ")}function h(e){var t,n;try{for(var i=r(g.connect[e].children),a=i.next();!a.done;a=i.next()){var o=a.value;this.setStyle(this.childName(e,o),this.styles[e])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}function l(e){var t,n,a=i(g.connect[e].children),o=this.styles[this.childName(e,a.shift())];try{for(var s=r(a),u=s.next();!u.done;u=s.next()){var c=u.value;if(this.styles[this.childName(e,c)]!==o)return void delete this.styles[e]}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}this.styles[e]=o}var p=/^(?:[\d.]+(?:[a-z]+)|thin|medium|thick|inherit|initial|unset)$/,f=/^(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit|initial|unset)$/;function d(e){var t,n,i,a,o={width:"",style:"",color:""};try{for(var u=r(s(this.styles[e])),c=u.next();!c.done;c=u.next()){var h=c.value;h.match(p)&&""===o.width?o.width=h:h.match(f)&&""===o.style?o.style=h:o.color=h}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}try{for(var l=r(g.connect[e].children),d=l.next();!d.done;d=l.next()){var m=d.value;this.setStyle(this.childName(e,m),o[m])}}catch(e){i={error:e}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}function m(e){var t,n,i=[];try{for(var a=r(g.connect[e].children),o=a.next();!o.done;o=a.next()){var s=o.value,u=this.styles[this.childName(e,s)];u&&i.push(u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}i.length?this.styles[e]=i.join(" "):delete this.styles[e]}var y={style:/^(?:normal|italic|oblique|inherit|initial|unset)$/,variant:new RegExp("^(?:"+["normal|none","inherit|initial|unset","common-ligatures|no-common-ligatures","discretionary-ligatures|no-discretionary-ligatures","historical-ligatures|no-historical-ligatures","contextual|no-contextual","(?:stylistic|character-variant|swash|ornaments|annotation)\\([^)]*\\)","small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","lining-nums|oldstyle-nums|proportional-nums|tabular-nums","diagonal-fractions|stacked-fractions","ordinal|slashed-zero","jis78|jis83|jis90|jis04|simplified|traditional","full-width|proportional-width","ruby"].join("|")+")$"),weight:/^(?:normal|bold|bolder|lighter|[1-9]00|inherit|initial|unset)$/,stretch:new RegExp("^(?:"+["normal","(?:(?:ultra|extra|semi)-)?condensed","(?:(?:semi|extra|ulta)-)?expanded","inherit|initial|unset"].join("|")+")$"),size:new RegExp("^(?:"+["xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller","[d.]+%|[d.]+[a-z]+","inherit|initial|unset"].join("|")+")(?:/(?:normal|[d.+](?:%|[a-z]+)?))?$")};function x(e){var t,i,a,o,u=s(this.styles[e]),c={style:"",variant:[],weight:"",stretch:"",size:"",family:"","line-height":""};try{for(var h=r(u),l=h.next();!l.done;l=h.next()){var p=l.value;c.family=p;try{for(var f=(a=void 0,r(Object.keys(y))),d=f.next();!d.done;d=f.next()){var m=d.value;if((Array.isArray(c[m])||""===c[m])&&p.match(y[m]))if("size"===m){var x=n(p.split(/\//),2),v=x[0],M=x[1];c[m]=v,M&&(c["line-height"]=M)}else""===c.size&&(Array.isArray(c[m])?c[m].push(p):c[m]=p)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}!function(e,t){var n,i;try{for(var a=r(g.connect[e].children),o=a.next();!o.done;o=a.next()){var s=o.value,u=this.childName(e,s);if(Array.isArray(t[s])){var c=t[s];c.length&&(this.styles[u]=c.join(" "))}else""!==t[s]&&(this.styles[u]=t[s])}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}(e,c),delete this.styles[e]}function v(e){}var g=function(){function e(e){void 0===e&&(e=""),this.parse(e)}return Object.defineProperty(e.prototype,"cssText",{get:function(){var e,t,n=[];try{for(var i=r(Object.keys(this.styles)),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.parentName(o);this.styles[s]||n.push(o+": "+this.styles[o])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.join("; ")},enumerable:!1,configurable:!0}),e.prototype.set=function(t,r){for(t=this.normalizeName(t),this.setStyle(t,r),e.connect[t]&&!e.connect[t].combine&&(this.combineChildren(t),delete this.styles[t]);t.match(/-/)&&(t=this.parentName(t),e.connect[t]);)e.connect[t].combine.call(this,t)},e.prototype.get=function(e){return e=this.normalizeName(e),this.styles.hasOwnProperty(e)?this.styles[e]:""},e.prototype.setStyle=function(t,r){this.styles[t]=r,e.connect[t]&&e.connect[t].children&&e.connect[t].split.call(this,t),""===r&&delete this.styles[t]},e.prototype.combineChildren=function(t){var n,i,a=this.parentName(t);try{for(var o=r(e.connect[t].children),s=o.next();!s.done;s=o.next()){var u=s.value,c=this.childName(a,u);e.connect[c].combine.call(this,c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.parentName=function(e){var t=e.replace(/-[^-]*$/,"");return e===t?"":t},e.prototype.childName=function(t,r){return r.match(/-/)?r:(e.connect[t]&&!e.connect[t].combine&&(r+=t.replace(/.*-/,"-"),t=this.parentName(t)),t+"-"+r)},e.prototype.normalizeName=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},e.prototype.parse=function(e){void 0===e&&(e="");var t=this.constructor.pattern;this.styles={};for(var r=e.replace(t.comment,"").split(t.style);r.length>1;){var i=n(r.splice(0,3),3),a=i[0],o=i[1],s=i[2];if(a.match(/[^\s\n]/))return;this.set(o,s)}},e.pattern={style:/([-a-z]+)[\s\n]*:[\s\n]*((?:'[^']*'|"[^"]*"|\n|.)*?)[\s\n]*(?:;|$)/g,comment:/\/\*[^]*?\*\//g},e.connect={padding:{children:a,split:u,combine:c},border:{children:a,split:h,combine:l},"border-top":{children:o,split:d,combine:m},"border-right":{children:o,split:d,combine:m},"border-bottom":{children:o,split:d,combine:m},"border-left":{children:o,split:d,combine:m},"border-width":{children:a,split:u,combine:null},"border-style":{children:a,split:u,combine:null},"border-color":{children:a,split:u,combine:null},font:{children:["style","variant","weight","stretch","line-height","size","family"],split:x,combine:v}},e}();t.Styles=g},663:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(51).add({NJcy:"\u040a",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041d",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",NewLine:"\n",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Not:"\u2aec",NotCongruent:"\u2262",NotCupCap:"\u226d",NotEqualTilde:"\u2242\u0338",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",NotLeftTriangleBar:"\u29cf\u0338",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",NotPrecedesEqual:"\u2aaf\u0338",NotReverseElement:"\u220c",NotRightTriangleBar:"\u29d0\u0338",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",Ntilde:"\xd1",Nu:"\u039d",nGg:"\u22d9\u0338",nGt:"\u226b\u20d2",nGtv:"\u226b\u0338",nLl:"\u22d8\u0338",nLt:"\u226a\u20d2",nLtv:"\u226a\u0338",nabla:"\u2207",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",ncaron:"\u0148",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",neArr:"\u21d7",nearhk:"\u2924",nearrow:"\u2197",nedot:"\u2250\u0338",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",nexist:"\u2204",nexists:"\u2204",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",ngsim:"\u2275",ngt:"\u226f",ngtr:"\u226f",nhArr:"\u21ce",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",njcy:"\u045a",nlArr:"\u21cd",nlE:"\u2266\u0338",nldr:"\u2025",nle:"\u2270",nleftarrow:"\u219a",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nlsim:"\u2274",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nmid:"\u2224",notin:"\u2209",notinE:"\u22f9\u0338",notindot:"\u22f5\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",num:"#",numero:"\u2116",numsp:"\u2007",nvHarr:"\u2904",nvap:"\u224d\u20d2",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwArr:"\u21d6",nwarhk:"\u2923",nwarrow:"\u2196",nwnear:"\u2927"},"n")},893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(51).add({Pcy:"\u041f",Poincareplane:"\u210c",Pr:"\u2abb",Prime:"\u2033",Proportion:"\u2237",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",pcy:"\u043f",percnt:"%",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",phmmat:"\u2133",phone:"\u260e",pitchfork:"\u22d4",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",pointint:"\u2a15",pound:"\xa3",pr:"\u227a",prE:"\u2ab3",prcue:"\u227c",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",preceq:"\u2aaf",precsim:"\u227e",primes:"\u2119",prnE:"\u2ab5",prnap:"\u2ab9",prnsim:"\u22e8",prod:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",puncsp:"\u2008"},"p")},54:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(51).add({RBarr:"\u2910",REG:"\xae",Racute:"\u0154",Rang:"\u27eb",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",ReverseElement:"\u220b",ReverseUpEquilibrium:"\u296f",Rho:"\u03a1",RightArrowBar:"\u21e5",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVectorBar:"\u2955",RightTeeVector:"\u295b",RightTriangleBar:"\u29d0",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVectorBar:"\u2954",RightVectorBar:"\u2953",RoundImplies:"\u2970",RuleDelayed:"\u29f4",rAarr:"\u21db",rArr:"\u21d2",rAtail:"\u291c",rBarr:"\u290f",rHar:"\u2964",race:"\u223d\u0331",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",rarrw:"\u219d",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",rbarr:"\u290d",rbbrk:"\u2773",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rceil:"\u2309",rcub:"}",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",reg:"\xae",rfisht:"\u297d",rfloor:"\u230b",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",rightarrow:"\u2192",rightarrowtail:"\u21a3",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightsquigarrow:"\u219d",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",roplus:"\u2a2e",rotimes:"\u2a35",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",rsaquo:"\u203a",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",ruluhar:"\u2968",rx:"\u211e"},"r")},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.px=t.emRounded=t.em=t.percent=t.length2em=t.MATHSPACE=t.RELUNITS=t.UNITS=t.BIGDIMEN=void 0,t.BIGDIMEN=1e6,t.UNITS={px:1,in:96,cm:96/2.54,mm:96/25.4},t.RELUNITS={em:1,ex:.431,pt:.1,pc:1.2,mu:1/18},t.MATHSPACE={veryverythinmathspace:1/18,verythinmathspace:2/18,thinmathspace:3/18,mediummathspace:4/18,thickmathspace:5/18,verythickmathspace:6/18,veryverythickmathspace:7/18,negativeveryverythinmathspace:-1/18,negativeverythinmathspace:-2/18,negativethinmathspace:-3/18,negativemediummathspace:-4/18,negativethickmathspace:-5/18,negativeverythickmathspace:-6/18,negativeveryverythickmathspace:-7/18,thin:.04,medium:.06,thick:.1,normal:1,big:2,small:1/Math.sqrt(2),infinity:t.BIGDIMEN},t.length2em=function(e,r,n,i){if(void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=16),"string"!=typeof e&&(e=String(e)),""===e||null==e)return r;if(t.MATHSPACE[e])return t.MATHSPACE[e];var a=e.match(/^\s*([-+]?(?:\.\d+|\d+(?:\.\d*)?))?(pt|em|ex|mu|px|pc|in|mm|cm|%)?/);if(!a)return r;var o=parseFloat(a[1]||"1"),s=a[2];return t.UNITS.hasOwnProperty(s)?o*t.UNITS[s]/i/n:t.RELUNITS.hasOwnProperty(s)?o*t.RELUNITS[s]:"%"===s?o/100*r:o*r},t.percent=function(e){return(100*e).toFixed(1).replace(/\.?0+$/,"")+"%"},t.em=function(e){return Math.abs(e)<.001?"0":e.toFixed(3).replace(/\.?0+$/,"")+"em"},t.emRounded=function(e,t){return void 0===t&&(t=16),e=(Math.round(e*t)+.05)/t,Math.abs(e)<.001?"0em":e.toFixed(3).replace(/\.?0+$/,"")+"em"},t.px=function(e,r,n){return void 0===r&&(r=-t.BIGDIMEN),void 0===n&&(n=16),e*=n,r&&e<r&&(e=r),Math.abs(e)<.1?"0":e.toFixed(1).replace(/\.0$/,"")+"px"}},89:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.split=t.isPercent=t.unicodeChars=t.quotePattern=t.sortLength=void 0,t.sortLength=function(e,t){return e.length!==t.length?t.length-e.length:e===t?0:e<t?-1:1},t.quotePattern=function(e){return e.replace(/([\^$(){}+*?\-|\[\]\:\\])/g,"\\$1")},t.unicodeChars=function(e){return Array.from(e).map((function(e){return e.codePointAt(0)}))},t.isPercent=function(e){return!!e.match(/%\s*$/)},t.split=function(e){return e.trim().split(/\s+/)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(821),t=r(605),n=r(401),i=r(695),a=r(914),o=r.n(a),s=r(362),u=r.n(s),c=r(32),h=r.n(c),l=r(420),p={whiteSpaceRegex:/^(\s+|%[^\r\n]*(\r\n|\r|\n)?)+/,lengthResolution:128,interpolationResolution:5,machinePrecision:1e-12};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var i=M(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var b=function e(){w(this,e)},S=function(e){y(r,e);var t=v(r);function r(e){var n;return w(this,r),(n=t.call(this)).get=e,n}return m(r,[{key:"isEmpty",get:function(){return!1}},{key:"isDefined",get:function(){return!0}},{key:"getOrElse",value:function(e){return this.get}},{key:"flatMap",value:function(e){return e(this.get)}},{key:"map",value:function(e){return new r(e(this.get))}},{key:"foreach",value:function(e){e(this.get)}},{key:"toString",value:function(){return"Some("+this.get+")"}}],[{key:"unapply",value:function(e){return new r(e.get)}}]),r}(b),O=function(e){y(r,e);var t=v(r);function r(){return w(this,r),t.call(this)}return m(r,[{key:"isEmpty",get:function(){return!0}},{key:"isDefined",get:function(){return!1}},{key:"getOrElse",value:function(e){return e}},{key:"flatMap",value:function(e){return this}},{key:"foreach",value:function(e){}},{key:"map",value:function(e){return this}},{key:"toString",value:function(){return"None"}}],[{key:"unapply",value:function(e){return new S(e)}}]),r}(b);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}b.Some=S,b.None=O,b.empty=new O;var B=function e(){J(this,e)},N=function(e){L(r,e);var t=R(r);function r(e,n){var i;return J(this,r),(i=t.call(this)).head=e,i.tail=n,i}return k(r,[{key:"isEmpty",get:function(){return!1}},{key:"at",value:function(e){if(e<0||e>=this.length())throw Error("no such element at "+e+". index must be lower than "+this.length()+".");for(var t=this,r=0;r<e;r++)t=t.tail;return t.head}},{key:"length",value:function(){for(var e=this,t=0;!e.isEmpty;)t++,e=e.tail;return t}},{key:"prepend",value:function(e){return new r(e,this)}},{key:"append",value:function(e){var t=new r(e,B.empty);return this.reverse().foreach((function(e){t=new r(e,t)})),t}},{key:"concat",value:function(e){var t=e;return this.reverse().foreach((function(e){t=new r(e,t)})),t}},{key:"foldLeft",value:function(e,t){var r,n;for(r=t(e,this.head),n=this.tail;!n.isEmpty;)r=t(r,n.head),n=n.tail;return r}},{key:"foldRight",value:function(e,t){return this.tail.isEmpty?t(this.head,e):t(this.head,this.tail.foldRight(e,t))}},{key:"map",value:function(e){return new r(e(this.head),this.tail.map(e))}},{key:"flatMap",value:function(e){return e(this.head).concat(this.tail.flatMap(e))}},{key:"foreach",value:function(e){for(var t=this;!t.isEmpty;)e(t.head),t=t.tail}},{key:"reverse",value:function(){var e=B.empty;return this.foreach((function(t){e=new r(t,e)})),e}},{key:"mkString",value:function(){var e,t,n,i,a;switch(arguments.length){case 0:e=t=n="";break;case 1:t=arguments[0],e=n="";break;case 2:e=arguments[0],t=arguments[1],n="";break;default:e=arguments[0],t=arguments[1],n=arguments[2]}for(i=e+this.head.toString(),a=this.tail;a instanceof r;)i+=t+a.head.toString(),a=a.tail;return i+=n}},{key:"toString",value:function(){return this.mkString("[",", ","]")}}],[{key:"unapply",value:function(e){return new b.Some([e.head,e.tail])}}]),r}(B);B.Cons=N;var I=function(e){L(r,e);var t=R(r);function r(){return J(this,r),t.call(this)}return k(r,[{key:"isEmpty",get:function(){return!0}},{key:"at",value:function(e){throw new Error("cannot get element from an empty list.")}},{key:"length",value:function(){return 0}},{key:"prepend",value:function(e){return new N(e,B.empty)}},{key:"append",value:function(e){return new N(e,B.empty)}},{key:"concat",value:function(e){return e}},{key:"foldLeft",value:function(e,t){return e}},{key:"foldRight",value:function(e,t){return e}},{key:"flatMap",value:function(e){return this}},{key:"map",value:function(e){return this}},{key:"foreach",value:function(e){}},{key:"reverse",value:function(){return this}},{key:"mkString",value:function(){switch(arguments.length){case 0:case 1:return"";case 2:return arguments[0];default:return arguments[0]+arguments[2]}}},{key:"toString",value:function(){return"[]"}}],[{key:"unapply",value:function(e){return new b.Some(e)}}]),r}(B);function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}B.Nil=I,B.empty=new I,B.fromArray=function(e){var t,r;for(t=B.empty,r=e.length-1;r>=0;)t=new N(e[r],t),r-=1;return t};var j=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=t,this.tail=r}var t,r,n;return t=e,n=[{key:"unapply",value:function(e){return new Option.Some([e.head,e.tail])}}],(r=[{key:"toString",value:function(){return"("+this.head+"~"+this.tail+")"}}])&&D(t.prototype,r),n&&D(t,n),e}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),e}var V=function(){function e(){_(this,e),this.cases=[]}return G(e,[{key:"Case",value:function(e,t){return this.cases.push([e,t]),this}},{key:"match",value:function(e){var t,r,n,i;for(t=0,r=this.cases.length;t<r;){if(e instanceof(n=this.cases[t][0])&&(i=n.unapply(e)).isDefined)return this.cases[t][1](i.get);t+=1}throw new X(e)}}]),e}(),X=function(){function e(t){_(this,e),this.obj=t}return G(e,[{key:"toString",value:function(){return"MatchError("+this.obj+")"}}]),e}();function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var i=Q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t,r){return t&&$(e.prototype,t),r&&$(e,r),e}var Z=function(){function e(t,r){K(this,e),this.source=t,this.offset=void 0===r?0:r,this._index=null,this._line=null}return Y(e,[{key:"index",value:function(){if(null!==this._index)return this._index;this._index=[],this._index.push(0);for(var e=0;e<this.source.length;)"\n"===this.source.charAt(e)&&this._index.push(e+1),e+=1;return this._index.push(this.source.length),this._index}},{key:"line",value:function(){var e,t,r;if(null!==this._line)return this._line;for(e=0,t=this.index().length-1;e+1<t;)r=t+e>>1,this.offset<this.index()[r]?t=r:e=r;return this._line=e+1,this._line}},{key:"column",value:function(){return this.offset-this.index()[this.line()-1]+1}},{key:"lineContents",value:function(){var e,t;return e=this.index(),t=this.line(),this.source.substring(e[t-1],e[t])}},{key:"toString",value:function(){return this.line().toString()+"."+this.column()}},{key:"longString",value:function(){var e,t;for(e=this.lineContents()+"\n",t=0;t<this.column();)"\t"===this.lineContents().charAt(t)?e+="\t":e+=" ",t+=1;return e+="^"}},{key:"isLessThan",value:function(t){return t instanceof e?this.offset<t.offset:this.line()<t.line()||this.line()===t.line()&&this.column()<t.column()}}]),e}(),ee=function(){function e(t,r,n){K(this,e),this.source=t,this.offset=r,this.context=n}return Y(e,[{key:"first",value:function(){return this.offset<this.source.length?this.source.charAt(this.offset):e.EofCh}},{key:"rest",value:function(){return this.offset<this.source.length?new e(this.source,this.offset+1,this.context):this}},{key:"pos",value:function(){return new Z(this.source,this.offset)}},{key:"atEnd",value:function(){return this.offset>=this.source.length}},{key:"drop",value:function(e){var t,r;for(t=this,r=e;r>0;)t=t.rest(),r-=1;return t}}]),e}();ee.EofCh="\x03";var te=function(){function e(){K(this,e)}return Y(e,null,[{key:"parse",value:function(e,t){return e.apply(t)}},{key:"parseAll",value:function(t,r){return t.andl((function(){return e.eos()})).apply(r)}},{key:"parseString",value:function(t,r){var n=new ee(r,0,{lastNoSuccess:void 0});return e.parse(t,n)}},{key:"parseAllString",value:function(t,r){var n=new ee(r,0,{lastNoSuccess:void 0});return e.parseAll(t,n)}},{key:"_handleWhiteSpace",value:function(e){var t=e.context.whiteSpaceRegex,r=e.source,n=e.offset,i=t.exec(r.substring(n,r.length));return null!==i?n+i[0].length:n}},{key:"literal",value:function(t){return new se((function(r){var n,i,a,o,s,u;for(n=r.source,i=r.offset,o=0,s=a=e._handleWhiteSpace(r);o<t.length&&s<n.length&&t.charAt(o)===n.charAt(s);)o+=1,s+=1;return o===t.length?new ne(t,r.drop(s-i)):(u=a===n.length?"end of source":"`"+n.charAt(a)+"'",new ae("`"+t+"' expected but "+u+" found",r.drop(a-i)))}))}},{key:"regex",value:function(e){if("/^"!==e.toString().substring(0,2))throw"regex must start with `^' but "+e;return new se((function(t){var r,n,i,a;return r=t.source,n=t.offset,null!==(i=e.exec(r.substring(n,r.length)))?new ne(i[0],t.drop(i[0].length)):(a=n===r.length?"end of source":"`"+r.charAt(n)+"'",new ae("string matching regex "+e+" expected but "+a+" found",t))}))}},{key:"regexLiteral",value:function(t){if("/^"!==t.toString().substring(0,2))throw"regex must start with `^' but "+t;return new se((function(r){var n,i,a,o,s;return n=r.source,i=r.offset,a=e._handleWhiteSpace(r),null!==(o=t.exec(n.substring(a,n.length)))?new ne(o[0],r.drop(a+o[0].length-i)):(s=a===n.length?"end of source":"`"+n.charAt(a)+"'",new ae("string matching regex "+t+" expected but "+s+" found",r.drop(a-i)))}))}},{key:"eos",value:function(){return new se((function(t){var r,n;return r=t.source,t.offset,n=e._handleWhiteSpace(t),r.length===n?new ne("",t):new ae("end of source expected but `"+r.charAt(n)+"' found",t)}))}},{key:"commit",value:function(e){return new se((function(t){var r=e()(t);return(new V).Case(ne,(function(e){return r})).Case(oe,(function(e){return r})).Case(ae,(function(e){return new oe(e[0],e[1])})).match(r)}))}},{key:"elem",value:function(t){return e.accept(t).named('"'+t+'"')}},{key:"accept",value:function(t){return e.acceptIf((function(e){return e===t}),(function(e){return"`"+t+"' expected but `"+e+"' found"}))}},{key:"acceptIf",value:function(e,t){return new se((function(r){return e(r.first())?new ne(r.first(),r.rest()):new ae(t(r.first()),r)}))}},{key:"failure",value:function(e){return new se((function(t){return new ae(e,t)}))}},{key:"err",value:function(e){return new se((function(t){return new oe(e,t)}))}},{key:"success",value:function(e){return new se((function(t){return new ne(e,t)}))}},{key:"log",value:function(e,t){return new se((function(r){console.log("trying "+t+" at "+r);var n=e().apply(r);return console.log(t+" --\x3e "+n),n}))}},{key:"rep",value:function(t){var r=e.success(B.empty);return e.rep1(t).or((function(){return r}))}},{key:"rep1",value:function(e){return new se((function(t){var r,n,i,a;if(r=[],n=t,(a=(i=e()).apply(t))instanceof ne){for(;a instanceof ne;)r.push(a.result),n=a.next,a=i.apply(n);return new ne(B.fromArray(r),n)}return a}))}},{key:"repN",value:function(t,r){return 0===t?e.success(FP.List.empty):new se((function(e){var n,i,a,o;for(n=[],i=e,o=(a=r()).apply(i);o instanceof ne;){if(n.push(o.result),i=o.next,t===n.length)return new ne(B.fromArray(n),i);o=a.apply(i)}return o}))}},{key:"repsep",value:function(t,r){var n=e.success(B.empty);return e.rep1sep(t,r).or((function(){return n}))}},{key:"rep1sep",value:function(t,r){return t().and(e.rep(r().andr(t))).to((function(e){return new B.Cons(e.head,e.tail)}))}},{key:"chainl1",value:function(t,r,n){return t().and(e.rep(n().and(r))).to((function(e){return e.tail.foldLeft(e.head,(function(e,t){return t.head(e,t.tail)}))}))}},{key:"chainr1",value:function(e,t,r,n){return e().and(this.rep(t().and(e))).to((function(e){return new B.Cons(new j(r,e.head),e.tail).foldRight(n,(function(e,t){return e.head(e.tail,t)}))}))}},{key:"opt",value:function(t){return t().to((function(e){return new b.Some(e)})).or((function(){return e.success(b.empty)}))}},{key:"not",value:function(e){return new se((function(t){return e().apply(t).successful?new ae("Expected failure",t):new ne(b.empty,t)}))}},{key:"guard",value:function(e){return new se((function(t){var r=e().apply(t);return r.successful?new ne(r.result,t):r}))}},{key:"mkList",value:function(e){return new B.Cons(e.head,e.tail)}},{key:"fun",value:function(e){return function(){return e}}},{key:"lazyParser",value:function(t){var r,n;return t instanceof String||"string"==typeof t?(r=e.literal(t),function(){return r}):t instanceof Function?t:t instanceof Object?t instanceof se?function(){return t}:t instanceof RegExp?(n=e.regexLiteral(t),function(){return n}):e.err("unhandlable type"):e.err("unhandlable type")}},{key:"seq",value:function(){var t,r,n;if(0===(t=arguments.length))return e.err("at least one element must be specified");for(r=e.lazyParser(arguments[0])(),n=1;n<t;)r=r.and(e.lazyParser(arguments[n])),n+=1;return r}},{key:"or",value:function(){var t,r,n;if(0===(t=arguments.length))return e.err("at least one element must be specified");for(r=e.lazyParser(arguments[0])(),n=1;n<t;)r=r.or(e.lazyParser(arguments[n])),n+=1;return r}}]),e}(),re=function(){function e(){K(this,e)}return Y(e,[{key:"isEmpty",value:function(){return!this.successful}},{key:"getOrElse",value:function(e){return this.isEmpty?e():this.get()}}]),e}();te.ParseResult=re;var ne=function(e){z(r,e);var t=q(r);function r(e,n){var i;return K(this,r),(i=t.call(this)).result=e,i.next=n,i}return Y(r,[{key:"successful",get:function(){return!0}},{key:"map",value:function(e){return new r(e(this.result),this.next)}},{key:"mapPartial",value:function(e,t){try{return new r(e(this.result),this.next)}catch(e){if(e instanceof X)return new ae(t(this.result),this.next);throw e}}},{key:"flatMapWithNext",value:function(e){return e(this.result).apply(this.next)}},{key:"append",value:function(e){return this}},{key:"get",value:function(){return this.result}},{key:"toString",value:function(){return"["+this.next.pos()+"] parsed: "+this.result}}],[{key:"unapply",value:function(e){return new b.Some([e.result,e.next])}}]),r}(re);te.Success=ne;var ie=function(e){z(r,e);var t=q(r);function r(){return K(this,r),t.call(this)}return Y(r,[{key:"successful",get:function(){return!1}},{key:"_setLastNoSuccess",value:function(){var e=this.next.context;void 0!==e.lastNoSuccess&&this.next.pos().isLessThan(e.lastNoSuccess.next.pos())||(e.lastNoSuccess=this)}},{key:"map",value:function(e){return this}},{key:"mapPartial",value:function(e,t){return this}},{key:"flatMapWithNext",value:function(e){return this}},{key:"get",value:function(){return te.error("No result when parsing failed")}}]),r}(re);te.NoSuccess=ie;var ae=function(e){z(r,e);var t=q(r);function r(e,n){var i;return K(this,r),(i=t.call(this)).msg=e,i.next=n,i._setLastNoSuccess(),i}return Y(r,[{key:"append",value:function(e){var t=e();if(t instanceof ne)return t;if(t instanceof ie)return t.next.pos().isLessThan(this.next.pos())?this:t;throw new X(t)}},{key:"toString",value:function(){return"["+this.next.pos()+"] failure: "+this.msg+"\n\n"+this.next.pos().longString()}}],[{key:"unapply",value:function(e){return new b.Some([e.msg,e.next])}}]),r}(ie);te.Failure=ae;var oe=function(e){z(r,e);var t=q(r);function r(e,n){var i;return K(this,r),(i=t.call(this)).msg=e,i.next=n,i._setLastNoSuccess(),i}return Y(r,[{key:"append",value:function(e){return this}},{key:"toString",value:function(){return"["+this.next.pos()+"] error: "+this.msg+"\n\n"+this.next.pos().longString()}}],[{key:"unapply",value:function(e){return new b.Some([e.msg,e.next])}}]),r}(ie);te.ParseError=oe;var se=function(){function e(t){K(this,e),this.apply=t,this.name=""}return Y(e,[{key:"named",value:function(e){return this.name=e,this}},{key:"toString",value:function(){return"Parser ("+this.name+")"}},{key:"flatMap",value:function(t){var r=this;return new e((function(e){return r.apply(e).flatMapWithNext(t)}))}},{key:"map",value:function(t){var r=this;return new e((function(e){return r.apply(e).map(t)}))}},{key:"append",value:function(t){var r=this;return new e((function(e){return r.apply(e).append((function(){return t().apply(e)}))}))}},{key:"and",value:function(e){return this.flatMap((function(t){return e().map((function(e){return new j(t,e)}))})).named("~")}},{key:"andr",value:function(e){return this.flatMap((function(t){return e().map((function(e){return e}))})).named("~>")}},{key:"andl",value:function(e){return this.flatMap((function(t){return e().map((function(e){return t}))})).named("<~")}},{key:"or",value:function(e){return this.append(e).named("|")}},{key:"andOnce",value:function(e){var t=this;return new ue((function(){return t.flatMap((function(t){return te.commit(e).map((function(e){return new j(t,e)}))})).named("~!")}))}},{key:"longestOr",value:function(t){var r=this;return new e((function(e){var n,i;return n=r.apply(e),i=t()(e),n.successful?i.successful?i.next.pos().isLessThan(n.next.pos())?n:i:n:i.successful?i:n instanceof oe||i.next.pos().isLessThan(n.next.pos())?n:i})).named("|||")}},{key:"to",value:function(e){return this.map(e).named(this.toString()+"^^")}},{key:"ret",value:function(t){var r=this;return new e((function(e){return r.apply(e).map((function(e){return t()}))})).named(this.toString()+"^^^")}},{key:"toIfPossible",value:function(t,r){void 0===r&&(r=function(e){return"Constructor function not defined at "+e});var n=this;return new e((function(e){return n.apply(e).mapPartial(t,r)})).named(this.toString()+"^?")}},{key:"into",value:function(e){return this.flatMap(e)}},{key:"rep",value:function(){var e=this;return te.rep((function(){return e}))}},{key:"chain",value:function(e){var t,r;return t=this,r=function(){return t},te.chainl1(r,r,e)}},{key:"rep1",value:function(){var e=this;return te.rep1((function(){return e}))}},{key:"opt",value:function(){var e=this;return te.opt((function(){return e}))}}]),e}();te.Parser=se;var ue=function(e){z(r,e);var t=q(r);function r(e){return K(this,r),t.call(this,e)}return Y(r,[{key:"and",value:function(e){var t=this;return new r((function(){return t.flatMap((function(t){return te.commit(e).map((function(e){return j(t,e)}))}))})).named("~")}}]),r}(se);te.OnceParser=ue;var ce=r(45);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),e}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xe(e);if(t){var i=xe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ye(this,r)}}function ye(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ge=function e(){ve(this,e)},Me=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this,e,{},n)).textMmls=n,i.texClass=ce.TEXCLASS.ORD,i}return r}(ce.AbstractMmlNode);Me.defaults=ce.AbstractMmlNode.defaults,(ge.xypic=function(e){fe(r,e);var t=me(r);function r(e,n,i){var a;return ve(this,r),(a=t.call(this,e,i)).cmd=n,a}return pe(r,[{key:"kind",get:function(){return"xypic"}},{key:"toString",value:function(){return this.kind+"("+this.cmd+")"}}]),r}(Me)).defaults=Me.defaults,ge.xypic.newdir=function(e){fe(r,e);var t=me(r);function r(e,n,i){var a;return ve(this,r),(a=t.call(this,e,i)).cmd=n,a}return pe(r,[{key:"kind",get:function(){return"xypic-newdir"}},{key:"toString",value:function(){return this.kind+"("+this.cmd+")"}}]),r}(Me),ge.xypic.newdir.defaults=Me.defaults,ge.xypic.includegraphics=function(e){fe(r,e);var t=me(r);function r(e,n,i){var a;return ve(this,r),(a=t.call(this,e,i)).cmd=n,a}return pe(r,[{key:"kind",get:function(){return"xypic-includegraphics"}},{key:"toString",value:function(){return this.kind+"("+this.cmd+")"}}]),r}(Me),ge.xypic.includegraphics.defaults=Me.defaults,ge.PosDecor=function(){function e(t,r){ve(this,e),this.pos=t,this.decor=r}return pe(e,[{key:"toString",value:function(){return this.pos.toString()+" "+this.decor}}]),e}(),(ge.Pos=function e(){ve(this,e)}).Coord=function(){function e(t,r){ve(this,e),this.coord=t,this.pos2s=r}return pe(e,[{key:"toString",value:function(){return this.coord.toString()+" "+this.pos2s.mkString(" ")}}]),e}(),ge.Pos.Plus=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"+("+this.coord+")"}}]),e}(),ge.Pos.Minus=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"-("+this.coord+")"}}]),e}(),ge.Pos.Skew=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"!("+this.coord+")"}}]),e}(),ge.Pos.Cover=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return".("+this.coord+")"}}]),e}(),ge.Pos.Then=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return",("+this.coord+")"}}]),e}(),ge.Pos.SwapPAndC=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return";("+this.coord+")"}}]),e}(),ge.Pos.SetBase=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return":("+this.coord+")"}}]),e}(),ge.Pos.SetYBase=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"::("+this.coord+")"}}]),e}(),ge.Pos.ConnectObject=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"**("+this.object+")"}}]),e}(),ge.Pos.DropObject=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"*("+this.object+")"}}]),e}(),ge.Pos.Place=function(){function e(t){ve(this,e),this.place=t}return pe(e,[{key:"toString",value:function(){return"?("+this.place+")"}}]),e}(),ge.Pos.PushCoord=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"@+("+this.coord+")"}}]),e}(),ge.Pos.EvalCoordThenPop=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"@-("+this.coord+")"}}]),e}(),ge.Pos.LoadStack=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"@=("+this.coord+")"}}]),e}(),ge.Pos.DoCoord=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"@@("+this.coord+")"}}]),e}(),ge.Pos.InitStack=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"@i"}}]),e}(),ge.Pos.EnterFrame=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"@("}}]),e}(),ge.Pos.LeaveFrame=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"@)"}}]),e}(),ge.Pos.SavePos=function(){function e(t){ve(this,e),this.id=t}return pe(e,[{key:"toString",value:function(){return'="'+this.id+'"'}}]),e}(),ge.Pos.SaveMacro=function(){function e(t,r){ve(this,e),this.macro=t,this.id=r}return pe(e,[{key:"toString",value:function(){return"=("+this.macro+' "'+this.id+'")'}}]),e}(),ge.Pos.SaveBase=function(){function e(t){ve(this,e),this.id=t}return pe(e,[{key:"toString",value:function(){return'=:"'+this.id+'"'}}]),e}(),ge.Pos.SaveStack=function(){function e(t){ve(this,e),this.id=t}return pe(e,[{key:"toString",value:function(){return'=@"'+this.id+'"'}}]),e}(),(ge.Coord=function e(){ve(this,e)}).Vector=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"toString",value:function(){return this.vector.toString()}}]),e}(),ge.Coord.C=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"c"}}]),e}(),ge.Coord.P=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"p"}}]),e}(),ge.Coord.X=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"x"}}]),e}(),ge.Coord.Y=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"y"}}]),e}(),ge.Coord.Id=function(){function e(t){ve(this,e),this.id=t}return pe(e,[{key:"toString",value:function(){return'"'+this.id+'"'}}]),e}(),ge.Coord.Group=function(){function e(t){ve(this,e),this.posDecor=t}return pe(e,[{key:"toString",value:function(){return"{"+this.posDecor+"}"}}]),e}(),ge.Coord.StackPosition=function(){function e(t){ve(this,e),this.number=t}return pe(e,[{key:"toString",value:function(){return"s{"+this.number+"}"}}]),e}(),ge.Coord.DeltaRowColumn=function(){function e(t,r,n){ve(this,e),this.prefix=t,this.dr=r,this.dc=n}return pe(e,[{key:"toString",value:function(){return"["+(""===this.prefix?"":'"'+this.prefix+'"')+this.dr+","+this.dc+"]"}}]),e}(),ge.Coord.Hops=function(){function e(t,r){ve(this,e),this.prefix=t,this.hops=r}return pe(e,[{key:"toString",value:function(){return"["+(""===this.prefix?"":'"'+this.prefix+'"')+this.hops.mkString("")+"]"}}]),e}(),ge.Coord.HopsWithPlace=function(){function e(t,r,n){ve(this,e),this.prefix=t,this.hops=r,this.place=n}return pe(e,[{key:"toString",value:function(){return"["+(""===this.prefix?"":'"'+this.prefix+'"')+this.hops.mkString("")+this.place+"]"}}]),e}(),(ge.Vector=function e(){ve(this,e)}).InCurBase=function(){function e(t,r){ve(this,e),this.x=t,this.y=r}return pe(e,[{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}}]),e}(),ge.Vector.Abs=function(){function e(t,r){ve(this,e),this.x=t,this.y=r}return pe(e,[{key:"toString",value:function(){return"<"+this.x+", "+this.y+">"}}]),e}(),ge.Vector.Angle=function(){function e(t){ve(this,e),this.degree=t}return pe(e,[{key:"toString",value:function(){return"a("+this.degree+")"}}]),e}(),ge.Vector.Dir=function(){function e(t,r){ve(this,e),this.dir=t,this.dimen=r}return pe(e,[{key:"toString",value:function(){return"/"+this.dir+" "+this.dimen+"/"}}]),e}(),ge.Vector.Corner=function(){function e(t,r){ve(this,e),this.corner=t,this.factor=r}return pe(e,[{key:"toString",value:function(){return this.corner.toString()+"("+this.factor+")"}}]),e}(),(ge.Corner=function e(){ve(this,e)}).L=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"L"}}]),e}(),ge.Corner.R=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"R"}}]),e}(),ge.Corner.D=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"D"}}]),e}(),ge.Corner.U=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"U"}}]),e}(),ge.Corner.CL=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"CL"}}]),e}(),ge.Corner.CR=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"CR"}}]),e}(),ge.Corner.CD=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"CD"}}]),e}(),ge.Corner.CU=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"CU"}}]),e}(),ge.Corner.LD=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"LD"}}]),e}(),ge.Corner.RD=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"RD"}}]),e}(),ge.Corner.LU=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"LU"}}]),e}(),ge.Corner.RU=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"RU"}}]),e}(),ge.Corner.NearestEdgePoint=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"E"}}]),e}(),ge.Corner.PropEdgePoint=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"P"}}]),e}(),ge.Corner.Axis=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"A"}}]),e}(),(ge.Place=function(){function e(t,r,n,i){ve(this,e),this.shaveP=t,this.shaveC=r,this.factor=n,this.slide=i}return pe(e,[{key:"compound",value:function(e){return new ge.Place(this.shaveP+e.shaveP,this.shaveC+e.shaveC,void 0===e.factor?this.factor:e.factor,e.slide)}},{key:"toString",value:function(){for(var e="",t=0;t<this.shaveP;t++)e+="<";for(var r=0;r<this.shaveC;r++)e+=">";return void 0!==this.factor&&(e+="("+this.factor+")"),this.slide.dimen.foreach((function(t){e+="/"+t+"/"})),e}}]),e}()).Factor=function(){function e(t){ve(this,e),this.factor=t}return pe(e,[{key:"isIntercept",get:function(){return!1}},{key:"toString",value:function(){return this.factor.toString()}}]),e}(),ge.Place.Intercept=function(){function e(t){ve(this,e),this.pos=t}return pe(e,[{key:"isIntercept",get:function(){return!0}},{key:"toString",value:function(){return"!{"+this.pos+"}"}}]),e}(),ge.Slide=function(){function e(t){ve(this,e),this.dimen=t}return pe(e,[{key:"toString",value:function(){return this.dimen.getOrElse("")}}]),e}(),ge.Object=function(){function e(t,r){ve(this,e),this.modifiers=t,this.object=r}return pe(e,[{key:"dirVariant",value:function(){return this.object.dirVariant()}},{key:"dirMain",value:function(){return this.object.dirMain()}},{key:"isDir",value:function(){return this.object.isDir()}},{key:"toString",value:function(){return this.modifiers.mkString()+this.object.toString()}}]),e}(),(ge.ObjectBox=function(){function e(){ve(this,e)}return pe(e,[{key:"isEmpty",get:function(){return!1}},{key:"dirVariant",value:function(){}},{key:"dirMain",value:function(){}},{key:"isDir",value:function(){return!1}}]),e}()).Text=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).math=e,n}return pe(r,[{key:"toString",value:function(){return"{"+this.math.toString()+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Empty=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"isEmpty",get:function(){return!0}},{key:"toString",value:function(){return"{}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Xymatrix=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).xymatrix=e,n}return pe(r,[{key:"toString",value:function(){return this.xymatrix.toString()}}]),r}(ge.ObjectBox),ge.ObjectBox.Txt=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).width=e,i.textObject=n,i}return pe(r,[{key:"toString",value:function(){return"\\txt"+this.width+"{"+this.textObject.toString()+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Txt.Width=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return r}(ge.ObjectBox),ge.ObjectBox.Txt.Width.Vector=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).vector=e,n}return pe(r,[{key:"toString",value:function(){return this.vector.toString()}}]),r}(ge.ObjectBox),ge.ObjectBox.Txt.Width.Default=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return""}}]),r}(ge.ObjectBox),ge.ObjectBox.WrapUpObject=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).object=e,n}return pe(r,[{key:"toString",value:function(){return"\\object"+this.object.toString()}}]),r}(ge.ObjectBox),ge.ObjectBox.CompositeObject=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).objects=e,n}return pe(r,[{key:"toString",value:function(){return"\\composite{"+this.objects.mkString(" * ")+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Xybox=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).posDecor=e,n}return pe(r,[{key:"toString",value:function(){return"\\xybox{"+this.posDecor.toString()+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Cir=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).radius=e,i.cir=n,i}return pe(r,[{key:"toString",value:function(){return"\\cir"+this.radius+"{"+this.cir+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Cir.Radius=function e(){ve(this,e)},ge.ObjectBox.Cir.Radius.Vector=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"toString",value:function(){return this.vector.toString()}}]),e}(),ge.ObjectBox.Cir.Radius.Default=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return""}}]),e}(),ge.ObjectBox.Cir.Cir=function e(){ve(this,e)},ge.ObjectBox.Cir.Cir.Segment=function(){function e(t,r,n){ve(this,e),this.startDiag=t,this.orient=r,this.endDiag=n}return pe(e,[{key:"toString",value:function(){return this.startDiag.toString()+this.orient+this.endDiag}}]),e}(),ge.ObjectBox.Cir.Cir.Full=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return""}}]),e}(),ge.ObjectBox.Dir=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).variant=e,i.main=n,i}return pe(r,[{key:"dirVariant",value:function(){return this.variant}},{key:"dirMain",value:function(){return this.main}},{key:"isDir",value:function(){return!0}},{key:"toString",value:function(){return"\\dir"+this.variant+"{"+this.main+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Curve=function(e){fe(r,e);var t=me(r);function r(e,n,i){var a;return ve(this,r),(a=t.call(this)).modifiers=e,a.objects=n,a.poslist=i,a}return pe(r,[{key:"dirVariant",value:function(){return""}},{key:"dirMain",value:function(){return"-"}},{key:"isDir",value:function(){return!1}},{key:"toString",value:function(){return"\\curve"+this.modifiers.mkString("")+"{"+this.objects.mkString(" ")+" "+this.poslist.mkString("&")+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Curve.Modifier=function e(){ve(this,e)},ge.ObjectBox.Curve.Modifier.p=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~p"}}]),e}(),ge.ObjectBox.Curve.Modifier.P=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~P"}}]),e}(),ge.ObjectBox.Curve.Modifier.l=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~l"}}]),e}(),ge.ObjectBox.Curve.Modifier.L=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~L"}}]),e}(),ge.ObjectBox.Curve.Modifier.c=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~c"}}]),e}(),ge.ObjectBox.Curve.Modifier.C=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~C"}}]),e}(),ge.ObjectBox.Curve.Modifier.pc=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~pc"}}]),e}(),ge.ObjectBox.Curve.Modifier.pC=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~pC"}}]),e}(),ge.ObjectBox.Curve.Modifier.Pc=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~Pc"}}]),e}(),ge.ObjectBox.Curve.Modifier.PC=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~PC"}}]),e}(),ge.ObjectBox.Curve.Modifier.lc=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~lc"}}]),e}(),ge.ObjectBox.Curve.Modifier.lC=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~lC"}}]),e}(),ge.ObjectBox.Curve.Modifier.Lc=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~Lc"}}]),e}(),ge.ObjectBox.Curve.Modifier.LC=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~LC"}}]),e}(),ge.ObjectBox.Curve.Modifier.cC=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~cC"}}]),e}(),ge.ObjectBox.Curve.Object=function e(){ve(this,e)},ge.ObjectBox.Curve.Object.Drop=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"~*"+this.object}}]),e}(),ge.ObjectBox.Curve.Object.Connect=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"~**"+this.object}}]),e}(),ge.ObjectBox.Curve.PosList=function e(){ve(this,e)},ge.ObjectBox.Curve.PosList.CurPos=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return""}}]),e}(),ge.ObjectBox.Curve.PosList.Pos=function(){function e(t){ve(this,e),this.pos=t}return pe(e,[{key:"toString",value:function(){return this.pos.toString()}}]),e}(),ge.ObjectBox.Curve.PosList.AddStack=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~@"}}]),e}(),(ge.Modifier=function e(){ve(this,e)}).Vector=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).vector=e,n}return pe(r,[{key:"toString",value:function(){return"!"+this.vector}}]),r}(ge.Modifier),ge.Modifier.RestoreOriginalRefPoint=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"!"}}]),r}(ge.Modifier),ge.Modifier.AddOp=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).op=e,i.size=n,i}return pe(r,[{key:"toString",value:function(){return this.op.toString()+" "+this.size}}]),r}(ge.Modifier),ge.Modifier.AddOp.Grow=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"+"}}]),e}(),ge.Modifier.AddOp.Shrink=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"-"}}]),e}(),ge.Modifier.AddOp.Set=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"="}}]),e}(),ge.Modifier.AddOp.GrowTo=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"+="}}]),e}(),ge.Modifier.AddOp.ShrinkTo=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"-="}}]),e}(),ge.Modifier.AddOp.VactorSize=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"isDefault",get:function(){return!1}},{key:"toString",value:function(){return this.vector.toString()}}]),e}(),ge.Modifier.AddOp.DefaultSize=function(){function e(){ve(this,e)}return pe(e,[{key:"isDefault",get:function(){return!0}},{key:"toString",value:function(){return""}}]),e}(),ge.Modifier.Shape=function e(){ve(this,e)},ge.Modifier.Shape.Point=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[.]"}}]),r}(ge.Modifier),ge.Modifier.Shape.Rect=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[]"}}]),r}(ge.Modifier),ge.Modifier.Shape.Alphabets=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).alphabets=e,n}return pe(r,[{key:"toString",value:function(){return"["+this.alphabets+"]"}}]),r}(ge.Modifier),ge.Modifier.Shape.DefineShape=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).shape=e,n}return pe(r,[{key:"toString",value:function(){return"["+this.shape+"]"}}]),r}(ge.Modifier),ge.Modifier.Shape.Circle=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[o]"}}]),r}(ge.Modifier),ge.Modifier.Shape.L=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[l]"}}]),r}(ge.Modifier),ge.Modifier.Shape.R=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[r]"}}]),r}(ge.Modifier),ge.Modifier.Shape.U=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[u]"}}]),r}(ge.Modifier),ge.Modifier.Shape.D=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[d]"}}]),r}(ge.Modifier),ge.Modifier.Shape.C=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"[c]"}}]),r}(ge.Modifier),ge.Modifier.Shape.ChangeColor=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).colorName=e,n}return pe(r,[{key:"toString",value:function(){return"["+this.colorName+"]"}}]),r}(ge.Modifier),ge.Modifier.Shape.CompositeModifiers=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).modifiers=e,n}return pe(r,[{key:"toString",value:function(){return this.modifiers.mkString("")}}]),r}(ge.Modifier),ge.Modifier.Shape.Frame=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).main=e,i.options=n,i}return pe(r,[{key:"toString",value:function(){return"[F"+this.main+this.options.mkString("")+"]"}}]),r}(ge.Modifier),ge.Modifier.Shape.Frame.Radius=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"toString",value:function(){return":"+this.vector}}]),e}(),ge.Modifier.Shape.Frame.Color=function(){function e(t){ve(this,e),this.colorName=t}return pe(e,[{key:"toString",value:function(){return":"+this.colorName}}]),e}(),ge.Modifier.Invisible=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"i"}}]),r}(ge.Modifier),ge.Modifier.Hidden=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"h"}}]),r}(ge.Modifier),ge.Modifier.Direction=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).direction=e,n}return pe(r,[{key:"toString",value:function(){return this.direction.toString()}}]),r}(ge.Modifier),(ge.Direction=function e(){ve(this,e)}).Compound=function(){function e(t,r){ve(this,e),this.dir=t,this.rots=r}return pe(e,[{key:"toString",value:function(){return this.dir.toString()+this.rots.mkString()}}]),e}(),ge.Direction.Diag=function(){function e(t){ve(this,e),this.diag=t}return pe(e,[{key:"toString",value:function(){return this.diag.toString()}}]),e}(),ge.Direction.Vector=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"toString",value:function(){return"v"+this.vector.toString()}}]),e}(),ge.Direction.ConstructVector=function(){function e(t){ve(this,e),this.posDecor=t}return pe(e,[{key:"toString",value:function(){return"q{"+this.posDecor.toString()+"}"}}]),e}(),ge.Direction.RotVector=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"toString",value:function(){return":"+this.vector.toString()}}]),e}(),ge.Direction.RotAntiCW=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"_"}}]),e}(),ge.Direction.RotCW=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"^"}}]),e}(),(ge.Diag=function e(){ve(this,e)}).Default=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return""}}]),e}(),ge.Diag.Angle=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return this.symbol}}]),e}(),ge.Diag.LD=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"ld"}},{key:"ang",get:function(){return-3*Math.PI/4}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.RD:new ge.Diag.LU}}]),r}(ge.Diag.Angle),ge.Diag.RD=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"rd"}},{key:"ang",get:function(){return-Math.PI/4}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.RU:new ge.Diag.LD}}]),r}(ge.Diag.Angle),ge.Diag.LU=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"lu"}},{key:"ang",get:function(){return 3*Math.PI/4}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.LD:new ge.Diag.RU}}]),r}(ge.Diag.Angle),ge.Diag.RU=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"ru"}},{key:"ang",get:function(){return Math.PI/4}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.LU:new ge.Diag.RD}}]),r}(ge.Diag.Angle),ge.Diag.L=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"l"}},{key:"ang",get:function(){return Math.PI}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.D:new ge.Diag.U}}]),r}(ge.Diag.Angle),ge.Diag.R=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"r"}},{key:"ang",get:function(){return 0}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.U:new ge.Diag.D}}]),r}(ge.Diag.Angle),ge.Diag.D=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"d"}},{key:"ang",get:function(){return-Math.PI/2}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.R:new ge.Diag.L}}]),r}(ge.Diag.Angle),ge.Diag.U=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"symbol",get:function(){return"u"}},{key:"ang",get:function(){return Math.PI/2}},{key:"turn",value:function(e){return"^"===e?new ge.Diag.L:new ge.Diag.R}}]),r}(ge.Diag.Angle),ge.ObjectBox.Frame=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).radius=e,i.main=n,i}return pe(r,[{key:"toString",value:function(){return"\\frm"+this.radius+"{"+this.main+"}"}}]),r}(ge.ObjectBox),ge.ObjectBox.Frame.Radius=function e(){ve(this,e)},ge.ObjectBox.Frame.Radius.Vector=function(){function e(t){ve(this,e),this.vector=t}return pe(e,[{key:"toString",value:function(){return this.vector.toString()}}]),e}(),ge.ObjectBox.Frame.Radius.Default=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return""}}]),e}(),ge.Decor=function(){function e(t){ve(this,e),this.commands=t}return pe(e,[{key:"toString",value:function(){return this.commands.mkString(" ")}}]),e}(),(ge.Command=function e(){ve(this,e)}).Save=function(){function e(t){ve(this,e),this.pos=t}return pe(e,[{key:"toString",value:function(){return"\\save "+this.pos}}]),e}(),ge.Command.Restore=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"\\restore"}}]),e}(),ge.Command.Pos=function(){function e(t){ve(this,e),this.pos=t}return pe(e,[{key:"toString",value:function(){return"\\POS "+this.pos}}]),e}(),ge.Command.AfterPos=function(){function e(t,r){ve(this,e),this.decor=t,this.pos=r}return pe(e,[{key:"toString",value:function(){return"\\afterPOS{"+this.decor+"} "+this.pos}}]),e}(),ge.Command.Drop=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"\\drop "+this.object}}]),e}(),ge.Command.Connect=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"\\connect "+this.object}}]),e}(),ge.Command.Relax=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"\\relax"}}]),e}(),ge.Command.Ignore=function(){function e(t,r){ve(this,e),this.pos=t,this.decor=r}return pe(e,[{key:"toString",value:function(){return"\\ignore{"+this.pos+" "+this.decor+"}"}}]),e}(),ge.Command.ShowAST=function(){function e(t,r){ve(this,e),this.pos=t,this.decor=r}return pe(e,[{key:"toString",value:function(){return"\\xyshowAST{"+this.pos+" "+this.decor+"}"}}]),e}(),ge.Command.Path=function(){function e(t){ve(this,e),this.path=t}return pe(e,[{key:"toString",value:function(){return"\\PATH "+this.path}}]),e}(),ge.Command.AfterPath=function(){function e(t,r){ve(this,e),this.decor=t,this.path=r}return pe(e,[{key:"toString",value:function(){return"\\afterPATH{"+this.decor+"} "+this.path}}]),e}(),ge.Command.Path.Path=function(){function e(t){ve(this,e),this.pathElements=t}return pe(e,[{key:"toString",value:function(){return this.pathElements.mkString("[",", ","]")}}]),e}(),ge.Command.Path.SetBeforeAction=function(){function e(t){ve(this,e),this.posDecor=t}return pe(e,[{key:"toString",value:function(){return"~={"+this.posDecor+"}"}}]),e}(),ge.Command.Path.SetAfterAction=function(){function e(t){ve(this,e),this.posDecor=t}return pe(e,[{key:"toString",value:function(){return"~/{"+this.posDecor+"}"}}]),e}(),ge.Command.Path.AddLabelNextSegmentOnly=function(){function e(t){ve(this,e),this.labels=t}return pe(e,[{key:"toString",value:function(){return"~<{"+this.labels+"}"}}]),e}(),ge.Command.Path.AddLabelLastSegmentOnly=function(){function e(t){ve(this,e),this.labels=t}return pe(e,[{key:"toString",value:function(){return"~>{"+this.labels+"}"}}]),e}(),ge.Command.Path.AddLabelEverySegment=function(){function e(t){ve(this,e),this.labels=t}return pe(e,[{key:"toString",value:function(){return"~+{"+this.labels+"}"}}]),e}(),ge.Command.Path.StraightSegment=function(){function e(t){ve(this,e),this.segment=t}return pe(e,[{key:"toString",value:function(){return"'"+this.segment}}]),e}(),ge.Command.Path.TurningSegment=function(){function e(t,r){ve(this,e),this.turn=t,this.segment=r}return pe(e,[{key:"toString",value:function(){return"`"+this.turn+" "+this.segment}}]),e}(),ge.Command.Path.LastSegment=function(){function e(t){ve(this,e),this.segment=t}return pe(e,[{key:"toString",value:function(){return this.segment.toString()}}]),e}(),ge.Command.Path.Turn=function e(){ve(this,e)},ge.Command.Path.Turn.Diag=function(){function e(t,r){ve(this,e),this.diag=t,this.radius=r}return pe(e,[{key:"toString",value:function(){return this.diag.toString()+" "+this.radius}}]),e}(),ge.Command.Path.Turn.Cir=function(){function e(t,r){ve(this,e),this.cir=t,this.radius=r}return pe(e,[{key:"toString",value:function(){return this.cir.toString()+" "+this.radius}}]),e}(),ge.Command.Path.TurnRadius=function e(){ve(this,e)},ge.Command.Path.TurnRadius.Default=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return""}}]),e}(),ge.Command.Path.TurnRadius.Dimen=function(){function e(t){ve(this,e),this.dimen=t}return pe(e,[{key:"toString",value:function(){return"/"+this.dimen}}]),e}(),ge.Command.Path.Segment=function(){function e(t,r,n){ve(this,e),this.pos=t,this.slide=r,this.labels=n}return pe(e,[{key:"toString",value:function(){return this.pos.toString()+" "+this.slide+" "+this.labels}}]),e}(),ge.Command.Path.Labels=function(){function e(t){ve(this,e),this.labels=t}return pe(e,[{key:"toString",value:function(){return this.labels.mkString(" ")}}]),e}(),ge.Command.Path.Label=function e(t,r,n){ve(this,e),this.anchor=t,this.it=r,this.aliasOption=n},ge.Command.Path.Label.Above=function(e){fe(r,e);var t=me(r);function r(e,n,i){return ve(this,r),t.call(this,e,n,i)}return pe(r,[{key:"toString",value:function(){return"^("+this.anchor+" "+this.it+" "+this.aliasOption+")"}}]),r}(ge.Command.Path.Label),ge.Command.Path.Label.Below=function(e){fe(r,e);var t=me(r);function r(e,n,i){return ve(this,r),t.call(this,e,n,i)}return pe(r,[{key:"toString",value:function(){return"_("+this.anchor+" "+this.it+" "+this.aliasOption+")"}}]),r}(ge.Command.Path.Label),ge.Command.Path.Label.At=function(e){fe(r,e);var t=me(r);function r(e,n,i){return ve(this,r),t.call(this,e,n,i)}return pe(r,[{key:"toString",value:function(){return"|("+this.anchor+" "+this.it+" "+this.aliasOption+")"}}]),r}(ge.Command.Path.Label),ge.Command.Ar=function(){function e(t,r){ve(this,e),this.forms=t,this.path=r}return pe(e,[{key:"toString",value:function(){return"\\ar "+this.forms.mkString(" ")+" "+this.path}}]),e}(),ge.Command.Ar.Form=function e(){ve(this,e)},ge.Command.Ar.Form.BuildArrow=function(e){fe(r,e);var t=me(r);function r(e,n,i,a){var o;return ve(this,r),(o=t.call(this)).variant=e,o.tailTip=n,o.stemConn=i,o.headTip=a,o}return pe(r,[{key:"toString",value:function(){return"@"+this.variant+"{"+this.tailTip.toString()+", "+this.stemConn.toString()+", "+this.headTip.toString()+"}"}}]),r}(ge.Command.Ar.Form),ge.Command.Ar.Form.ChangeVariant=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).variant=e,n}return pe(r,[{key:"toString",value:function(){return"@"+this.variant}}]),r}(ge.Command.Ar.Form),ge.Command.Ar.Form.Tip=function e(){ve(this,e)},ge.Command.Ar.Form.Tip.Tipchars=function(){function e(t){ve(this,e),this.tipchars=t}return pe(e,[{key:"toString",value:function(){return this.tipchars}}]),e}(),ge.Command.Ar.Form.Tip.Object=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"*"+this.object}}]),e}(),ge.Command.Ar.Form.Tip.Dir=function(){function e(t){ve(this,e),this.dir=t}return pe(e,[{key:"toString",value:function(){return this.dir}}]),e}(),ge.Command.Ar.Form.Conn=function e(){ve(this,e)},ge.Command.Ar.Form.Conn.Connchars=function(){function e(t){ve(this,e),this.connchars=t}return pe(e,[{key:"toString",value:function(){return this.connchars}}]),e}(),ge.Command.Ar.Form.Conn.Object=function(){function e(t){ve(this,e),this.object=t}return pe(e,[{key:"toString",value:function(){return"*"+this.object}}]),e}(),ge.Command.Ar.Form.Conn.Dir=function(){function e(t){ve(this,e),this.dir=t}return pe(e,[{key:"toString",value:function(){return this.dir}}]),e}(),ge.Command.Ar.Form.ChangeStem=function(){function e(t){ve(this,e),this.connchar=t}return pe(e,[{key:"toString",value:function(){return"@"+this.connchar}}]),e}(),ge.Command.Ar.Form.DashArrowStem=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"@!"}}]),e}(),ge.Command.Ar.Form.CurveArrow=function(){function e(t,r){ve(this,e),this.direction=t,this.dist=r}return pe(e,[{key:"toString",value:function(){return"@/"+this.direction+" "+this.dist+"/"}}]),e}(),ge.Command.Ar.Form.CurveFitToDirection=function(){function e(t,r){ve(this,e),this.outDirection=t,this.inDirection=r}return pe(e,[{key:"toString",value:function(){return"@("+this.outDirection+","+this.inDirection+")"}}]),e}(),ge.Command.Ar.Form.CurveWithControlPoints=function(){function e(t){ve(this,e),this.coord=t}return pe(e,[{key:"toString",value:function(){return"@`{"+this.coord+"}"}}]),e}(),ge.Command.Ar.Form.AddShape=function(){function e(t){ve(this,e),this.shape=t}return pe(e,[{key:"toString",value:function(){return"@["+this.shape+"]"}}]),e}(),ge.Command.Ar.Form.AddModifiers=function(){function e(t){ve(this,e),this.modifiers=t}return pe(e,[{key:"toString",value:function(){return"@*{"+this.modifiers.mkString(" ")+"}"}}]),e}(),ge.Command.Ar.Form.Slide=function(){function e(t){ve(this,e),this.slideDimen=t}return pe(e,[{key:"toString",value:function(){return"@<"+this.slideDimen+">"}}]),e}(),ge.Command.Ar.Form.LabelAt=function(){function e(t,r){ve(this,e),this.anchor=t,this.it=r}return pe(e,[{key:"toString",value:function(){return"|"+this.anchor+" "+this.it}}]),e}(),ge.Command.Ar.Form.LabelAbove=function(){function e(t,r){ve(this,e),this.anchor=t,this.it=r}return pe(e,[{key:"toString",value:function(){return"^"+this.anchor+" "+this.it}}]),e}(),ge.Command.Ar.Form.LabelBelow=function(){function e(t,r){ve(this,e),this.anchor=t,this.it=r}return pe(e,[{key:"toString",value:function(){return"_"+this.anchor+" "+this.it}}]),e}(),ge.Command.Ar.Form.ReverseAboveAndBelow=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"@?"}}]),e}(),ge.Command.Xymatrix=function(){function e(t,r){ve(this,e),this.setup=t,this.rows=r}return pe(e,[{key:"toString",value:function(){return"\\xymatrix"+this.setup+"{\n"+this.rows.mkString("","\\\\\n","")+"\n}"}}]),e}(),ge.Command.Xymatrix.Setup=function e(){ve(this,e)},ge.Command.Xymatrix.Setup.Prefix=function(){function e(t){ve(this,e),this.prefix=t}return pe(e,[{key:"toString",value:function(){return'"'+this.prefix+'"'}}]),e}(),ge.Command.Xymatrix.Setup.ChangeSpacing=function e(t,r){ve(this,e),this.addop=t,this.dimen=r},ge.Command.Xymatrix.Setup.ChangeSpacing.Row=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"@R"+this.addop+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.ChangeSpacing),ge.Command.Xymatrix.Setup.ChangeSpacing.Column=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"@C"+this.addop+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.ChangeSpacing),ge.Command.Xymatrix.Setup.ChangeSpacing.RowAndColumn=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"@"+this.addop+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.ChangeSpacing),ge.Command.Xymatrix.Setup.PretendEntrySize=function e(t){ve(this,e),this.dimen=t},ge.Command.Xymatrix.Setup.PretendEntrySize.Height=function(e){fe(r,e);var t=me(r);function r(e){return ve(this,r),t.call(this,e)}return pe(r,[{key:"toString",value:function(){return"@!R="+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.PretendEntrySize),ge.Command.Xymatrix.Setup.PretendEntrySize.Width=function(e){fe(r,e);var t=me(r);function r(e){return ve(this,r),t.call(this,e)}return pe(r,[{key:"toString",value:function(){return"@!C="+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.PretendEntrySize),ge.Command.Xymatrix.Setup.PretendEntrySize.HeightAndWidth=function(e){fe(r,e);var t=me(r);function r(e){return ve(this,r),t.call(this,e)}return pe(r,[{key:"toString",value:function(){return"@!="+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.PretendEntrySize),ge.Command.Xymatrix.Setup.FixGrid=function e(){ve(this,e)},ge.Command.Xymatrix.Setup.FixGrid.Row=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"@!R"}}]),r}(ge.Command.Xymatrix.Setup.FixGrid),ge.Command.Xymatrix.Setup.FixGrid.Column=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"@!C"}}]),r}(ge.Command.Xymatrix.Setup.FixGrid),ge.Command.Xymatrix.Setup.FixGrid.RowAndColumn=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"@!"}}]),r}(ge.Command.Xymatrix.Setup.FixGrid),ge.Command.Xymatrix.Setup.AdjustEntrySize=function e(t,r){ve(this,e),this.addop=t,this.dimen=r},ge.Command.Xymatrix.Setup.AdjustEntrySize.Margin=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"@M"+this.addop+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.AdjustEntrySize),ge.Command.Xymatrix.Setup.AdjustEntrySize.Width=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"@W"+this.addop+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.AdjustEntrySize),ge.Command.Xymatrix.Setup.AdjustEntrySize.Height=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"@H"+this.addop+this.dimen}}]),r}(ge.Command.Xymatrix.Setup.AdjustEntrySize),ge.Command.Xymatrix.Setup.AdjustLabelSep=function(){function e(t,r){ve(this,e),this.addop=t,this.dimen=r}return pe(e,[{key:"toString",value:function(){return"@L"+this.addop+this.dimen}}]),e}(),ge.Command.Xymatrix.Setup.SetOrientation=function(){function e(t){ve(this,e),this.direction=t}return pe(e,[{key:"toString",value:function(){return"@"+this.direction}}]),e}(),ge.Command.Xymatrix.Setup.AddModifier=function(){function e(t){ve(this,e),this.modifier=t}return pe(e,[{key:"toString",value:function(){return"@*"+this.modifier}}]),e}(),ge.Command.Xymatrix.Row=function(){function e(t){ve(this,e),this.entries=t}return pe(e,[{key:"toString",value:function(){return this.entries.mkString(" & ")}}]),e}(),ge.Command.Xymatrix.Entry=function e(){ve(this,e)},ge.Command.Xymatrix.Entry.SimpleEntry=function(e){fe(r,e);var t=me(r);function r(e,n,i){var a;return ve(this,r),(a=t.call(this)).modifiers=e,a.objectbox=n,a.decor=i,a}return pe(r,[{key:"isEmpty",get:function(){return!1}},{key:"toString",value:function(){return this.modifiers.mkString("**{","","}")+" "+this.objectbox+" "+this.decor}}]),r}(ge.Command.Xymatrix.Entry),ge.Command.Xymatrix.Entry.ObjectEntry=function(e){fe(r,e);var t=me(r);function r(e,n,i){var a;return ve(this,r),(a=t.call(this)).object=e,a.pos=n,a.decor=i,a}return pe(r,[{key:"isEmpty",get:function(){return!1}},{key:"toString",value:function(){return"*"+this.object+" "+this.pos+" "+this.decor}}]),r}(ge.Command.Xymatrix.Entry),ge.Command.Xymatrix.Entry.EmptyEntry=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).decor=e,n}return pe(r,[{key:"isEmpty",get:function(){return!0}},{key:"toString",value:function(){return""+this.decor}}]),r}(ge.Command.Xymatrix.Entry),ge.Command.Twocell=function(){function e(t,r,n){ve(this,e),this.twocell=t,this.switches=r,this.arrow=n}return pe(e,[{key:"toString",value:function(){return this.twocell.toString()+this.switches.mkString("")+this.arrow}}]),e}(),ge.Command.Twocell.Hops2cell=function e(t,r){ve(this,e),this.hops=t,this.maybeDisplace=r},ge.Command.Twocell.Twocell=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"\\xtwocell["+this.hops+"]"+this.maybeDisplace.getOrElse("{}")}}]),r}(ge.Command.Twocell.Hops2cell),ge.Command.Twocell.UpperTwocell=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"\\xuppertwocell["+this.hops+"]"+this.maybeDisplace.getOrElse("{}")}}]),r}(ge.Command.Twocell.Hops2cell),ge.Command.Twocell.LowerTwocell=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"\\xlowertwocell["+this.hops+"]"+this.maybeDisplace.getOrElse("{}")}}]),r}(ge.Command.Twocell.Hops2cell),ge.Command.Twocell.CompositeMap=function(e){fe(r,e);var t=me(r);function r(e,n){return ve(this,r),t.call(this,e,n)}return pe(r,[{key:"toString",value:function(){return"\\xcompositemap["+this.hops+"]"+this.maybeDisplace.getOrElse("{}")}}]),r}(ge.Command.Twocell.Hops2cell),ge.Command.Twocell.Switch=function e(){ve(this,e)},ge.Command.Twocell.Switch.UpperLabel=function(){function e(t){ve(this,e),this.label=t}return pe(e,[{key:"toString",value:function(){return"^"+this.label}}]),e}(),ge.Command.Twocell.Switch.LowerLabel=function(){function e(t){ve(this,e),this.label=t}return pe(e,[{key:"toString",value:function(){return"_"+this.label}}]),e}(),ge.Command.Twocell.Switch.SetCurvature=function(){function e(t){ve(this,e),this.nudge=t}return pe(e,[{key:"toString",value:function(){return this.nudge.toString()}}]),e}(),ge.Command.Twocell.Switch.DoNotSetCurvedArrows=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"\\omit"}}]),e}(),ge.Command.Twocell.Switch.PlaceModMapObject=function(){function e(){ve(this,e)}return pe(e,[{key:"toString",value:function(){return"~!"}}]),e}(),ge.Command.Twocell.Switch.ChangeHeadTailObject=function(){function e(t,r){ve(this,e),this.what=t,this.object=r}return pe(e,[{key:"toString",value:function(){return"~"+this.what+"{"+this.object+"}"}}]),e}(),ge.Command.Twocell.Switch.ChangeCurveObject=function(){function e(t,r,n){ve(this,e),this.what=t,this.spacer=r,this.maybeObject=n}return pe(e,[{key:"toString",value:function(){return"~"+this.what+"{"+this.spacer+(this.maybeObject.isDefined?"~**"+this.maybeObject.get:"")+"}"}}]),e}(),ge.Command.Twocell.Label=function(){function e(t,r){ve(this,e),this.maybeNudge=t,this.labelObject=r}return pe(e,[{key:"toString",value:function(){return this.maybeNudge.toString()+this.labelObject}}]),e}(),ge.Command.Twocell.Nudge=function e(){ve(this,e)},ge.Command.Twocell.Nudge.Number=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).number=e,n}return pe(r,[{key:"toString",value:function(){return"<"+this.number+">"}}]),r}(ge.Command.Twocell.Nudge),ge.Command.Twocell.Nudge.Omit=function(e){fe(r,e);var t=me(r);function r(){return ve(this,r),t.call(this)}return pe(r,[{key:"toString",value:function(){return"<\\omit>"}}]),r}(ge.Command.Twocell.Nudge),ge.Command.Twocell.Arrow=function e(){ve(this,e)},ge.Command.Twocell.Arrow.WithOrientation=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).tok=e,i.labelObject=n,i}return pe(r,[{key:"toString",value:function(){return"{["+this.tok+"] "+this.labelObject+"}"}}]),r}(ge.Command.Twocell.Arrow),ge.Command.Twocell.Arrow.WithPosition=function(e){fe(r,e);var t=me(r);function r(e,n){var i;return ve(this,r),(i=t.call(this)).nudge=e,i.labelObject=n,i}return pe(r,[{key:"toString",value:function(){return"{["+this.nudge+"] "+this.labelObject+"}"}}]),r}(ge.Command.Twocell.Arrow),ge.Command.Newdir=function(){function e(t,r){ve(this,e),this.dirMain=t,this.compositeObject=r}return pe(e,[{key:"toString",value:function(){return"\\newdir{"+this.dirMain+"}{"+this.compositeObject+"}"}}]),e}(),ge.Pos.Xyimport=function e(){ve(this,e)},ge.Pos.Xyimport.TeXCommand=function(e){fe(r,e);var t=me(r);function r(e,n,i,a,o){var s;return ve(this,r),(s=t.call(this)).width=e,s.height=n,s.xOffset=i,s.yOffset=a,s.graphics=o,s}return pe(r,[{key:"toString",value:function(){return"\\xyimport("+this.width+", "+this.height+")("+this.xOffset+", "+this.yOffset+"){"+this.graphics+"}"}}]),r}(ge.Pos.Xyimport),ge.Pos.Xyimport.Graphics=function(e){fe(r,e);var t=me(r);function r(e,n,i,a,o){var s;return ve(this,r),(s=t.call(this)).width=e,s.height=n,s.xOffset=i,s.yOffset=a,s.graphics=o,s}return pe(r,[{key:"toString",value:function(){return"\\xyimport("+this.width+", "+this.height+")("+this.xOffset+", "+this.yOffset+"){"+this.graphics+"}"}}]),r}(ge.Pos.Xyimport),ge.Command.Includegraphics=function(){function e(t,r,n){ve(this,e),this.isClipped=t,this.attributeList=r,this.filepath=n}return pe(e,[{key:"isIncludegraphics",get:function(){return!0}},{key:"toString",value:function(){return"\\includegraphics"+(this.isClipped?"*":"")+this.attributeList.mkString("[",",","]")+"{"+this.filepath+"}"}}]),e}(),ge.Command.Includegraphics.Attr=function e(){ve(this,e)},ge.Command.Includegraphics.Attr.Width=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).dimen=e,n}return pe(r,[{key:"toString",value:function(){return"width="+this.dimen}}]),r}(ge.Command.Includegraphics.Attr),ge.Command.Includegraphics.Attr.Height=function(e){fe(r,e);var t=me(r);function r(e){var n;return ve(this,r),(n=t.call(this)).dimen=e,n}return pe(r,[{key:"toString",value:function(){return"height="+this.dimen}}]),r}(ge.Command.Includegraphics.Attr);var we=te.fun,be=te.elem,Se=function(e){return we(te.elem(e))},Oe=te.literal,Ce=te.regex,Ee=te.regexLiteral,ke=function(e){return we(te.literal(e))},Le=te.seq,Pe=te.or,Re=function(e){return te.lazyParser(e)().rep()},Ae=function(e){return te.lazyParser(e)().rep1()},Te=function(e){return te.lazyParser(e)().opt()},Je=te.success,Be=function(e){return function(){var t=e.memo;return void 0===t&&(t=e.memo=e()),t}},Ne=new te,Ie={xy:Be((function(){return Ne.posDecor().to((function(e){return e}))})),xybox:Be((function(){return Oe("{").andr(Ne.posDecor).andl(ke("}")).to((function(e){return e}))})),xymatrixbox:Be((function(){return Ne.xymatrix().to((function(e){return new ge.PosDecor(new ge.Pos.Coord(new ge.Coord.C,B.empty),new ge.Decor(B.empty.append(e)))}))})),posDecor:Be((function(){return Le(Ne.pos,Ne.decor).to((function(e){return new ge.PosDecor(e.head,e.tail)}))})),pos:Be((function(){return Le(Ne.coord,Re(Ne.pos2)).to((function(e){return new ge.Pos.Coord(e.head,e.tail)}))})),nonemptyPos:Be((function(){return Pe(Le(Ne.nonemptyCoord,Re(Ne.pos2)),Le(Ne.coord,Ae(Ne.pos2))).to((function(e){return new ge.Pos.Coord(e.head,e.tail)}))})),pos2:Be((function(){return Pe(Oe("+").andr(Ne.coord).to((function(e){return new ge.Pos.Plus(e)})),Oe("-").andr(Ne.coord).to((function(e){return new ge.Pos.Minus(e)})),Oe("!").andr(Ne.coord).to((function(e){return new ge.Pos.Skew(e)})),Oe(".").andr(Ne.coord).to((function(e){return new ge.Pos.Cover(e)})),Oe(",").andr(Ne.coord).to((function(e){return new ge.Pos.Then(e)})),Oe(";").andr(Ne.coord).to((function(e){return new ge.Pos.SwapPAndC(e)})),Oe("::").andr(Ne.coord).to((function(e){return new ge.Pos.SetYBase(e)})),Oe(":").andr(Ne.coord).to((function(e){return new ge.Pos.SetBase(e)})),Oe("**").andr(Ne.object).to((function(e){return new ge.Pos.ConnectObject(e)})),Oe("*").andr(Ne.object).to((function(e){return new ge.Pos.DropObject(e)})),Oe("?").andr(Ne.place).to((function(e){return new ge.Pos.Place(e)})),Oe("@+").andr(Ne.coord).to((function(e){return new ge.Pos.PushCoord(e)})),Oe("@-").andr(Ne.coord).to((function(e){return new ge.Pos.EvalCoordThenPop(e)})),Oe("@=").andr(Ne.coord).to((function(e){return new ge.Pos.LoadStack(e)})),Oe("@@").andr(Ne.coord).to((function(e){return new ge.Pos.DoCoord(e)})),Oe("@i").to((function(){return new ge.Pos.InitStack})),Oe("@(").to((function(){return new ge.Pos.EnterFrame})),Oe("@)").to((function(){return new ge.Pos.LeaveFrame})),Oe("=:").andr(ke('"')).andr(Ne.id).andl(Se('"')).to((function(e){return new ge.Pos.SaveBase(e)})),Oe("=@").andr(ke('"')).andr(Ne.id).andl(Se('"')).to((function(e){return new ge.Pos.SaveStack(e)})),Oe("=").andr(ke('"')).andr(Ne.id).andl(Se('"')).to((function(e){return new ge.Pos.SavePos(e)})),Oe("=").andr(Ne.nonemptyCoord).andl(ke('"')).and(Ne.id).andl(Se('"')).to((function(e){return new ge.Pos.SaveMacro(e.head,e.tail)})),Ne.xyimport)})),coord:Be((function(){return Pe(Ne.nonemptyCoord,Je("empty").to((function(){return new ge.Coord.C})))})),nonemptyCoord:Be((function(){return Pe(Oe("c").to((function(){return new ge.Coord.C})),Oe("p").to((function(){return new ge.Coord.P})),Oe("x").to((function(){return new ge.Coord.X})),Oe("y").to((function(){return new ge.Coord.Y})),Ne.vector().to((function(e){return new ge.Coord.Vector(e)})),Oe('"').andr(Ne.id).andl(Se('"')).to((function(e){return new ge.Coord.Id(e)})),Oe("{").andr(Ne.posDecor).andl(ke("}")).to((function(e){return new ge.Coord.Group(e)})),Oe("s").andr(we(Ee(/^\d/))).to((function(e){return new ge.Coord.StackPosition(parseInt(e))})),Oe("s").andr(ke("{")).and(Ne.nonnegativeNumber).andl(ke("}")).to((function(e){return new ge.Coord.StackPosition(e)})),Oe("[").andr(we(Te(Oe('"').andr(Ne.id).andl(Se('"'))).to((function(e){return e.getOrElse("")})))).and(Ne.number).andl(ke(",")).and(Ne.number).andl(ke("]")).to((function(e){return new ge.Coord.DeltaRowColumn(e.head.head,e.head.tail,e.tail)})),Oe("[").andr(we(Te(Oe('"').andr(Ne.id).andl(Se('"'))).to((function(e){return e.getOrElse("")})))).and(we(Re(Ce(/^[lrud]/)))).andl(ke("]")).to((function(e){return new ge.Coord.Hops(e.head,e.tail)})),Oe("[").andr(we(Te(Oe('"').andr(Ne.id).andl(Se('"'))).to((function(e){return e.getOrElse("")})))).and(we(Ae(Ce(/^[lrud]/)))).and(Ne.place).andl(ke("]")).to((function(e){return new ge.Coord.DeltaRowColumn(e.head.head,e.head.tail,new ge.Pos.Place(e.tail))})))})),vector:Be((function(){return Pe(Oe("(").andr(Ne.factor).andl(ke(",")).and(Ne.factor).andl(ke(")")).to((function(e){return new ge.Vector.InCurBase(e.head,e.tail)})),Oe("<").andr(Ne.dimen).andl(ke(",")).and(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Vector.Abs(e.head,e.tail)})),Oe("<").andr(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Vector.Abs(e,e)})),Oe("a").andr(ke("(")).andr(Ne.number).andl(ke(")")).to((function(e){return new ge.Vector.Angle(e)})),Oe("/").andr(Ne.direction).and(Ne.looseDimen).andl(ke("/")).to((function(e){return new ge.Vector.Dir(e.head,e.tail)})),Oe("0").to((function(e){return new ge.Vector.Abs("0mm","0mm")})),(function(){return Ne.corner().and(we(te.opt(we(Oe("(").andr(Ne.factor).andl(ke(")")))).to((function(e){return e.getOrElse(1)})))).to((function(e){return new ge.Vector.Corner(e.head,e.tail)}))}))})),corner:Be((function(){return Pe(Ee(/^(CL|LC)/).to((function(){return new ge.Corner.CL})),Ee(/^(CR|RC)/).to((function(){return new ge.Corner.CR})),Ee(/^(CD|DC)/).to((function(){return new ge.Corner.CD})),Ee(/^(CU|UC)/).to((function(){return new ge.Corner.CU})),Ee(/^(LD|DL)/).to((function(){return new ge.Corner.LD})),Ee(/^(RD|DR)/).to((function(){return new ge.Corner.RD})),Ee(/^(LU|UL)/).to((function(){return new ge.Corner.LU})),Ee(/^(RU|UR)/).to((function(){return new ge.Corner.RU})),Oe("L").to((function(){return new ge.Corner.L})),Oe("R").to((function(){return new ge.Corner.R})),Oe("D").to((function(){return new ge.Corner.D})),Oe("U").to((function(){return new ge.Corner.U})),Oe("E").to((function(){return new ge.Corner.NearestEdgePoint})),Oe("P").to((function(){return new ge.Corner.PropEdgePoint})),Oe("A").to((function(){return new ge.Corner.Axis})))})),place:Be((function(){return Pe(Oe("<").andr(Ne.place).to((function(e){return new ge.Place(1,0,void 0,void 0).compound(e)})),Oe(">").andr(Ne.place).to((function(e){return new ge.Place(0,1,void 0,void 0).compound(e)})),Oe("(").andr(Ne.factor).andl(ke(")")).and(Ne.place).to((function(e){return new ge.Place(0,0,new ge.Place.Factor(e.head),void 0).compound(e.tail)})),Oe("!").andr(ke("{")).andr(Ne.pos).andl(ke("}")).and(Ne.slide).to((function(e){return new ge.Place(0,0,new ge.Place.Intercept(e.head),e.tail)})),(function(){return Ne.slide().to((function(e){return new ge.Place(0,0,void 0,e)}))}))})),slide:Be((function(){return Pe(Oe("/").andr(Ne.dimen).andl(ke("/")).to((function(e){return new ge.Slide(new b.Some(e))})),Je("no slide").to((function(){return new ge.Slide(b.empty)})))})),factor:Be(we(Ee(/^[+\-]?(\d+(\.\d*)?|\d*\.\d+)/).to((function(e){return parseFloat(e)})))),number:Be(we(Ee(/^[+\-]?\d+/).to((function(e){return parseInt(e)})))),nonnegativeNumber:Be(we(Ee(/^\d+/).to((function(e){return parseInt(e)})))),unit:Be(we(Ee(/^(em|ex|px|pt|pc|in|cm|mm|mu)/).to((function(e){return e})))),dimen:Be((function(){return Ne.factor().and(Ne.unit).to((function(e){return e.head.toString()+e.tail}))})),looseDimen:Be((function(){return Ne.looseFactor().and(Ne.unit).to((function(e){return e.head.toString()+e.tail}))})),looseFactor:Be(we(Pe(Ee(/^(\d \d*(\.\d*))/).to((function(e){return parseFloat(e.replace(/ /,""))})),Ee(/^[+\-]?(\d+(\.\d*)?|\d*\.\d+)/).to((function(e){return parseFloat(e)}))))),id:Be(we(Ce(/^[^"]+/))),object:Be((function(){return Pe(Re(Ne.modifier).and(Ne.objectbox).to((function(e){return new ge.Object(e.head,e.tail)})))})),objectbox:Be((function(){return Pe(Ne.mathText,Oe("@").andr(Ne.dir),Oe("\\dir").andr(Ne.dir),Oe("\\cir").andr(Ne.cirRadius).andl(ke("{")).and(Ne.cir).andl(ke("}")).to((function(e){return new ge.ObjectBox.Cir(e.head,e.tail)})),Oe("\\frm").andr(Ne.frameRadius).andl(ke("{")).and(Ne.frameMain).andl(ke("}")).to((function(e){return new ge.ObjectBox.Frame(e.head,e.tail)})),Oe("\\object").andr(Ne.object).to((function(e){return new ge.ObjectBox.WrapUpObject(e)})),Oe("\\composite").and(ke("{")).andr(Ne.compositeObject).andl(ke("}")).to((function(e){return new ge.ObjectBox.CompositeObject(e)})),Oe("\\xybox").and(ke("{")).andr(Ne.posDecor).andl(ke("}")).to((function(e){return new ge.ObjectBox.Xybox(e)})),Oe("\\xymatrix").andr(Ne.xymatrix).to((function(e){return new ge.ObjectBox.Xymatrix(e)})),Ne.txt,Ne.curve,Ce(/^(\\[a-zA-Z@][a-zA-Z0-9@]+)/).andl(ke("{")).and(Ne.text).andl(ke("}")).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return Ne.toMath(t.head+"{"+t.tail+"}",r)})))})),compositeObject:Be((function(){return Ne.object().and(we(Re(Oe("*").andr(Ne.object)))).to((function(e){return e.tail.prepend(e.head)}))})),mathText:Be((function(){return Oe("{").andr(Ne.text).andl(Se("}")).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return Ne.toMath("\\hbox{$\\objectstyle{"+t+"}$}",r)}))})),toMath:function(e,t){var r=t(e);return new ge.ObjectBox.Text(r)},textNodeCreator:Be((function(){return new te.Parser((function(e){return new te.Success(e.context.createTextNode,e)}))})),text:Be((function(){return Ce(/^[^{}\\%]*/).and((function(){return Pe(Ce(/^(\\\{|\\\}|\\%|\\)/).to((function(e){return e})),be("{").andr(Ne.text).andl(Se("}")).to((function(e){return"{"+e+"}"})),Ce(/^%[^\r\n]*(\r\n|\r|\n)?/).to((function(e){return" "}))).and(we(Ce(/^[^{}\\%]*/))).rep().to((function(e){var t="";return e.foreach((function(e){t+=e.head+e.tail})),t}))})).to((function(e){return e.head+e.tail}))})),txt:Be((function(){return Oe("\\txt").andr(Ne.txtWidth).and(we(Ce(/^(\\[a-zA-Z@][a-zA-Z0-9@]+)?/))).andl(ke("{")).and(Ne.text).andl(ke("}")).and(Ne.textNodeCreator).to((function(e){var t,r=e.head,n=e.tail,i=r.head.head,a=r.head.tail,o=r.tail,s=o.split("\\\\");if(s.length<=1)t=a+"{\\hbox{"+o+"}}";else{t="\\hbox{$\\begin{array}{c}\n";for(var u=0;u<s.length;u++)t+=a+"{\\hbox{"+s[u].replace(/(^[\r\n\s]+)|([\r\n\s]+$)/g,"")+"}}",u!=s.length-1&&(t+="\\\\\n");t+="\\end{array}$}"}return new ge.ObjectBox.Txt(i,Ne.toMath(t,n))}))})),txtWidth:Be((function(){return Pe(Oe("<").andr(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Vector.Abs(e,e)})).to((function(e){return new ge.ObjectBox.Txt.Width.Vector(e)})),Je("default").to((function(){return new ge.ObjectBox.Txt.Width.Default})))})),dir:Be((function(){return Ee(/^[\^_0123]/).opt().andl(ke("{")).and(Ne.dirMain).andl(ke("}")).to((function(e){return new ge.ObjectBox.Dir(e.head.getOrElse(""),e.tail)}))})),dirMain:Be((function(){return Ce(/^(-|\.|~|>|<|\(|\)|`|'|\||\*|\+|x|\/|o|=|:|[a-zA-Z@ ])+/).opt().to((function(e){return e.getOrElse("")}))})),cirRadius:Be((function(){return Pe(Ne.vector().to((function(e){return new ge.ObjectBox.Cir.Radius.Vector(e)})),Je("default").to((function(){return new ge.ObjectBox.Cir.Radius.Default})))})),frameRadius:Be((function(){return Pe(Ne.frameRadiusVector().to((function(e){return new ge.ObjectBox.Frame.Radius.Vector(e)})),Je("default").to((function(){return new ge.ObjectBox.Frame.Radius.Default})))})),frameRadiusVector:Be((function(){return Pe(Oe("<").andr(Ne.dimen).andl(ke(",")).and(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Vector.Abs(e.head,e.tail)})),Oe("<").andr(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Vector.Abs(e,e)})))})),frameMain:Be((function(){return Ce(/^(((_|\^)?(\\\{|\\\}|\(|\)))|[\-=oe,\.\*]*)/)})),cir:Be((function(){return Pe(Ne.nonemptyCir,Je("full").to((function(){return new ge.ObjectBox.Cir.Cir.Full})))})),nonemptyCir:Be((function(){return Ne.diag().and(we(Ee(/^[_\^]/))).and(Ne.diag).to((function(e){return new ge.ObjectBox.Cir.Cir.Segment(e.head.head,e.head.tail,e.tail)}))})),curve:Be((function(){return Oe("\\crv").andr(Ne.curveModifier).andl(ke("{")).and(Ne.curveObject).and(Ne.curvePoslist).andl(ke("}")).to((function(e){return new ge.ObjectBox.Curve(e.head.head,e.head.tail,e.tail)}))})),curveModifier:Be((function(){return Re(we(Oe("~").andr(Ne.curveOption)))})),curveOption:Be((function(){return Pe(Oe("p").to((function(){return new ge.ObjectBox.Curve.Modifier.p})),Oe("P").to((function(){return new ge.ObjectBox.Curve.Modifier.P})),Oe("l").to((function(){return new ge.ObjectBox.Curve.Modifier.l})),Oe("L").to((function(){return new ge.ObjectBox.Curve.Modifier.L})),Oe("c").to((function(){return new ge.ObjectBox.Curve.Modifier.c})),Oe("C").to((function(){return new ge.ObjectBox.Curve.Modifier.C})),Oe("pc").to((function(){return new ge.ObjectBox.Curve.Modifier.pc})),Oe("pC").to((function(){return new ge.ObjectBox.Curve.Modifier.pC})),Oe("Pc").to((function(){return new ge.ObjectBox.Curve.Modifier.Pc})),Oe("PC").to((function(){return new ge.ObjectBox.Curve.Modifier.PC})),Oe("lc").to((function(){return new ge.ObjectBox.Curve.Modifier.lc})),Oe("lC").to((function(){return new ge.ObjectBox.Curve.Modifier.lC})),Oe("Lc").to((function(){return new ge.ObjectBox.Curve.Modifier.Lc})),Oe("LC").to((function(){return new ge.ObjectBox.Curve.Modifier.LC})),Oe("cC").to((function(){return new ge.ObjectBox.Curve.Modifier.cC})))})),curveObject:Be((function(){return Re(Pe(Oe("~*").andr(Ne.object).to((function(e){return new ge.ObjectBox.Curve.Object.Drop(e)})),Oe("~**").andr(Ne.object).to((function(e){return new ge.ObjectBox.Curve.Object.Connect(e)}))))})),curvePoslist:Be((function(){return Pe(Oe("&").andr(Ne.curvePoslist2).to((function(e){return e.prepend(new ge.ObjectBox.Curve.PosList.CurPos)})),Oe("~@").andr(ke("&")).andr(Ne.curvePoslist2).to((function(e){return e.prepend(new ge.ObjectBox.Curve.PosList.AddStack)})),Oe("~@").to((function(){return B.empty.prepend(new ge.ObjectBox.Curve.PosList.AddStack)})),Ne.pos().andl(ke("&")).and(Ne.curvePoslist2).to((function(e){return e.tail.prepend(new ge.ObjectBox.Curve.PosList.Pos(e.head))})),Ne.nonemptyPos().to((function(e){return B.empty.prepend(new ge.ObjectBox.Curve.PosList.Pos(e))})),Je("empty").to((function(){return B.empty})))})),curvePoslist2:Be((function(){return Pe(Oe("&").andr(Ne.curvePoslist2).to((function(e){return e.prepend(new ge.ObjectBox.Curve.PosList.CurPos)})),Oe("~@").andr(ke("&")).andr(Ne.curvePoslist2).to((function(e){return e.prepend(new ge.ObjectBox.Curve.PosList.AddStack)})),Oe("~@").to((function(){return B.empty.prepend(new ge.ObjectBox.Curve.PosList.AddStack)})),Ne.nonemptyPos().andl(ke("&")).and(Ne.curvePoslist2).to((function(e){return e.tail.prepend(new ge.ObjectBox.Curve.PosList.Pos(e.head))})),Ne.nonemptyPos().to((function(e){return B.empty.prepend(new ge.ObjectBox.Curve.PosList.Pos(e))})),Je("empty").to((function(){return B.empty.prepend(new ge.ObjectBox.Curve.PosList.CurPos)})))})),modifier:Be((function(){return Pe(Oe("!").andr(Ne.vector).to((function(e){return new ge.Modifier.Vector(e)})),Oe("!").to((function(e){return new ge.Modifier.RestoreOriginalRefPoint})),Oe("[").andr(Ne.shape).andl(ke("]")).to((function(e){return e})),Oe("i").to((function(e){return new ge.Modifier.Invisible})),Oe("h").to((function(e){return new ge.Modifier.Hidden})),Ne.addOp().and(Ne.size).to((function(e){return new ge.Modifier.AddOp(e.head,e.tail)})),Ne.nonemptyDirection().to((function(e){return new ge.Modifier.Direction(e)})))})),addOp:Be((function(){return Pe(Oe("+=").to((function(){return new ge.Modifier.AddOp.GrowTo})),Oe("-=").to((function(){return new ge.Modifier.AddOp.ShrinkTo})),Oe("+").to((function(){return new ge.Modifier.AddOp.Grow})),Oe("-").to((function(){return new ge.Modifier.AddOp.Shrink})),Oe("=").to((function(){return new ge.Modifier.AddOp.Set})))})),size:Be((function(){return Pe((function(){return Ne.vector().to((function(e){return new ge.Modifier.AddOp.VactorSize(e)}))}),Je("default size").to((function(){return new ge.Modifier.AddOp.DefaultSize})))})),shape:Be((function(){return Pe(Oe(".").to((function(){return new ge.Modifier.Shape.Point})),Ne.frameShape,Ne.alphabets().to((function(e){return new ge.Modifier.Shape.Alphabets(e)})),Oe("=").andr(Ne.alphabets).to((function(e){return new ge.Modifier.Shape.DefineShape(e)})),Je("rect").to((function(){return new ge.Modifier.Shape.Rect})))})),frameShape:Be((function(){return Oe("F").andr(Ne.frameMain).and(we(Re(Oe(":").andr(we(Pe(Ne.frameRadiusVector().to((function(e){return new ge.Modifier.Shape.Frame.Radius(e)})),Ne.colorName().to((function(e){return new ge.Modifier.Shape.Frame.Color(e)})))))))).to((function(e){var t=e.head;return""===t&&(t="-"),new ge.Modifier.Shape.Frame(t,e.tail)}))})),alphabets:Be((function(){return Ce(/^([a-zA-Z]+)/)})),colorName:Be((function(){return Ce(/^([a-zA-Z][a-zA-Z0-9]*)/)})),direction:Be((function(){return Le(Ne.direction0,Re(Ne.direction1)).to((function(e){return new ge.Direction.Compound(e.head,e.tail)}))})),direction0:Be((function(){return Pe(Ne.direction2,Ne.diag().to((function(e){return new ge.Direction.Diag(e)})))})),direction1:Be((function(){return Pe(Oe(":").andr(Ne.vector).to((function(e){return new ge.Direction.RotVector(e)})),Oe("_").to((function(e){return new ge.Direction.RotAntiCW})),Oe("^").to((function(e){return new ge.Direction.RotCW})))})),direction2:Be((function(){return Pe(Oe("v").andr(Ne.vector).to((function(e){return new ge.Direction.Vector(e)})),Oe("q").andr(ke("{")).andr(Ne.posDecor).andl(ke("}")).to((function(e){return new ge.Direction.ConstructVector(e)})))})),nonemptyDirection:Be((function(){return Pe(Le(Ne.nonemptyDirection0,Re(Ne.direction1)),Le(Ne.direction0,Ae(Ne.direction1))).to((function(e){return new ge.Direction.Compound(e.head,e.tail)}))})),nonemptyDirection0:Be((function(){return Pe(Ne.direction2,Ne.nonemptyDiag().to((function(e){return new ge.Direction.Diag(e)})))})),diag:Be((function(){return Pe(Ne.nonemptyDiag,Je("empty").to((function(e){return new ge.Diag.Default})))})),nonemptyDiag:Be((function(){return Pe(Ee(/^(ld|dl)/).to((function(e){return new ge.Diag.LD})),Ee(/^(rd|dr)/).to((function(e){return new ge.Diag.RD})),Ee(/^(lu|ul)/).to((function(e){return new ge.Diag.LU})),Ee(/^(ru|ur)/).to((function(e){return new ge.Diag.RU})),Oe("l").to((function(e){return new ge.Diag.L})),Oe("r").to((function(e){return new ge.Diag.R})),Oe("d").to((function(e){return new ge.Diag.D})),Oe("u").to((function(e){return new ge.Diag.U})))})),decor:Be((function(){return Ne.command().rep().to((function(e){return new ge.Decor(e)}))})),command:Be((function(){return Pe(Oe("\\ar").andr(we(Re(Ne.arrowForm))).and(Ne.path).to((function(e){return new ge.Command.Ar(e.head,e.tail)})),Oe("\\xymatrix").andr(Ne.xymatrix),Oe("\\PATH").andr(Ne.path).to((function(e){return new ge.Command.Path(e)})),Oe("\\afterPATH").andr(ke("{")).andr(Ne.decor).andl(ke("}")).and(Ne.path).to((function(e){return new ge.Command.AfterPath(e.head,e.tail)})),Oe("\\save").andr(Ne.pos).to((function(e){return new ge.Command.Save(e)})),Oe("\\restore").to((function(){return new ge.Command.Restore})),Oe("\\POS").andr(Ne.pos).to((function(e){return new ge.Command.Pos(e)})),Oe("\\afterPOS").andr(ke("{")).andr(Ne.decor).andl(ke("}")).and(Ne.pos).to((function(e){return new ge.Command.AfterPos(e.head,e.tail)})),Oe("\\drop").andr(Ne.object).to((function(e){return new ge.Command.Drop(e)})),Oe("\\connect").andr(Ne.object).to((function(e){return new ge.Command.Connect(e)})),Oe("\\relax").to((function(){return new ge.Command.Relax})),Oe("\\xyignore").andr(ke("{")).andr(Ne.pos).and(Ne.decor).andl(ke("}")).to((function(e){return new ge.Command.Ignore(e.head,e.tail)})),Oe("\\xyshowAST").andr(ke("{")).andr(Ne.pos).and(Ne.decor).andl(ke("}")).to((function(e){return new ge.Command.ShowAST(e.head,e.tail)})),Ne.twocellCommand)})),arrowForm:Be((function(){return Pe(Oe("@").andr(we(Ce(/^([\-\.~=:])/))).to((function(e){return new ge.Command.Ar.Form.ChangeStem(e)})),Oe("@").andr(ke("!")).to((function(e){return new ge.Command.Ar.Form.DashArrowStem})),Oe("@").andr(ke("/")).andr(Ne.direction).and(we(Te(Ne.looseDimen))).andl(ke("/")).to((function(e){return new ge.Command.Ar.Form.CurveArrow(e.head,e.tail.getOrElse(".5pc"))})),Oe("@").andr(ke("(")).andr(Ne.direction).andl(ke(",")).and(Ne.direction).andl(ke(")")).to((function(e){return new ge.Command.Ar.Form.CurveFitToDirection(e.head,e.tail)})),Oe("@").andr(ke("`")).andr(Ne.coord).to((function(e){return new ge.Command.Ar.Form.CurveWithControlPoints(e)})),Oe("@").andr(ke("[")).andr(Ne.shape).andl(ke("]")).to((function(e){return new ge.Command.Ar.Form.AddShape(e)})),Oe("@").andr(ke("*")).andr(ke("{")).andr(we(Re(Ne.modifier))).andl(ke("}")).to((function(e){return new ge.Command.Ar.Form.AddModifiers(e)})),Oe("@").andr(ke("<")).andr(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Command.Ar.Form.Slide(e)})),Oe("|").andr(Ne.anchor).and(Ne.it).to((function(e){return new ge.Command.Ar.Form.LabelAt(e.head,e.tail)})),Oe("^").andr(Ne.anchor).and(Ne.it).to((function(e){return new ge.Command.Ar.Form.LabelAbove(e.head,e.tail)})),Oe("_").andr(Ne.anchor).and(Ne.it).to((function(e){return new ge.Command.Ar.Form.LabelBelow(e.head,e.tail)})),Oe("@").andr(ke("?")).to((function(){return new ge.Command.Ar.Form.ReverseAboveAndBelow})),Oe("@").andr(we(Ce(/^([\^_0123])/).opt())).and(we(Te(Ne.tipConnTip))).to((function(e){var t=e.head.getOrElse("");if(e.tail.isDefined){var r=e.tail.get;return new ge.Command.Ar.Form.BuildArrow(t,r.tail,r.stem,r.head)}return new ge.Command.Ar.Form.ChangeVariant(t)})))})),tipConnTip:Be((function(){return Oe("{").andr(we(Te(Ne.nonemptyTip))).and(we(Te(Ne.nonemptyConn))).and(we(Te(Ne.nonemptyTip))).andl(ke("}")).to((function(e){var t,r,n,i=e.head.head,a=e.head.tail,o=e.tail,s=new ge.Command.Ar.Form.Tip.Tipchars("");return a.isDefined||o.isDefined?(t=i.getOrElse(s),r=a.getOrElse(new ge.Command.Ar.Form.Conn.Connchars("")),n=o.getOrElse(s)):i.isDefined?(t=s,r=new ge.Command.Ar.Form.Conn.Connchars("-"),n=i.getOrElse(s)):(t=s,r=new ge.Command.Ar.Form.Conn.Connchars(""),n=s),{tail:t,stem:r,head:n}}))})),nonemptyTip:Be((function(){return Pe(Ce(/^([<>()|'`+\/a-zA-Z ]+)/).to((function(e){return new ge.Command.Ar.Form.Tip.Tipchars(e)})),Oe("*").andr(Ne.object).to((function(e){return new ge.Command.Ar.Form.Tip.Object(e)})),Ne.dir().to((function(e){return new ge.Command.Ar.Form.Tip.Dir(e)})))})),nonemptyConn:Be((function(){return Pe(Ce(/^([\-\.~=:]+)/).to((function(e){return new ge.Command.Ar.Form.Conn.Connchars(e)})),Oe("*").andr(Ne.object).to((function(e){return new ge.Command.Ar.Form.Conn.Object(e)})),Ne.dir().to((function(e){return new ge.Command.Ar.Form.Conn.Dir(e)})))})),path:Be((function(){return Ne.path2(B.empty).to((function(e){return new ge.Command.Path.Path(e)}))})),path2:function(e){var t=Be((function(){return Ne.path2(e)}));return Pe(Ne.path3().and(t).to((function(e){return e.tail.prepend(e.head)})),Le("~","{",t,"}").to((function(e){return e.head.tail})).into((function(e){return Ne.path2(e)})),Ne.segment().to((function(e){return B.empty.prepend(new ge.Command.Path.LastSegment(e))})),Je(e).to((function(e){return e})))},path3:Be((function(){return Pe(Le("~","=","{",Ne.posDecor,"}").to((function(e){return new ge.Command.Path.SetBeforeAction(e.head.tail)})),Le("~","/","{",Ne.posDecor,"}").to((function(e){return new ge.Command.Path.SetAfterAction(e.head.tail)})),Le("~","<","{",Ne.labels,"}").to((function(e){return new ge.Command.Path.AddLabelNextSegmentOnly(e.head.tail)})),Le("~",">","{",Ne.labels,"}").to((function(e){return new ge.Command.Path.AddLabelLastSegmentOnly(e.head.tail)})),Le("~","+","{",Ne.labels,"}").to((function(e){return new ge.Command.Path.AddLabelEverySegment(e.head.tail)})),Le("'",Ne.segment).to((function(e){return new ge.Command.Path.StraightSegment(e.tail)})),Le("`",Ne.turn,Ne.segment).to((function(e){return new ge.Command.Path.TurningSegment(e.head.tail,e.tail)})))})),turn:Be((function(){return Pe(Ne.nonemptyCir().and(Ne.turnRadius).to((function(e){return new ge.Command.Path.Turn.Cir(e.head,e.tail)})),Ne.diag().and(Ne.turnRadius).to((function(e){return new ge.Command.Path.Turn.Diag(e.head,e.tail)})))})),turnRadius:Be((function(){return Pe(Oe("/").andr(Ne.dimen).to((function(e){return new ge.Command.Path.TurnRadius.Dimen(e)})),Je("default").to((function(){return new ge.Command.Path.TurnRadius.Default})))})),segment:Be((function(){return Ne.nonemptyPos().and(Ne.pathSlide).and(Ne.labels).to((function(e){return new ge.Command.Path.Segment(e.head.head,e.head.tail,e.tail)}))})),pathSlide:Be((function(){return Pe(Oe("<").andr(Ne.dimen).andl(ke(">")).to((function(e){return new ge.Slide(new b.Some(e))})),Je("no slide").to((function(){return new ge.Slide(b.empty)})))})),labels:Be((function(){return Ne.label().rep().to((function(e){return new ge.Command.Path.Labels(e)}))})),label:Be((function(){return Pe(Le("^",Ne.anchor,Ne.it,Ne.alias).to((function(e){return new ge.Command.Path.Label.Above(new ge.Pos.Place(e.head.head.tail),e.head.tail,e.tail)})),Le("_",Ne.anchor,Ne.it,Ne.alias).to((function(e){return new ge.Command.Path.Label.Below(new ge.Pos.Place(e.head.head.tail),e.head.tail,e.tail)})),Le("|",Ne.anchor,Ne.it,Ne.alias).to((function(e){return new ge.Command.Path.Label.At(new ge.Pos.Place(e.head.head.tail),e.head.tail,e.tail)})))})),anchor:Be((function(){return Pe(Oe("-").andr(Ne.anchor).to((function(e){return new ge.Place(1,1,new ge.Place.Factor(.5),void 0).compound(e)})),Ne.place)})),it:Be((function(){return Re(Oe("[").andr(Ne.shape).andl(ke("]")).to((function(e){return e}))).and(Ne.it2).to((function(e){return new ge.Object(e.head.concat(e.tail.modifiers),e.tail.object)}))})),it2:Be((function(){return Pe(Ee(/^[0-9a-zA-Z]/).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return new ge.Object(B.empty,Ne.toMath("\\labelstyle "+t,r))})),Ee(/^(\\[a-zA-Z][a-zA-Z0-9]*)/).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return new ge.Object(B.empty,Ne.toMath("\\labelstyle "+t,r))})),Oe("{").andr(Ne.text).andl(Se("}")).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return new ge.Object(B.empty,Ne.toMath("\\labelstyle "+t,r))})),Oe("*").andr(Ne.object),Oe("@").andr(Ne.dir).to((function(e){return new ge.Object(B.empty,e)})))})),alias:Be((function(){return Le("=",'"',Ne.id,'"').opt().to((function(e){return e.map((function(e){return e.head.tail}))}))})),xymatrix:Be((function(){return Ne.setup().andl(ke("{")).and(Ne.rows).andl(ke("}")).to((function(e){return new ge.Command.Xymatrix(e.head,e.tail)}))})),setup:Be((function(){return Re(we(Pe(Oe('"').andr(we(Ce(/^[^"]+/))).andl(Se('"')).to((function(e){return new ge.Command.Xymatrix.Setup.Prefix(e)})),Oe("@!").andr(we(Ce(/^[RC]/).opt().to((function(e){return e.getOrElse("")})))).and(we(Pe(be("0").to((function(){return"0em"})),be("=").andr(Ne.dimen)))).to((function(e){var t=e.tail;switch(e.head){case"R":return new ge.Command.Xymatrix.Setup.PretendEntrySize.Height(t);case"C":return new ge.Command.Xymatrix.Setup.PretendEntrySize.Width(t);default:return new ge.Command.Xymatrix.Setup.PretendEntrySize.HeightAndWidth(t)}})),Oe("@!").andr(we(Pe(be("R").to((function(){return new ge.Command.Xymatrix.Setup.FixGrid.Row})),be("C").to((function(){return new ge.Command.Xymatrix.Setup.FixGrid.Column}))).opt().to((function(e){return e.getOrElse(new ge.Command.Xymatrix.Setup.FixGrid.RowAndColumn)})))),Oe("@").andr(we(Ce(/^[MWHL]/))).and(Ne.addOp).and(Ne.dimen).to((function(e){var t=e.head.tail,r=e.tail;switch(e.head.head){case"M":return new ge.Command.Xymatrix.Setup.AdjustEntrySize.Margin(t,r);case"W":return new ge.Command.Xymatrix.Setup.AdjustEntrySize.Width(t,r);case"H":return new ge.Command.Xymatrix.Setup.AdjustEntrySize.Height(t,r);case"L":return new ge.Command.Xymatrix.Setup.AdjustLabelSep(t,r)}})),Oe("@").andr(Ne.nonemptyDirection).to((function(e){return new ge.Command.Xymatrix.Setup.SetOrientation(e)})),Oe("@*[").andr(Ne.shape).andl(ke("]")).to((function(e){return new ge.Command.Xymatrix.Setup.AddModifier(e)})),Oe("@*").andr(Ne.addOp).and(Ne.size).to((function(e){return new ge.Command.Xymatrix.Setup.AddModifier(new ge.Modifier.AddOp(e.head,e.tail))})),Oe("@").andr(we(Ce(/^[RC]/).opt().to((function(e){return e.getOrElse("")})))).and(Ne.addOp).and(Ne.dimen).to((function(e){var t=e.head.tail,r=e.tail;switch(e.head.head){case"R":return new ge.Command.Xymatrix.Setup.ChangeSpacing.Row(t,r);case"C":return new ge.Command.Xymatrix.Setup.ChangeSpacing.Column(t,r);default:return new ge.Command.Xymatrix.Setup.ChangeSpacing.RowAndColumn(t,r)}})),Oe("@1").to((function(){return new ge.Command.Xymatrix.Setup.AdjustEntrySize.Margin(new ge.Modifier.AddOp.Set,"1pc")})))))})),rows:Be((function(){return Ne.row().and(we(Re(Oe("\\\\").andr(Ne.row)))).to((function(e){var t=e.tail.prepend(e.head);if(!t.isEmpty){var r=t.at(t.length()-1);1===r.entries.length()&&r.entries.at(0).isEmpty&&(t=t.reverse().tail.reverse())}return t}))})),row:Be((function(){return Ne.entry().and(we(Re(Oe("&").andr(Ne.entry)))).to((function(e){return new ge.Command.Xymatrix.Row(e.tail.prepend(e.head))}))})),entry:Be((function(){return Pe(Oe("*").andr(Ne.object).and(Ne.pos).and(Ne.decor).to((function(e){var t=e.head.head,r=e.head.tail,n=e.tail;return new ge.Command.Xymatrix.Entry.ObjectEntry(t,r,n)})),Ne.entryModifier().rep().and(Ne.looseObjectbox).and(Ne.decor).to((function(e){var t=e.head.head.foldLeft(B.empty,(function(e,t){return t.concat(e)})),r=e.head.tail.isEmpty,n=e.head.tail.object,i=e.tail;return r&&t.isEmpty?new ge.Command.Xymatrix.Entry.EmptyEntry(i):new ge.Command.Xymatrix.Entry.SimpleEntry(t,n,i)})))})),entryModifier:Be((function(){return Pe(Oe("**").andr(ke("[")).andr(Ne.shape).andl(ke("]")).to((function(e){return B.empty.append(e)})),Oe("**").andr(ke("{")).andr(we(Re(Ne.modifier))).andl(ke("}")))})),looseObjectbox:Be((function(){return Pe(Ne.objectbox().to((function(e){return{isEmpty:!1,object:e}})),Ce(/^[^\\{}%&]+/).opt().to((function(e){return e.getOrElse("")})).and(we(Re(Pe(be("{").andr(Ne.text).andl(Se("}")).to((function(e){return"{"+e+"}"})),be("\\").andr(we((e=Ce(/^(\\|ar|xymatrix|PATH|afterPATH|save|restore|POS|afterPOS|drop|connect|xyignore|([lrud]+(twocell|uppertwocell|lowertwocell|compositemap))|xtwocell|xuppertwocell|xlowertwocell|xcompositemap)/),te.not(te.lazyParser(e))))).andr(we(Ce(/^[{}%&]/).opt().to((function(e){return e.getOrElse("")})))).to((function(e){return"\\"+e})),Ce(/^%[^\r\n]*(\r\n|\r|\n)?/).to((function(e){return" "}))).and(we(Ce(/^[^\\{}%&]+/).opt().to((function(e){return e.getOrElse("")})))).to((function(e){return e.head+e.tail}))).to((function(e){return e.mkString("")})))).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail,n=t.head+t.tail;return{isEmpty:0===n.trim().length,object:Ne.toMath("\\hbox{$\\objectstyle{"+n+"}$}",r)}})));var e})),twocellCommand:Be((function(){return Ne.twocell().and(we(Re(Ne.twocellSwitch))).and(Ne.twocellArrow).to((function(e){return new ge.Command.Twocell(e.head.head,e.head.tail,e.tail)}))})),twocell:Be((function(){return Pe(Ee(/^\\[lrud]+twocell/).to((function(e){var t=e.substring(1,e.length-"twocell".length);return new ge.Command.Twocell.Twocell(t,b.empty)})),Ee(/^\\[lrud]+uppertwocell/).to((function(e){var t=e.substring(1,e.length-"uppertwocell".length);return new ge.Command.Twocell.UpperTwocell(t,b.empty)})),Ee(/^\\[lrud]+lowertwocell/).to((function(e){var t=e.substring(1,e.length-"lowertwocell".length);return new ge.Command.Twocell.LowerTwocell(t,b.empty)})),Ee(/^\\[lrud]+compositemap/).to((function(e){var t=e.substring(1,e.length-"compositemap".length);return new ge.Command.Twocell.CompositeMap(t,b.empty)})),Pe(Oe("\\xtwocell").to((function(){return ge.Command.Twocell.Twocell})),Oe("\\xuppertwocell").to((function(){return ge.Command.Twocell.UpperTwocell})),Oe("\\xlowertwocell").to((function(){return ge.Command.Twocell.LowerTwocell})),Oe("\\xcompositemap").to((function(){return ge.Command.Twocell.CompositeMap}))).andl(ke("[")).and(we(Ce(/^[lrud]+/))).andl(ke("]")).andl(ke("{")).and(Ne.text).andl(ke("}")).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail,n=new ge.Object(B.empty,Ne.toMath("\\labelstyle "+t.tail,r));return new t.head.head(t.head.tail,new b.Some(n))})))})),twocellSwitch:Be((function(){return Pe(Oe("^").andr(Ne.twocellLabel).to((function(e){return new ge.Command.Twocell.Switch.UpperLabel(e)})),Oe("_").andr(Ne.twocellLabel).to((function(e){return new ge.Command.Twocell.Switch.LowerLabel(e)})),Oe("\\omit").to((function(){return new ge.Command.Twocell.Switch.DoNotSetCurvedArrows})),Oe("~!").to((function(){return new ge.Command.Twocell.Switch.PlaceModMapObject})),Ee(/^(~[`'])/).andl(ke("{")).and(Ne.object).andl(ke("}")).to((function(e){var t=e.head.substring(1);return new ge.Command.Twocell.Switch.ChangeHeadTailObject(t,e.tail)})),Ee(/^(~[\^_]?)/).andl(ke("{")).and(Ne.object).and(we(Te(Oe("~**").andr(Ne.object)))).andl(ke("}")).to((function(e){var t=e.head.head.substring(1),r=e.head.tail,n=e.tail;return new ge.Command.Twocell.Switch.ChangeCurveObject(t,r,n)})),Ne.nudge().to((function(e){return new ge.Command.Twocell.Switch.SetCurvature(e)})))})),twocellLabel:Be((function(){return Pe(Ee(/^[0-9a-zA-Z]/).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail,n=new ge.Object(B.empty,Ne.toMath("\\twocellstyle "+t,r));return new ge.Command.Twocell.Label(b.empty,n)})),Ee(/^(\\[a-zA-Z][a-zA-Z0-9]*)/).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail,n=new ge.Object(B.empty,Ne.toMath("\\twocellstyle "+t,r));return new ge.Command.Twocell.Label(b.empty,n)})),Oe("{").andr(we(Te(Ne.nudge))).andl(ke("*")).and(Ne.object).andl(ke("}")).to((function(e){return new ge.Command.Twocell.Label(e.head,e.tail)})),Oe("{").andr(we(Te(Ne.nudge))).and(Ne.text).andl(Se("}")).and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail,n=new ge.Object(B.empty,Ne.toMath("\\twocellstyle "+t.tail,r));return new ge.Command.Twocell.Label(t.head,n)})))})),nudge:Be((function(){return Pe(Oe("<\\omit>").to((function(){return new ge.Command.Twocell.Nudge.Omit})),Oe("<").andr(Ne.factor).andl(ke(">")).to((function(e){return new ge.Command.Twocell.Nudge.Number(e)})))})),twocellArrow:Be((function(){return Pe(Oe("{").andr(we(Ee(/^([\^_=`'"!]|\\omit)/))).and(Ne.twocellLabelEntry).andl(ke("}")).to((function(e){return new ge.Command.Twocell.Arrow.WithOrientation(e.head,e.tail)})),Oe("{").andr(Ne.nudge).and(Ne.twocellLabelEntry).andl(ke("}")).to((function(e){return new ge.Command.Twocell.Arrow.WithPosition(e.head,e.tail)})),Oe("{").andr(Ne.twocellLabelEntry).andl(ke("}")).to((function(e){return new ge.Command.Twocell.Arrow.WithOrientation("",e)})),Je("no arrow label").andr(Ne.textNodeCreator).to((function(e){return new ge.Command.Twocell.Arrow.WithOrientation("",new ge.Object(B.empty,Ne.toMath("\\twocellstyle{}",e)))})))})),twocellLabelEntry:Be((function(){return Pe(Oe("*").andr(Ne.object),Ne.text().and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return new ge.Object(B.empty,Ne.toMath("\\twocellstyle "+t,r))})))})),newdir:Be((function(){return Oe("{").andr(Ne.dirMain).andl(Se("}")).andl(ke("{")).and(Ne.compositeObject).andl(ke("}")).to((function(e){return new ge.Command.Newdir(e.head,new ge.ObjectBox.CompositeObject(e.tail))}))})),xyimport:Be((function(){return Oe("\\xyimport").andr(ke("(")).andr(Ne.factor).andl(ke(",")).and(Ne.factor).andl(ke(")")).and(we(Te(Oe("(").andr(Ne.factor).andl(ke(",")).and(Ne.factor).andl(ke(")"))))).andl(ke("{")).and(we(Pe(Oe("\\includegraphics").andr(Ne.includegraphics),Ne.text().and(Ne.textNodeCreator).to((function(e){var t=e.head,r=e.tail;return Ne.toMath("\\hbox{$\\objectstyle{"+t+"}$}",r)}))))).andl(ke("}")).to((function(e){var t,r,n=e.head.head.head,i=e.head.head.tail;e.head.tail.isDefined?(t=e.head.tail.get.head,r=e.head.tail.get.tail):(t=0,r=0);var a=e.tail;return void 0!==a.isIncludegraphics?new ge.Pos.Xyimport.Graphics(n,i,t,r,a):new ge.Pos.Xyimport.TeXCommand(n,i,t,r,a)}))})),includegraphics:Be((function(){return Oe("[").andr(we(Te(Ne.includegraphicsAttrList))).andl(ke("]")).andl(ke("{")).and(we(Ee(/^[^\s{}]+/))).andl(ke("}")).to((function(e){var t=e.head.getOrElse(B.empty),r=e.tail;return new ge.Command.Includegraphics(!1,t,r)}))})),includegraphicsAttrList:Be((function(){return Ne.includegraphicsAttr().and(we(Re(Oe(",").andr(Ne.includegraphicsAttr)))).to((function(e){return e.tail.prepend(e.head)}))})),includegraphicsAttr:Be((function(){return Pe(Oe("width").andr(ke("=")).andr(Ne.dimen).to((function(e){return new ge.Command.Includegraphics.Attr.Width(e)})),Oe("height").andr(ke("=")).andr(Ne.dimen).to((function(e){return new ge.Command.Includegraphics.Attr.Height(e)})))}))};for(var De in Ie)Ne[De]=Ie[De];var je=Ne,_e=r(177),Fe=r(795),Ge=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},Ve=function(e){return e<0?-1:e>0?1:0},Xe=function(e){return Math.abs(e)<p.machinePrecision?0:e},He=function(e,t){var r=e[t],n=function(){var n=r.call(this),a=function(){return n};return a.reset=i,e[t]=a,n},i=function(){e[t]=n};n.reset=i,i()},ze=function(e){return Math.round(100*e)/100};function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$e(e);if(t){var i=$e(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ke(this,r)}}function Ke(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(e,t,r){return t&&Ze(e.prototype,t),r&&Ze(e,r),e}var tt=function(){function e(){Ye(this,e)}return et(e,[{key:"toRect",value:function(t){return new e.Rect(this.x,this.y,t)}},{key:"toPoint",value:function(){return new e.Point(this.x,this.y)}},{key:"combineRect",value:function(t){return e.combineRect(this,t)}}],[{key:"combineRect",value:function(e,t){if(void 0===e)return t;if(void 0===t)return e;var r=-(Math.min(e.x-e.l,t.x-t.l)-e.x),n=Math.max(e.x+e.r,t.x+t.r)-e.x,i=-(Math.min(e.y-e.d,t.y-t.d)-e.y),a=Math.max(e.y+e.u,t.y+t.u)-e.y;return e.toRect({l:r,r:n,d:i,u:a})}}]),e}();function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ut(e);if(t){var i=ut(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ot(this,r)}}function ot(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lt(e,t,r){return t&&ht(e.prototype,t),r&&ht(e,r),e}tt.Point=function(e){qe(r,e);var t=Qe(r);function r(e,n){var i;return Ye(this,r),(i=t.call(this)).x=e,i.y=n,i}return et(r,[{key:"l",get:function(){return 0}},{key:"r",get:function(){return 0}},{key:"u",get:function(){return 0}},{key:"d",get:function(){return 0}},{key:"isPoint",value:function(){return!0}},{key:"isRect",value:function(){return!1}},{key:"isCircle",value:function(){return!1}},{key:"edgePoint",value:function(e,t){return this}},{key:"proportionalEdgePoint",value:function(e,t){return this}},{key:"grow",value:function(e,t){var r=Math.max(0,e),n=Math.max(0,t);return this.toRect({l:r,r,u:n,d:n})}},{key:"toSize",value:function(e,t){return this.toRect({l:e/2,r:e/2,u:t/2,d:t/2})}},{key:"growTo",value:function(e,t){var r=Math.max(0,e),n=Math.max(0,t);return this.toRect({l:r/2,r:r/2,u:n/2,d:n/2})}},{key:"shrinkTo",value:function(e,t){return this}},{key:"move",value:function(e,t){return new tt.Point(e,t)}},{key:"shiftFrame",value:function(e,t){return this}},{key:"rotate",value:function(e){return this}},{key:"contains",value:function(e){return!1}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+"}"}}]),r}(tt),tt.Rect=function(e){qe(r,e);var t=Qe(r);function r(e,n,i){var a;return Ye(this,r),(a=t.call(this)).x=e,a.y=n,a.l=i.l||0,a.r=i.r||0,a.u=i.u||0,a.d=i.d||0,a}return et(r,[{key:"isPoint",value:function(){return 0===this.l&&0===this.r&&0===this.u&&0===this.d}},{key:"isRect",value:function(){return!this.isPoint()}},{key:"isCircle",value:function(){return!1}},{key:"edgePoint",value:function(e,t){if(this.isPoint())return this;var r,n=e-this.x,i=t-this.y;return n>0?(r=i*this.r/n)>this.u?new tt.Point(this.x+this.u*n/i,this.y+this.u):r<-this.d?new tt.Point(this.x-this.d*n/i,this.y-this.d):new tt.Point(this.x+this.r,this.y+r):n<0?(r=-i*this.l/n)>this.u?new tt.Point(this.x+this.u*n/i,this.y+this.u):r<-this.d?new tt.Point(this.x-this.d*n/i,this.y-this.d):new tt.Point(this.x-this.l,this.y+r):i>0?new tt.Point(this.x,this.y+this.u):new tt.Point(this.x,this.y-this.d)}},{key:"proportionalEdgePoint",value:function(e,t){if(this.isPoint())return this;var r=e-this.x,n=t-this.y;if(Math.abs(r)<p.machinePrecision&&Math.abs(n)<p.machinePrecision)return new tt.Point(this.x-this.l,this.y+this.u);var i,a=this.l+this.r,o=this.u+this.d,s=Math.PI,u=Math.atan2(n,r);return-3*s/4<u&&u<=-s/4?(i=(u+3*s/4)/(s/2),new tt.Point(this.x+this.r-i*a,this.y+this.u)):-s/4<u&&u<=s/4?(i=(u+s/4)/(s/2),new tt.Point(this.x-this.l,this.y+this.u-i*o)):s/4<u&&u<=3*s/4?(i=(u-s/4)/(s/2),new tt.Point(this.x-this.l+i*a,this.y-this.d)):(i=(u-(u>0?3*s/4:-5*s/4))/(s/2),new tt.Point(this.x+this.r,this.y-this.d+i*o))}},{key:"grow",value:function(e,t){return this.toRect({l:Math.max(0,this.l+e),r:Math.max(0,this.r+e),u:Math.max(0,this.u+t),d:Math.max(0,this.d+t)})}},{key:"toSize",value:function(e,t){var r,n,i,a,o=this.l+this.r,s=this.u+this.d;return 0===o?(a=e/2,i=e/2):(a=e*this.l/o,i=e*this.r/o),0===s?(r=t/2,n=t/2):(r=t*this.u/s,n=t*this.d/s),this.toRect({l:a,r:i,u:r,d:n})}},{key:"growTo",value:function(e,t){var r=this.u,n=this.d,i=this.r,a=this.l,o=a+i,s=r+n;return e>o&&(0===o?(a=e/2,i=e/2):(a=e*this.l/o,i=e*this.r/o)),t>s&&(0===s?(r=t/2,n=t/2):(r=t*this.u/s,n=t*this.d/s)),this.toRect({l:a,r:i,u:r,d:n})}},{key:"shrinkTo",value:function(e,t){var r=this.u,n=this.d,i=this.r,a=this.l,o=a+i,s=r+n;return e<o&&(0===o?(a=e/2,i=e/2):(a=e*this.l/o,i=e*this.r/o)),t<s&&(0===s?(r=t/2,n=t/2):(r=t*this.u/s,n=t*this.d/s)),this.toRect({l:a,r:i,u:r,d:n})}},{key:"move",value:function(e,t){return new tt.Rect(e,t,{l:this.l,r:this.r,u:this.u,d:this.d})}},{key:"shiftFrame",value:function(e,t){return new tt.Rect(this.x,this.y,{l:Math.max(0,this.l-e),r:Math.max(0,this.r+e),u:Math.max(0,this.u+t),d:Math.max(0,this.d-t)})}},{key:"rotate",value:function(e){var t=Math.cos(e),r=Math.sin(e),n=-this.l,i=this.r,a=this.u,o=-this.d,s={x:n*t-a*r,y:n*r+a*t},u={x:n*t-o*r,y:n*r+o*t},c={x:i*t-a*r,y:i*r+a*t},h={x:i*t-o*r,y:i*r+o*t};return this.toRect({l:-Math.min(s.x,u.x,c.x,h.x),r:Math.max(s.x,u.x,c.x,h.x),u:Math.max(s.y,u.y,c.y,h.y),d:-Math.min(s.y,u.y,c.y,h.y)})}},{key:"contains",value:function(e){var t=e.x,r=e.y;return t>=this.x-this.l&&t<=this.x+this.r&&r>=this.y-this.d&&r<=this.y+this.u}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+", l:"+this.l+", r:"+this.r+", u:"+this.u+", d:"+this.d+"}"}}]),r}(tt),tt.Ellipse=function(e){qe(r,e);var t=Qe(r);function r(e,n,i,a,o,s){var u;return Ye(this,r),(u=t.call(this)).x=e,u.y=n,u.l=i,u.r=a,u.u=o,u.d=s,u}return et(r,[{key:"isPoint",value:function(){return 0===this.r&&0===this.l||0===this.u&&0===this.d}},{key:"isRect",value:function(){return!1}},{key:"isCircle",value:function(){return!this.isPoint()}},{key:"isPerfectCircle",value:function(){return this.l===this.r&&this.l===this.u&&this.l===this.d}},{key:"edgePoint",value:function(e,t){if(this.isPoint())return this;if(this.isPerfectCircle()){var r,n=e-this.x,i=t-this.y;return r=Math.abs(n)<p.machinePrecision&&Math.abs(i)<p.machinePrecision?-Math.PI/2:Math.atan2(i,n),new tt.Point(this.x+this.r*Math.cos(r),this.y+this.r*Math.sin(r))}Math.PI;var a=this.l,o=this.r,s=this.u,u=this.d,c=this.x,h=this.y,l=c+(o-a)/2,f=h+(s-u)/2,d=(a+o)/2,m=(s+u)/2,y=-(n=e-c),x=(i=t-h)*d,v=y*m,g=x*x+v*v,M=-(u=x*l+v*f+((n*h-i*c)*d+(d-m)*y*f))/g,w=g*d*d-u*u;if(w<0)return new tt.Point(this.x,this.y-this.d);var b=Math.sqrt(w)/g,S=m/d,O=x*M+v*b+l,C=S*(v*M-x*b+f-f)+f,E=x*M-v*b+l,k=S*(v*M+x*b+f-f)+f,L=Ve;return L(O-l)===L(e-l)&&L(C-f)===L(t-f)?new tt.Point(O,C):new tt.Point(E,k)}},{key:"proportionalEdgePoint",value:function(e,t){if(this.isPoint())return this;if(this.isPerfectCircle()){var r,n=e-this.x,i=t-this.y;return r=Math.abs(n)<p.machinePrecision&&Math.abs(i)<p.machinePrecision?-Math.PI/2:Math.atan2(i,n),new tt.Point(this.x-this.r*Math.cos(r),this.y-this.r*Math.sin(r))}Math.PI;var a=this.l,o=this.r,s=this.u,u=this.d,c=this.x,h=this.y,l=c+(o-a)/2,f=h+(s-u)/2,d=(a+o)/2,m=(s+u)/2,y=-(n=e-c),x=(i=t-h)*d,v=y*m,g=x*x+v*v,M=-(u=x*l+v*f+((n*h-i*c)*d+(d-m)*y*f))/g,w=g*d*d-u*u;if(w<0)return new tt.Point(this.x,this.y-this.d);var b=Math.sqrt(w)/g,S=m/d,O=x*M+v*b+l,C=S*(v*M-x*b+f-f)+f,E=x*M-v*b+l,k=S*(v*M+x*b+f-f)+f;return sign(O-l)===sign(e-l)&&sign(C-f)===sign(t-f)?new tt.Point(E,k):new tt.Point(O,C)}},{key:"grow",value:function(e,t){return new tt.Ellipse(this.x,this.y,Math.max(0,this.l+e),Math.max(0,this.r+e),Math.max(0,this.u+t),Math.max(0,this.d+t))}},{key:"toSize",value:function(e,t){var r,n,i,a,o=this.l+this.r,s=this.u+this.d;return 0===o?(a=e/2,i=e/2):(a=e*this.l/o,i=e*this.r/o),0===s?(r=t/2,n=t/2):(r=t*this.u/s,n=t*this.d/s),new tt.Ellipse(this.x,this.y,a,i,r,n)}},{key:"growTo",value:function(e,t){var r=this.u,n=this.d,i=this.r,a=this.l,o=a+i,s=r+n;return e>o&&(0===o?(a=e/2,i=e/2):(a=e*this.l/o,i=e*this.r/o)),t>s&&(0===s?(r=t/2,n=t/2):(r=t*this.u/s,n=t*this.d/s)),new tt.Ellipse(this.x,this.y,a,i,r,n)}},{key:"shrinkTo",value:function(e,t){var r=this.u,n=this.d,i=this.r,a=this.l,o=a+i,s=r+n;return e<o&&(0===o?(a=e/2,i=e/2):(a=e*this.l/o,i=e*this.r/o)),t<s&&(0===s?(r=t/2,n=t/2):(r=t*this.u/s,n=t*this.d/s)),new tt.Ellipse(this.x,this.y,a,i,r,n)}},{key:"move",value:function(e,t){return new tt.Ellipse(e,t,this.l,this.r,this.u,this.d)}},{key:"shiftFrame",value:function(e,t){return new tt.Ellipse(this.x,this.y,Math.max(0,this.l-e),Math.max(0,this.r+e),Math.max(0,this.u+t),Math.max(0,this.d-t))}},{key:"rotate",value:function(e){return this}},{key:"contains",value:function(e){var t=e.x,r=e.y;if(this.isPoint())return!1;var n=this.l,i=this.r,a=this.u,o=this.d,s=(n+i)/2,u=t-(this.x+(i-n)/2),c=(r-(this.y+(a-o)/2))/((a+o)/2/s);return u*u+c*c<=s*s}},{key:"toString",value:function(){return"{x:"+this.x+", y:"+this.y+", l:"+this.l+", r:"+this.r+", u:"+this.u+", d:"+this.d+"}"}}]),r}(tt);var pt=function(){function e(){ct(this,e)}return lt(e,[{key:"isNone",get:function(){return!1}}]),e}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=gt(e);if(t){var i=gt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xt(this,r)}}function xt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?vt(e):t}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bt(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),e}pt.NoneShape=function(e){nt(r,e);var t=at(r);function r(){return ct(this,r),t.call(this)}return lt(r,[{key:"draw",value:function(e){}},{key:"getBoundingBox",value:function(){}},{key:"toString",value:function(){return"NoneShape"}},{key:"isNone",get:function(){return!0}}]),r}(pt),pt.none=new pt.NoneShape,pt.InvisibleBoxShape=function(e){nt(r,e);var t=at(r);function r(e){var n;return ct(this,r),(n=t.call(this)).bbox=e,n}return lt(r,[{key:"draw",value:function(e){}},{key:"getBoundingBox",value:function(){return this.bbox}},{key:"toString",value:function(){return"InvisibleBoxShape[bbox:"+this.bbox.toString()+"]"}}]),r}(pt),pt.TranslateShape=function(e){nt(r,e);var t=at(r);function r(e,n,i){var a;return ct(this,r),(a=t.call(this)).dx=e,a.dy=n,a.shape=i,He(st(a),"getBoundingBox"),a}return lt(r,[{key:"draw",value:function(e){var t=e.createGroup(e.transformBuilder().translate(this.dx,this.dy));this.shape.draw(t)}},{key:"getBoundingBox",value:function(){var e=this.shape.getBoundingBox();if(void 0!==e)return new tt.Rect(e.x+this.dx,e.y+this.dy,e)}},{key:"toString",value:function(){return"TranslateShape[dx:"+this.dx+", dy:"+this.dy+", shape:"+this.shape.toString()+"]"}}]),r}(pt),pt.CompositeShape=function(e){nt(r,e);var t=at(r);function r(e,n){var i;return ct(this,r),(i=t.call(this)).foregroundShape=e,i.backgroundShape=n,He(st(i),"getBoundingBox"),i}return lt(r,[{key:"draw",value:function(e){this.backgroundShape.draw(e),this.foregroundShape.draw(e)}},{key:"getBoundingBox",value:function(){return tt.combineRect(this.foregroundShape.getBoundingBox(),this.backgroundShape.getBoundingBox())}},{key:"toString",value:function(){return"("+this.foregroundShape.toString()+", "+this.backgroundShape.toString()+")"}}]),r}(pt),pt.ChangeColorShape=function(e){nt(r,e);var t=at(r);function r(e,n){var i;return ct(this,r),(i=t.call(this)).color=e,i.shape=n,He(st(i),"getBoundingBox"),i}return lt(r,[{key:"draw",value:function(e){var t=e.createChangeColorGroup(this.color);this.shape.draw(t)}},{key:"getBoundingBox",value:function(){return this.shape.getBoundingBox()}},{key:"toString",value:function(){return this.shape+", color:"+this.color}}]),r}(pt),pt.CircleSegmentShape=function(t){nt(n,t);var r=at(n);function n(e,t,i,a,o,s,u,c,h){var l;return ct(this,n),(l=r.call(this)).x=e,l.y=t,l.sx=i,l.sy=a,l.r=o,l.large=s,l.flip=u,l.ex=c,l.ey=h,He(st(l),"getBoundingBox"),l}return lt(n,[{key:"draw",value:function(t){t.createSVGElement("path",{d:"M"+e.MathJax.xypic.measure.em2px(this.sx)+","+e.MathJax.xypic.measure.em2px(-this.sy)+" A"+e.MathJax.xypic.measure.em2px(this.r)+","+e.MathJax.xypic.measure.em2px(this.r)+" 0 "+this.large+","+this.flip+" "+e.MathJax.xypic.measure.em2px(this.ex)+","+e.MathJax.xypic.measure.em2px(-this.ey)})}},{key:"getBoundingBox",value:function(){return new tt.Ellipse(this.x,this.y,this.r,this.r,this.r,this.r)}},{key:"toString",value:function(){return"CircleSegmentShape[x:"+this.x+", y:"+this.y+", sx:"+this.sx+", sy:"+this.sy+", r:"+this.r+", large:"+this.large+", flip:"+this.flip+", ex:"+this.ex+", ey:"+this.ey+"]"}}]),n}(pt),pt.FullCircleShape=function(t){nt(n,t);var r=at(n);function n(e,t,i){var a;return ct(this,n),(a=r.call(this)).x=e,a.y=t,a.r=i,He(st(a),"getBoundingBox"),a}return lt(n,[{key:"draw",value:function(t){t.createSVGElement("circle",{cx:e.MathJax.xypic.measure.em2px(this.x),cy:e.MathJax.xypic.measure.em2px(-this.y),r:e.MathJax.xypic.measure.em2px(this.r)})}},{key:"getBoundingBox",value:function(){return new tt.Ellipse(this.x,this.y,this.r,this.r,this.r,this.r)}},{key:"toString",value:function(){return"FullCircleShape[x:"+this.x+", y:"+this.y+", r:"+this.r+"]"}}]),n}(pt),pt.RectangleShape=function(t){nt(n,t);var r=at(n);function n(e,t,i,a,o,s,u,c,h,l,p,f){var d;return ct(this,n),(d=r.call(this)).x=e,d.y=t,d.left=i,d.right=a,d.up=o,d.down=s,d.r=u,d.isDoubled=c,d.color=h,d.dasharray=l,d.fillColor=p,d.hideLine=f||!1,He(st(d),"getBoundingBox"),d}return lt(n,[{key:"draw",value:function(t){var r;r={x:e.MathJax.xypic.measure.em2px(this.x-this.left),y:-e.MathJax.xypic.measure.em2px(this.y+this.up),width:e.MathJax.xypic.measure.em2px(this.left+this.right),height:e.MathJax.xypic.measure.em2px(this.up+this.down),rx:e.MathJax.xypic.measure.em2px(this.r)},void 0!==this.dasharray&&(r["stroke-dasharray"]=this.dasharray),this.hideLine?r.stroke="none":void 0!==this.color&&(r.stroke=this.color),void 0!==this.fillColor&&(r.fill=this.fillColor),t.createSVGElement("rect",r),this.isDoubled&&(r={x:e.MathJax.xypic.measure.em2px(this.x-this.left+e.MathJax.xypic.measure.thickness),y:-e.MathJax.xypic.measure.em2px(this.y+this.up-e.MathJax.xypic.measure.thickness),width:e.MathJax.xypic.measure.em2px(this.left+this.right-2*e.MathJax.xypic.measure.thickness),height:e.MathJax.xypic.measure.em2px(this.up+this.down-2*e.MathJax.xypic.measure.thickness),rx:e.MathJax.xypic.measure.em2px(Math.max(this.r-e.MathJax.xypic.measure.thickness,0))},void 0!==this.dasharray&&(r["stroke-dasharray"]=this.dasharray),this.hideLine?r.stroke="none":void 0!==this.color&&(r.stroke=this.color),void 0!==this.fillColor&&(r.fill=this.fillColor),t.createSVGElement("rect",r))}},{key:"getBoundingBox",value:function(){return new tt.Rect(this.x,this.y,{l:this.left,r:this.right,u:this.up,d:this.down})}},{key:"toString",value:function(){return"RectangleShape[x:"+this.x+", y:"+this.y+", left:"+this.left+", right:"+this.right+", up:"+this.up+", down:"+this.down+", r:"+this.r+", isDouble:"+this.isDouble+", dasharray:"+this.dasharray+"]"}}]),n}(pt),pt.EllipseShape=function(t){nt(n,t);var r=at(n);function n(e,t,i,a,o,s,u,c,h){var l;return ct(this,n),(l=r.call(this)).x=e,l.y=t,l.rx=i,l.ry=a,l.isDoubled=o,l.color=s,l.dasharray=u,l.fillColor=c,l.hideLine=h||!1,He(st(l),"getBoundingBox"),l}return lt(n,[{key:"draw",value:function(t){var r;r={cx:e.MathJax.xypic.measure.em2px(this.x),cy:-e.MathJax.xypic.measure.em2px(this.y),rx:e.MathJax.xypic.measure.em2px(this.rx),ry:e.MathJax.xypic.measure.em2px(this.ry)},void 0!==this.dasharray&&(r["stroke-dasharray"]=this.dasharray),this.hideLine?r.stroke="none":void 0!==this.color&&(r.stroke=this.color),void 0!==this.fillColor&&(r.fill=this.fillColor),t.createSVGElement("ellipse",r),this.isDoubled&&(r={cx:e.MathJax.xypic.measure.em2px(this.x),cy:-e.MathJax.xypic.measure.em2px(this.y),rx:e.MathJax.xypic.measure.em2px(Math.max(this.rx-e.MathJax.xypic.measure.thickness)),ry:e.MathJax.xypic.measure.em2px(Math.max(this.ry-e.MathJax.xypic.measure.thickness))},void 0!==this.dasharray&&(r["stroke-dasharray"]=this.dasharray),this.hideLine?r.stroke="none":void 0!==this.color&&(r.stroke=this.color),void 0!==this.fillColor&&(r.fill=this.fillColor),t.createSVGElement("ellipse",r))}},{key:"getBoundingBox",value:function(){return new tt.Rect(this.x,this.y,{l:this.rx,r:this.rx,u:this.ry,d:this.ry})}},{key:"toString",value:function(){return"EllipseShape[x:"+this.x+", y:"+this.y+", rx:"+this.rx+", ry:"+this.ry+", isDoubled:"+this.isDoubled+", dasharray:"+this.dasharray+"]"}}]),n}(pt),pt.BoxShadeShape=function(t){nt(n,t);var r=at(n);function n(e,t,i,a,o,s,u,c){var h;return ct(this,n),(h=r.call(this)).x=e,h.y=t,h.left=i,h.right=a,h.up=o,h.down=s,h.depth=u,h.color=c||"currentColor",He(st(h),"getBoundingBox"),h}return lt(n,[{key:"draw",value:function(t){var r=e.MathJax.xypic.measure.em2px(this.x),n=e.MathJax.xypic.measure.em2px(this.y),i=e.MathJax.xypic.measure.em2px(this.left),a=e.MathJax.xypic.measure.em2px(this.right),o=e.MathJax.xypic.measure.em2px(this.up),s=e.MathJax.xypic.measure.em2px(this.down),u=e.MathJax.xypic.measure.em2px(this.depth);t.createSVGElement("path",{d:"M"+(r-i+u)+","+(-n+s)+"L"+(r+a)+","+(-n+s)+"L"+(r+a)+","+(-n-o+u)+"L"+(r+a+u)+","+(-n-o+u)+"L"+(r+a+u)+","+(-n+s+u)+"L"+(r-i+u)+","+(-n+s+u)+"Z",stroke:this.color,fill:this.color})}},{key:"getBoundingBox",value:function(){return new tt.Rect(this.x,this.y,{l:this.left,r:this.right+this.depth,u:this.up,d:this.down+this.depth})}},{key:"toString",value:function(){return"RectangleShape[x:"+this.x+", y:"+this.y+", left:"+this.left+", right:"+this.right+", up:"+this.up+", down:"+this.down+", depth:"+this.depth+"]"}}]),n}(pt),pt.LeftBrace=function(t){nt(n,t);var r=at(n);function n(e,t,i,a,o,s){var u;return ct(this,n),(u=r.call(this)).x=e,u.y=t,u.up=i,u.down=a,u.degree=o,u.color=s||"currentColor",He(st(u),"getBoundingBox"),u}return lt(n,[{key:"draw",value:function(t){var r,n=e.MathJax.xypic.measure.oneem,i=Math.max(1.41975,this.down/n*1.125)-.660375,a=.660375-Math.max(1.41975,this.up/n*1.125);r="M"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(i)+"T"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(.07875+i)+"Q"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(.190125+i)+" "+e.MathJax.xypic.measure.em2px(-.0585)+" "+e.MathJax.xypic.measure.em2px(.250875+i)+"T"+e.MathJax.xypic.measure.em2px(-.01125)+" "+e.MathJax.xypic.measure.em2px(.387+i)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(.55575+i)+" "+e.MathJax.xypic.measure.em2px(.2475)+" "+e.MathJax.xypic.measure.em2px(.6525+i)+"L"+e.MathJax.xypic.measure.em2px(.262125)+" "+e.MathJax.xypic.measure.em2px(.660375+i)+"L"+e.MathJax.xypic.measure.em2px(.3015)+" "+e.MathJax.xypic.measure.em2px(.660375+i)+"L"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(.653625+i)+"V"+e.MathJax.xypic.measure.em2px(.622125+i)+"Q"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(.60975+i)+" "+e.MathJax.xypic.measure.em2px(.2925)+" "+e.MathJax.xypic.measure.em2px(.60075+i)+"Q"+e.MathJax.xypic.measure.em2px(.205875)+" "+e.MathJax.xypic.measure.em2px(.541125+i)+" "+e.MathJax.xypic.measure.em2px(.149625)+" "+e.MathJax.xypic.measure.em2px(.44775+i)+"T"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(.239625+i)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(.2385+i)+" "+e.MathJax.xypic.measure.em2px(.073125)+" "+e.MathJax.xypic.measure.em2px(.235125+i)+"Q"+e.MathJax.xypic.measure.em2px(.068625)+" "+e.MathJax.xypic.measure.em2px(.203625+i)+" "+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(.041625+i)+"L"+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(.75825)+"Q"+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(.496125)+" "+e.MathJax.xypic.measure.em2px(.066375)+" "+e.MathJax.xypic.measure.em2px(.486)+"Q"+e.MathJax.xypic.measure.em2px(.05625)+" "+e.MathJax.xypic.measure.em2px(.336375)+" "+e.MathJax.xypic.measure.em2px(-.021375)+" "+e.MathJax.xypic.measure.em2px(.212625)+"T"+e.MathJax.xypic.measure.em2px(-.226125)+" "+e.MathJax.xypic.measure.em2px(.010125)+"L"+e.MathJax.xypic.measure.em2px(-.241875)+" 0L"+e.MathJax.xypic.measure.em2px(-.226125)+" "+e.MathJax.xypic.measure.em2px(-.010125)+"Q"+e.MathJax.xypic.measure.em2px(-.106875)+" "+e.MathJax.xypic.measure.em2px(-.084375)+" "+e.MathJax.xypic.measure.em2px(-.025875)+" "+e.MathJax.xypic.measure.em2px(-.207)+"T"+e.MathJax.xypic.measure.em2px(.066375)+" "+e.MathJax.xypic.measure.em2px(-.486)+"Q"+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(-.496125)+" "+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(-.75825)+"L"+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(-.041625+a)+"Q"+e.MathJax.xypic.measure.em2px(.068625)+" "+e.MathJax.xypic.measure.em2px(-.203625+a)+" "+e.MathJax.xypic.measure.em2px(.073125)+" "+e.MathJax.xypic.measure.em2px(-.235125+a)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(-.2385+a)+" "+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(-.239625+a)+"Q"+e.MathJax.xypic.measure.em2px(.093375)+" "+e.MathJax.xypic.measure.em2px(-.354375+a)+" "+e.MathJax.xypic.measure.em2px(.149625)+" "+e.MathJax.xypic.measure.em2px(-.44775+a)+"T"+e.MathJax.xypic.measure.em2px(.2925)+" "+e.MathJax.xypic.measure.em2px(-.60075+a)+"Q"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(-.60975+a)+" "+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(-.622125+a)+"L"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(-.653625+a)+"L"+e.MathJax.xypic.measure.em2px(.3015)+" "+e.MathJax.xypic.measure.em2px(-.660375+a)+"L"+e.MathJax.xypic.measure.em2px(.262125)+" "+e.MathJax.xypic.measure.em2px(-.660375+a)+"L"+e.MathJax.xypic.measure.em2px(.2475)+" "+e.MathJax.xypic.measure.em2px(-.6525+a)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(-.55575+a)+" "+e.MathJax.xypic.measure.em2px(-.01125)+" "+e.MathJax.xypic.measure.em2px(-.387+a)+"Q"+e.MathJax.xypic.measure.em2px(-.048375)+" "+e.MathJax.xypic.measure.em2px(-.311625+a)+" "+e.MathJax.xypic.measure.em2px(-.0585)+" "+e.MathJax.xypic.measure.em2px(-.250875+a)+"T"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(-.07875+a)+"Q"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(a)+" "+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(a)+"L"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(-.759375)+"V"+e.MathJax.xypic.measure.em2px(-.5985)+"Q"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(-.47925)+" "+e.MathJax.xypic.measure.em2px(-.075375)+" "+e.MathJax.xypic.measure.em2px(-.41175)+"T"+e.MathJax.xypic.measure.em2px(-.11475)+" "+e.MathJax.xypic.measure.em2px(-.27)+"Q"+e.MathJax.xypic.measure.em2px(-.133875)+" "+e.MathJax.xypic.measure.em2px(-.2205)+" "+e.MathJax.xypic.measure.em2px(-.160875)+" "+e.MathJax.xypic.measure.em2px(-.17775)+"T"+e.MathJax.xypic.measure.em2px(-.212625)+" "+e.MathJax.xypic.measure.em2px(-.106875)+"T"+e.MathJax.xypic.measure.em2px(-.25875)+" "+e.MathJax.xypic.measure.em2px(-.06075)+"T"+e.MathJax.xypic.measure.em2px(-.293625)+" "+e.MathJax.xypic.measure.em2px(-.0315)+"T"+e.MathJax.xypic.measure.em2px(-.307125)+" "+e.MathJax.xypic.measure.em2px(-.02025)+"Q"+e.MathJax.xypic.measure.em2px(-.30825)+" "+e.MathJax.xypic.measure.em2px(-.019125)+" "+e.MathJax.xypic.measure.em2px(-.30825)+" 0T"+e.MathJax.xypic.measure.em2px(-.307125)+" "+e.MathJax.xypic.measure.em2px(.02025)+"Q"+e.MathJax.xypic.measure.em2px(-.307125)+" "+e.MathJax.xypic.measure.em2px(.021375)+" "+e.MathJax.xypic.measure.em2px(-.284625)+" "+e.MathJax.xypic.measure.em2px(.03825)+"T"+e.MathJax.xypic.measure.em2px(-.2295)+" "+e.MathJax.xypic.measure.em2px(.091125)+"T"+e.MathJax.xypic.measure.em2px(-.162)+" "+e.MathJax.xypic.measure.em2px(.176625)+"T"+e.MathJax.xypic.measure.em2px(-.10125)+" "+e.MathJax.xypic.measure.em2px(.30825)+"T"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(.482625)+"Q"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(.496125)+" "+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(.759375)+"Z",t.createSVGElement("path",{d:r,fill:this.color,stroke:this.color,"stroke-width":"0pt",transform:"translate("+e.MathJax.xypic.measure.em2px(this.x)+","+e.MathJax.xypic.measure.em2px(-this.y)+") rotate("+-this.degree+") scale("+n/1.125+")"})}},{key:"getBoundingBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return new tt.Rect(this.x,this.y,{l:.274*t,r:.274*t,u:Math.max(1.41975*t/1.125,this.up),d:Math.max(1.41975*t/1.125,this.down)}).rotate(this.degree*Math.PI/180)}},{key:"toString",value:function(){return"LeftBrace[x:"+this.x+", y:"+this.y+", up:"+this.up+", down:"+this.down+"]"}}]),n}(pt),pt.LeftParenthesis=function(t){nt(n,t);var r=at(n);function n(e,t,i,a,o){var s;return ct(this,n),(s=r.call(this)).x=e,s.y=t,s.height=i,s.degree=a,s.color=o||"currentColor",He(st(s),"getBoundingBox"),s}return lt(n,[{key:"draw",value:function(t){var r,n=e.MathJax.xypic.measure.oneem,i=Math.max(.660375,this.height/2/n*1.125)-.660375,a=-i;r="M"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(i)+"T"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(.07875+i)+"Q"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(.190125+i)+" "+e.MathJax.xypic.measure.em2px(-.0585)+" "+e.MathJax.xypic.measure.em2px(.250875+i)+"T"+e.MathJax.xypic.measure.em2px(-.01125)+" "+e.MathJax.xypic.measure.em2px(.387+i)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(.55575+i)+" "+e.MathJax.xypic.measure.em2px(.2475)+" "+e.MathJax.xypic.measure.em2px(.6525+i)+"L"+e.MathJax.xypic.measure.em2px(.262125)+" "+e.MathJax.xypic.measure.em2px(.660375+i)+"L"+e.MathJax.xypic.measure.em2px(.3015)+" "+e.MathJax.xypic.measure.em2px(.660375+i)+"L"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(.653625+i)+"V"+e.MathJax.xypic.measure.em2px(.622125+i)+"Q"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(.60975+i)+" "+e.MathJax.xypic.measure.em2px(.2925)+" "+e.MathJax.xypic.measure.em2px(.60075+i)+"Q"+e.MathJax.xypic.measure.em2px(.205875)+" "+e.MathJax.xypic.measure.em2px(.541125+i)+" "+e.MathJax.xypic.measure.em2px(.149625)+" "+e.MathJax.xypic.measure.em2px(.44775+i)+"T"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(.239625+i)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(.2385+i)+" "+e.MathJax.xypic.measure.em2px(.073125)+" "+e.MathJax.xypic.measure.em2px(.235125+i)+"Q"+e.MathJax.xypic.measure.em2px(.068625)+" "+e.MathJax.xypic.measure.em2px(.203625+i)+" "+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(.041625+i)+"L"+e.MathJax.xypic.measure.em2px(.0675)+" "+e.MathJax.xypic.measure.em2px(-.041625+a)+"Q"+e.MathJax.xypic.measure.em2px(.068625)+" "+e.MathJax.xypic.measure.em2px(-.203625+a)+" "+e.MathJax.xypic.measure.em2px(.073125)+" "+e.MathJax.xypic.measure.em2px(-.235125+a)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(-.2385+a)+" "+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(-.239625+a)+"Q"+e.MathJax.xypic.measure.em2px(.093375)+" "+e.MathJax.xypic.measure.em2px(-.354375+a)+" "+e.MathJax.xypic.measure.em2px(.149625)+" "+e.MathJax.xypic.measure.em2px(-.44775+a)+"T"+e.MathJax.xypic.measure.em2px(.2925)+" "+e.MathJax.xypic.measure.em2px(-.60075+a)+"Q"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(-.60975+a)+" "+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(-.622125+a)+"L"+e.MathJax.xypic.measure.em2px(.30825)+" "+e.MathJax.xypic.measure.em2px(-.653625+a)+"L"+e.MathJax.xypic.measure.em2px(.3015)+" "+e.MathJax.xypic.measure.em2px(-.660375+a)+"L"+e.MathJax.xypic.measure.em2px(.262125)+" "+e.MathJax.xypic.measure.em2px(-.660375+a)+"L"+e.MathJax.xypic.measure.em2px(.2475)+" "+e.MathJax.xypic.measure.em2px(-.6525+a)+"Q"+e.MathJax.xypic.measure.em2px(.07425)+" "+e.MathJax.xypic.measure.em2px(-.55575+a)+" "+e.MathJax.xypic.measure.em2px(-.01125)+" "+e.MathJax.xypic.measure.em2px(-.387+a)+"Q"+e.MathJax.xypic.measure.em2px(-.048375)+" "+e.MathJax.xypic.measure.em2px(-.311625+a)+" "+e.MathJax.xypic.measure.em2px(-.0585)+" "+e.MathJax.xypic.measure.em2px(-.250875+a)+"T"+e.MathJax.xypic.measure.em2px(-.068625)+" "+e.MathJax.xypic.measure.em2px(-.07875+a)+"Q"+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(a)+" "+e.MathJax.xypic.measure.em2px(-.0675)+" "+e.MathJax.xypic.measure.em2px(a)+"Z",t.createSVGElement("path",{d:r,fill:this.color,stroke:this.color,"stroke-width":"0pt",transform:"translate("+e.MathJax.xypic.measure.em2px(this.x)+","+e.MathJax.xypic.measure.em2px(-this.y)+") rotate("+-this.degree+") scale("+n/1.125+")"})}},{key:"getBoundingBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return new tt.Rect(this.x,this.y,{l:.06*t,r:.274*t,u:Math.max(.660375*t/1.125,this.height/2),d:Math.max(.660375*t/1.125,this.height/2)}).rotate(this.degree*Math.PI/180)}},{key:"toString",value:function(){return"LeftBrace[x:"+this.x+", y:"+this.y+", up:"+this.up+", down:"+this.down+"]"}}]),n}(pt),pt.TextShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.math=t,i.originalBBox=void 0,He(st(i),"getBoundingBox"),He(st(i),"getOriginalReferencePoint"),i}return lt(n,[{key:"draw",value:function(e){this._draw(e,!1)}},{key:"getBoundingBox",value:function(){return this._draw(e.MathJax.xypic.svgForTestLayout,!0)}},{key:"getOriginalReferencePoint",value:function(){this.getBoundingBox();var e=this.originalBBox,t=this.c,r=e.H,n=e.D;return new tt.Point(t.x,t.y-(r-n)/2)}},{key:"toString",value:function(){return"TextShape[c:"+this.c.toString()+", math:"+this.math.toString()+"]"}}]),n}(pt),pt.ImageShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.url=t,He(st(i),"getBoundingBox"),He(st(i),"getOriginalReferencePoint"),i}return lt(n,[{key:"draw",value:function(t){var r=this.c;t.createSVGElement("image",{x:e.MathJax.xypic.measure.em2px(r.x-r.l),y:e.MathJax.xypic.measure.em2px(-r.y-r.u),width:e.MathJax.xypic.measure.em2px(r.l+r.r),height:e.MathJax.xypic.measure.em2px(r.u+r.d),preserveAspectRatio:"none","xlink:href":this.url})}},{key:"getBoundingBox",value:function(){return this.c}},{key:"getOriginalReferencePoint",value:function(){return this.c}},{key:"toString",value:function(){return"ImageShape[c:"+this.c.toString()+", height:"+this.height+", width:"+this.width+", url:"+this.url+"]"}}]),n}(pt),pt.ArrowheadShape=function(e){nt(r,e);var t=at(r);function r(){return ct(this,r),t.call(this)}return lt(r,[{key:"draw",value:function(e){var t=e.createGroup(e.transformBuilder().translate(this.c.x,this.c.y).rotateRadian(this.angle));this.drawDelegate(t)}},{key:"getBoundingBox",value:function(){return this.c.toRect(this.getBox()).rotate(this.angle)}},{key:"toString",value:function(){return"ArrowheadShape[c:"+this.c.toString()+", angle:"+this.angle+"]"}}]),r}(pt),pt.GT2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.456*t,r:0,d:.229*t,u:.229*t}}},{key:"getRadius",value:function(){return.213*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=t.createGroup(t.transformBuilder().rotateDegree(-10)),i=t.createGroup(t.transformBuilder().rotateDegree(10));n.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.GT3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.507*t,r:0,d:.268*t,u:.268*t}}},{key:"getRadius",value:function(){return.325*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=t.createGroup(t.transformBuilder().rotateDegree(-15)),i=t.createGroup(t.transformBuilder().rotateDegree(15));n.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("line",{x1:0,y1:0,x2:e.MathJax.xypic.measure.em2px(-.507*r),y2:0}),i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.UpperGTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.489*t,r:0,d:0,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem;t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.LowerGTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.489*t,r:0,d:.147*t,u:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem;t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.GTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.489*t,r:0,d:.147*t,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem;t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.LT2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.456*t,d:.229*t,u:.229*t}}},{key:"getRadius",value:function(){return.213*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=t.createGroup(t.transformBuilder().rotateDegree(10)),i=t.createGroup(t.transformBuilder().rotateDegree(-10));n.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.LT3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.507*t,d:.268*t,u:.268*t}}},{key:"getRadius",value:function(){return.325*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=t.createGroup(t.transformBuilder().rotateDegree(15)),i=t.createGroup(t.transformBuilder().rotateDegree(-15));n.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("line",{x1:0,y1:0,x2:e.MathJax.xypic.measure.em2px(.507*r),y2:0}),i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.UpperLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.489*t,d:0,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem;t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.LowerLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.489*t,d:.147*t,u:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem;t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.LTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.489*t,d:.147*t,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem;t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.UpperColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:0,y2:-r})}}]),n}(pt.ArrowheadShape),pt.LowerColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:0,d:e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:0,y2:r})}}]),n}(pt.ArrowheadShape),pt.Column2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness),d:.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness)}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness));t.createSVGElement("line",{x1:0,y1:r,x2:0,y2:-r})}}]),n}(pt.ArrowheadShape),pt.Column3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness,d:.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness);t.createSVGElement("line",{x1:0,y1:r,x2:0,y2:-r})}}]),n}(pt.ArrowheadShape),pt.ColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:r,x2:0,y2:-r})}}]),n}(pt.ArrowheadShape),pt.UpperLParenArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:0,u:e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,1 0,"+-2*r})}}]),n}(pt.ArrowheadShape),pt.LowerLParenArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:0,u:0,d:e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,0 0,"+2*r})}}]),n}(pt.ArrowheadShape),pt.LParenArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.5*e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M"+r+","+-r+" A "+r+","+r+" 0 0,0 "+r+","+r})}}]),n}(pt.ArrowheadShape),pt.UpperRParenArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.5*e.MathJax.xypic.measure.lineElementLength,u:e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,0 0,"+-2*r})}}]),n}(pt.ArrowheadShape),pt.LowerRParenArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.5*e.MathJax.xypic.measure.lineElementLength,u:0,d:e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,1 0,"+2*r})}}]),n}(pt.ArrowheadShape),pt.RParenArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M"+-r+","+-r+" A "+r+","+r+" 0 0,1 "+-r+","+r})}}]),n}(pt.ArrowheadShape),pt.LowerBackquoteArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:0,u:0,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,0 "+-r+","+r})}}]),n}(pt.ArrowheadShape),pt.UpperBackquoteArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,1 "+-r+","+-r})}}]),n}(pt.ArrowheadShape),pt.LowerQuoteArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.5*e.MathJax.xypic.measure.lineElementLength,u:0,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,1 "+r+","+r})}}]),n}(pt.ArrowheadShape),pt.UpperQuoteArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.5*e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("path",{d:"M0,0 A "+r+","+r+" 0 0,0 "+r+","+-r})}}]),n}(pt.ArrowheadShape),pt.AsteriskArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=0,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:e.MathJax.xypic.measure.thickness,u:e.MathJax.xypic.measure.thickness,d:e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){t.createSVGElement("circle",{cx:0,cy:0,r:e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness),fill:"currentColor"})}}]),n}(pt.ArrowheadShape),pt.OArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=0,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:e.MathJax.xypic.measure.thickness,u:e.MathJax.xypic.measure.thickness,d:e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){t.createSVGElement("circle",{cx:0,cy:0,r:e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness)})}}]),n}(pt.ArrowheadShape),pt.PlusArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:.5*e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.lineElementLength/2,n=e.MathJax.xypic.measure.em2px(r);t.createSVGElement("line",{x1:-n,y1:0,x2:n,y2:0}),t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n})}}]),n}(pt.ArrowheadShape),pt.XArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t+Math.PI/4,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.5*e.MathJax.xypic.measure.lineElementLength,r:.5*e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.lineElementLength/2,n=e.MathJax.xypic.measure.em2px(r);t.createSVGElement("line",{x1:-n,y1:0,x2:n,y2:0}),t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n})}}]),n}(pt.ArrowheadShape),pt.SlashArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t-Math.PI/10,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:e.MathJax.xypic.measure.lineElementLength/2,d:e.MathJax.xypic.measure.lineElementLength/2}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.lineElementLength/2,n=e.MathJax.xypic.measure.em2px(r);t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n})}}]),n}(pt.ArrowheadShape),pt.Line3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:e.MathJax.xypic.measure.thickness,d:e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength),n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness);t.createSVGElement("line",{x1:0,y1:n,x2:r,y2:n}),t.createSVGElement("line",{x1:0,y1:0,x2:r,y2:0}),t.createSVGElement("line",{x1:0,y1:-n,x2:r,y2:-n})}}]),n}(pt.ArrowheadShape),pt.Line2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.thickness,d:.5*e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.thickness),n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:r,x2:n,y2:r}),t.createSVGElement("line",{x1:0,y1:-r,x2:n,y2:-r})}}]),n}(pt.ArrowheadShape),pt.LineArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:0,d:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:r,y2:0})}}]),n}(pt.ArrowheadShape),pt.Dot3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:e.MathJax.xypic.measure.thickness,d:e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.oneem;var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness),n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness),i=e.MathJax.xypic.measure.dottedDasharray;t.createSVGElement("line",{x1:0,y1:r,x2:n,y2:r,"stroke-dasharray":i}),t.createSVGElement("line",{x1:0,y1:0,x2:n,y2:0,"stroke-dasharray":i}),t.createSVGElement("line",{x1:0,y1:-r,x2:n,y2:-r,"stroke-dasharray":i})}}]),n}(pt.ArrowheadShape),pt.Dot2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:.5*e.MathJax.xypic.measure.thickness,d:.5*e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.thickness),n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness),i=e.MathJax.xypic.measure.dottedDasharray;t.createSVGElement("line",{x1:0,y1:r,x2:n,y2:r,"stroke-dasharray":i}),t.createSVGElement("line",{x1:0,y1:-r,x2:n,y2:-r,"stroke-dasharray":i})}}]),n}(pt.ArrowheadShape),pt.DotArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:0,u:0,d:0}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.oneem;var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness),n=e.MathJax.xypic.measure.dottedDasharray;t.createSVGElement("line",{x1:0,y1:0,x2:r,y2:0,"stroke-dasharray":n})}}]),n}(pt.ArrowheadShape),pt.Tilde3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:-2*e.MathJax.xypic.measure.thickness,r:2*e.MathJax.xypic.measure.thickness,u:2*e.MathJax.xypic.measure.thickness,d:2*e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness);t.createSVGElement("path",{d:"M"+-2*r+","+r+" Q"+-r+",0 0,"+r+" T"+2*r+","+r+"M"+-2*r+",0 Q"+-r+","+-r+" 0,0 T"+2*r+",0M"+-2*r+","+-r+" Q"+-r+","+-2*r+" 0,"+-r+" T"+2*r+","+-r})}}]),n}(pt.ArrowheadShape),pt.Tilde2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:-2*e.MathJax.xypic.measure.thickness,r:2*e.MathJax.xypic.measure.thickness,u:1.5*e.MathJax.xypic.measure.thickness,d:1.5*e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness);t.createSVGElement("path",{d:"M"+-2*r+","+.5*r+" Q"+-r+","+-.5*r+" 0,"+.5*r+" T"+2*r+","+.5*r+"M"+-2*r+","+-.5*r+" Q"+-r+","+-1.5*r+" 0,"+-.5*r+" T"+2*r+","+-.5*r})}}]),n}(pt.ArrowheadShape),pt.TildeArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:-2*e.MathJax.xypic.measure.thickness,r:2*e.MathJax.xypic.measure.thickness,u:e.MathJax.xypic.measure.thickness,d:e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness);t.createSVGElement("path",{d:"M"+-2*r+",0 Q"+-r+","+-r+" 0,0 T"+2*r+",0"})}}]),n}(pt.ArrowheadShape),pt.TildeArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:-2*e.MathJax.xypic.measure.thickness,r:2*e.MathJax.xypic.measure.thickness,u:e.MathJax.xypic.measure.thickness,d:e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness);t.createSVGElement("path",{d:"M"+-2*r+",0 Q"+-r+","+-r+" 0,0 T"+2*r+",0"})}}]),n}(pt.ArrowheadShape),pt.GTGTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.489*t+2*e.MathJax.xypic.measure.thickness,r:0,d:.147*t,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+-i+",0 Q"+(e.MathJax.xypic.measure.em2px(-.222*r)-i)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+(e.MathJax.xypic.measure.em2px(-.489*r)-i)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M"+-i+",0 Q"+(e.MathJax.xypic.measure.em2px(-.222*r)-i)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+(e.MathJax.xypic.measure.em2px(-.489*r)-i)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.UpperGTGTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.489*t+2*e.MathJax.xypic.measure.thickness,r:0,d:0,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+-i+",0 Q"+(e.MathJax.xypic.measure.em2px(-.222*r)-i)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+(e.MathJax.xypic.measure.em2px(-.489*r)-i)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.LowerGTGTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.489*t+2*e.MathJax.xypic.measure.thickness,r:0,d:.147*t,u:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+-i+",0 Q"+(e.MathJax.xypic.measure.em2px(-.222*r)-i)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+(e.MathJax.xypic.measure.em2px(-.489*r)-i)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.GTGT2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.456*t+2*e.MathJax.xypic.measure.thickness,r:0,d:.229*t,u:.229*t}}},{key:"getRadius",value:function(){return.213*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=t.createGroup(t.transformBuilder().rotateDegree(-10)),a=t.createGroup(t.transformBuilder().rotateDegree(10));i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),a.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)});var o=t.createGroup(t.transformBuilder().translate(-2*n,0).rotateDegree(-10)),s=t.createGroup(t.transformBuilder().translate(-2*n,0).rotateDegree(10));o.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),s.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.GTGT3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:.507*t+2*e.MathJax.xypic.measure.thickness,r:0,d:.268*t,u:.268*t}}},{key:"getRadius",value:function(){return.325*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=t.createGroup(t.transformBuilder().rotateDegree(-15)),a=t.createGroup(t.transformBuilder().rotateDegree(15));i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),a.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)});var o=t.createGroup(t.transformBuilder().translate(-2*n,0).rotateDegree(-15)),s=t.createGroup(t.transformBuilder().translate(-2*n,0).rotateDegree(15));o.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),s.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("line",{x1:0,y1:0,x2:e.MathJax.xypic.measure.em2px(-.507*r-2*n),y2:0})}}]),n}(pt.ArrowheadShape),pt.LTLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.489*t+2*e.MathJax.xypic.measure.thickness,d:.147*t,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+i+",0 Q"+(e.MathJax.xypic.measure.em2px(.222*r)+i)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+(e.MathJax.xypic.measure.em2px(.489*r)+i)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M"+i+",0 Q"+(e.MathJax.xypic.measure.em2px(.222*r)+i)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+(e.MathJax.xypic.measure.em2px(.489*r)+i)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.UpperLTLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.489*t+2*e.MathJax.xypic.measure.thickness,d:0,u:.147*t}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+i+",0 Q"+(e.MathJax.xypic.measure.em2px(.222*r)+i)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+(e.MathJax.xypic.measure.em2px(.489*r)+i)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.LowerLTLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.489*t+2*e.MathJax.xypic.measure.thickness,d:.147*t,u:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+i+",0 Q"+(e.MathJax.xypic.measure.em2px(.222*r)+i)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+(e.MathJax.xypic.measure.em2px(.489*r)+i)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.LTLT2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.456+t+2*e.MathJax.xypic.measure.thickness,d:.229*t,u:.229*t}}},{key:"getRadius",value:function(){return.213*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=t.createGroup(t.transformBuilder().translate(2*n,0).rotateDegree(10)),a=t.createGroup(t.transformBuilder().translate(2*n,0).rotateDegree(-10));i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),a.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)});var o=t.createGroup(t.transformBuilder().rotateDegree(10)),s=t.createGroup(t.transformBuilder().rotateDegree(-10));o.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),s.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.LTLT3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:0,r:.507*t+2*e.MathJax.xypic.measure.thickness,d:.268*t,u:.268*t}}},{key:"getRadius",value:function(){return.325*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=t.createGroup(t.transformBuilder().translate(2*n,0).rotateDegree(15)),a=t.createGroup(t.transformBuilder().translate(2*n,0).rotateDegree(-15));i.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),a.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)});var o=t.createGroup(t.transformBuilder().rotateDegree(15)),s=t.createGroup(t.transformBuilder().rotateDegree(-15));o.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),s.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("line",{x1:0,y1:0,x2:e.MathJax.xypic.measure.em2px(.507*r+2*n),y2:0})}}]),n}(pt.ArrowheadShape),pt.ColumnColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n}),t.createSVGElement("line",{x1:-e.MathJax.xypic.measure.em2px(r),y1:n,x2:-e.MathJax.xypic.measure.em2px(r),y2:-n})}}]),n}(pt.ArrowheadShape),pt.UpperColumnColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:0,u:e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:0,y2:-n}),t.createSVGElement("line",{x1:-e.MathJax.xypic.measure.em2px(r),y1:0,x2:-e.MathJax.xypic.measure.em2px(r),y2:-n})}}]),n}(pt.ArrowheadShape),pt.LowerColumnColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:0,u:0,d:e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:0,y2:n}),t.createSVGElement("line",{x1:-e.MathJax.xypic.measure.em2px(r),y1:0,x2:-e.MathJax.xypic.measure.em2px(r),y2:n})}}]),n}(pt.ArrowheadShape),pt.ColumnColumn2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:0,u:.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness),d:.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness)}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=e.MathJax.xypic.measure.em2px(.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness));t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n}),t.createSVGElement("line",{x1:-e.MathJax.xypic.measure.em2px(r),y1:n,x2:-e.MathJax.xypic.measure.em2px(r),y2:-n})}}]),n}(pt.ArrowheadShape),pt.ColumnColumn3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness,d:.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=(r=e.MathJax.xypic.measure.thickness,e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness));t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n}),t.createSVGElement("line",{x1:-e.MathJax.xypic.measure.em2px(r),y1:n,x2:-e.MathJax.xypic.measure.em2px(r),y2:-n})}}]),n}(pt.ArrowheadShape),pt.ColumnLineArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:r,x2:0,y2:-r});var n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:n,y2:0})}}]),n}(pt.ArrowheadShape),pt.UpperColumnLineArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:e.MathJax.xypic.measure.lineElementLength,d:0}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:0,y2:-r});var n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:n,y2:0})}}]),n}(pt.ArrowheadShape),pt.LowerColumnLineArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:0,d:e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.thickness;var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:0,y2:r});var n=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:0,x2:n,y2:0})}}]),n}(pt.ArrowheadShape),pt.ColumnLine2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness),d:.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness)}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=e.MathJax.xypic.measure.em2px(.5*(e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness));t.createSVGElement("line",{x1:0,y1:-n,x2:0,y2:n});var i=e.MathJax.xypic.measure.em2px(.5*r),a=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:i,x2:a,y2:i}),t.createSVGElement("line",{x1:0,y1:-i,x2:a,y2:-i})}}]),n}(pt.ArrowheadShape),pt.ColumnLine3ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:e.MathJax.xypic.measure.lineElementLength,u:.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness,d:.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.thickness,n=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength+e.MathJax.xypic.measure.thickness);t.createSVGElement("line",{x1:0,y1:-n,x2:0,y2:n});var i=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength),a=e.MathJax.xypic.measure.em2px(r);t.createSVGElement("line",{x1:0,y1:a,x2:i,y2:a}),t.createSVGElement("line",{x1:0,y1:0,x2:i,y2:0}),t.createSVGElement("line",{x1:0,y1:-a,x2:i,y2:-a})}}]),n}(pt.ArrowheadShape),pt.GTColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.489*e.MathJax.xypic.measure.oneem,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.GTGTColumnArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:.489*e.MathJax.xypic.measure.oneem+2*e.MathJax.xypic.measure.thickness,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:i,x2:0,y2:-i});var a=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+-a+",0 Q"+(e.MathJax.xypic.measure.em2px(-.222*r)-a)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+(e.MathJax.xypic.measure.em2px(-.489*r)-a)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M"+-a+",0 Q"+(e.MathJax.xypic.measure.em2px(-.222*r)-a)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+(e.MathJax.xypic.measure.em2px(-.489*r)-a)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)})}}]),n}(pt.ArrowheadShape),pt.ColumnLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.489*e.MathJax.xypic.measure.oneem,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=(e.MathJax.xypic.measure.thickness,e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength));t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.ColumnLTLTArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:0,r:.489*e.MathJax.xypic.measure.oneem+2*e.MathJax.xypic.measure.thickness,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.thickness,i=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:i,x2:0,y2:-i});var a=e.MathJax.xypic.measure.em2px(2*n);t.createSVGElement("path",{d:"M"+a+",0 Q"+(e.MathJax.xypic.measure.em2px(.222*r)+a)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+(e.MathJax.xypic.measure.em2px(.489*r)+a)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M"+a+",0 Q"+(e.MathJax.xypic.measure.em2px(.222*r)+a)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+(e.MathJax.xypic.measure.em2px(.489*r)+a)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),t.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)})}}]),n}(pt.ArrowheadShape),pt.SlashSlashArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t-Math.PI/10,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){return{l:e.MathJax.xypic.measure.thickness,r:0,u:.5*e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.lineElementLength}}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.thickness),n=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.lineElementLength);t.createSVGElement("line",{x1:0,y1:n,x2:0,y2:-n}),t.createSVGElement("line",{x1:-r,y1:n,x2:-r,y2:-n})}}]),n}(pt.ArrowheadShape),pt.LineGT2ArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){var t=e.MathJax.xypic.measure.oneem;return{l:e.MathJax.xypic.measure.lineElementLength,r:e.MathJax.xypic.measure.lineElementLength,d:.229*t,u:.229*t}}},{key:"getRadius",value:function(){return.213*e.MathJax.xypic.measure.oneem}},{key:"drawDelegate",value:function(t){var r=e.MathJax.xypic.measure.oneem,n=e.MathJax.xypic.measure.lineElementLength,i=e.MathJax.xypic.measure.em2px(n),a=.5*e.MathJax.xypic.measure.thickness,o=e.MathJax.xypic.measure.em2px(a),s=this.getRadius(),u=e.MathJax.xypic.measure.em2px(Math.sqrt(s*s-a*a)),c=t.createGroup(t.transformBuilder().translate(n,0).rotateDegree(-10)),h=t.createGroup(t.transformBuilder().translate(n,0).rotateDegree(10));c.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(-.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(-.147*r)}),h.createSVGElement("path",{d:"M0,0 Q"+e.MathJax.xypic.measure.em2px(-.222*r)+","+e.MathJax.xypic.measure.em2px(.02*r)+" "+e.MathJax.xypic.measure.em2px(-.489*r)+","+e.MathJax.xypic.measure.em2px(.147*r)}),t.createSVGElement("path",{d:"M"+-i+","+o+" L"+(i-u)+","+o+" M"+-i+","+-o+" L"+(i-u)+","+-o})}}]),n}(pt.ArrowheadShape),pt.TwocellEqualityArrowheadShape=function(t){nt(n,t);var r=at(n);function n(e,t){var i;return ct(this,n),(i=r.call(this)).c=e,i.angle=t,He(st(i),"getBoundingBox"),i}return lt(n,[{key:"getBox",value:function(){e.MathJax.xypic.measure.oneem;return{l:e.MathJax.xypic.measure.lineElementLength,r:e.MathJax.xypic.measure.lineElementLength,d:.5*e.MathJax.xypic.measure.thickness,u:.5*e.MathJax.xypic.measure.thickness}}},{key:"drawDelegate",value:function(t){e.MathJax.xypic.measure.oneem;var r=e.MathJax.xypic.measure.em2px(e.MathJax.xypic.measure.lineElementLength),n=e.MathJax.xypic.measure.em2px(.5*e.MathJax.xypic.measure.thickness);t.createSVGElement("path",{d:"M"+-r+","+n+" L"+r+","+n+" M"+-r+","+-n+" L"+r+","+-n})}}]),n}(pt.ArrowheadShape),pt.LineShape=function(e){nt(r,e);var t=at(r);function r(e,n,i,a,o){var s;return ct(this,r),(s=t.call(this)).line=e,s.object=n,s.main=i,s.variant=a,s.bbox=o,s.holeRanges=B.empty,s}return lt(r,[{key:"sliceHole",value:function(e){this.holeRanges=this.holeRanges.prepend(e)}},{key:"draw",value:function(e){this.line.drawLine(e,this.object,this.main,this.variant,this.holeRanges)}},{key:"getBoundingBox",value:function(){return this.bbox}},{key:"toString",value:function(){return"LineShape[line:"+this.line+", object:"+this.object+", main:"+this.main+", variant:"+this.variant+"]"}}]),r}(pt),pt.CurveShape=function(e){nt(r,e);var t=at(r);function r(e,n,i,a){var o;return ct(this,r),(o=t.call(this)).curve=e,o.objectForDrop=n,o.objectForConnect=i,o.bbox=a,o.holeRanges=B.empty,o}return lt(r,[{key:"sliceHole",value:function(e){this.holeRanges=this.holeRanges.prepend(e)}},{key:"draw",value:function(e){this.curve.drawCurve(e,this.objectForDrop,this.objectForConnect,this.holeRanges)}},{key:"getBoundingBox",value:function(){return this.bbox}},{key:"toString",value:function(){return"CurveShape[curve"+this.curve+", objectForDrop:"+(void 0!==this.objectForDrop?this.objectForDrop.toString():"null")+", objectForConnect:"+(void 0!==this.objectForConnect?this.objectForConnect.toString():"null")+"]"}}]),r}(pt);var St=ze,Ot=function(){function e(){Mt(this,e)}return bt(e,null,[{key:"createSVG",value:function(e,t,r,n,i,a,o){return new Et(e,t,r,n,i,a,o)}}]),e}(),Ct=function(){function e(t){Mt(this,e),this.xypicWrapper=t}return bt(e,[{key:"createElement",value:function(e){return this.xypicWrapper.svg(e)}},{key:"createGroup",value:function(e){return new Rt(this,e)}},{key:"createChangeColorGroup",value:function(e){return new At(this,e)}},{key:"createSVGElement",value:function(e,t){var r=this.createElement(e);if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n].toString();"xlink:href"===n?this.xypicWrapper.setAttribute(r,n,i,"http://www.w3.org/1999/xlink"):this.xypicWrapper.setAttribute(r,n,i)}return this.appendChild(r),r}},{key:"appendChild",value:function(e){return this.xyPicWrapper.adaptor.append(e),e}},{key:"transformBuilder",value:function(){return new kt}}]),e}(),Et=function(e){dt(r,e);var t=yt(r);function r(e,n,i,a,o,s,u){var c;Mt(this,r);var h=(c=t.call(this,e)).createElement("svg");if(c.xypicWrapper.setAttribute(h,"xmlns","http://www.w3.org/2000/svg"),c.xypicWrapper.setAttribute(h,"version","1.1"),u)for(var l in u)u.hasOwnProperty(l)&&c.xypicWrapper.setAttribute(h,l,u[l].toString());h.style&&(h.style.width=MathJax.xypic.measure.Em(a),h.style.height=MathJax.xypic.measure.Em(n+i));u={fill:"none",stroke:s,"stroke-linecap":"round","stroke-width":MathJax.xypic.measure.em2px(o)};for(var p in c.drawArea=c.createElement("g"),u)u.hasOwnProperty(p)&&c.xypicWrapper.setAttribute(c.drawArea,p,u[p].toString());return c.xypicWrapper.append(h,c.drawArea),c.svg=h,c.boundingBox=void 0,c.color=s,c}return bt(r,[{key:"setHeight",value:function(e){this.xypicWrapper.setStyle(this.svg,"height",MathJax.xypic.measure.Em(e))}},{key:"setWidth",value:function(e){this.xypicWrapper.setStyle(this.svg,"width",MathJax.xypic.measure.Em(e))}},{key:"setAttribute",value:function(e,t){this.xypicWrapper.setAttribute(this.svg,e,t.toString())}},{key:"extendBoundingBox",value:function(e){this.boundingBox=tt.combineRect(this.boundingBox,e)}},{key:"getOrigin",value:function(){return{x:0,y:0}}},{key:"getCurrentColor",value:function(){return this.color}}]),r}(Ct),kt=function(){function e(t){Mt(this,e),this.transform=t||B.empty}return bt(e,[{key:"translate",value:function(t,r){return new e(this.transform.append(new Lt(t,r)))}},{key:"rotateDegree",value:function(t){return new e(this.transform.append(new Pt(t/180*Math.PI)))}},{key:"rotateRadian",value:function(t){return new e(this.transform.append(new Pt(t)))}},{key:"toString",value:function(){var e="";return this.transform.foreach((function(t){e+=t.toTranslateForm()})),e}},{key:"apply",value:function(e,t){var r={x:e,y:t};return this.transform.foreach((function(e){r=e.apply(r.x,r.y)})),r}}]),e}(),Lt=function(){function e(t,r){Mt(this,e),this.dx=t,this.dy=r}return bt(e,[{key:"apply",value:function(e,t){return{x:e-this.dx,y:t+this.dy}}},{key:"toTranslateForm",value:function(){return"translate("+MathJax.xypic.measure.em2px(this.dx)+","+MathJax.xypic.measure.em2px(-this.dy)+") "}}]),e}(),Pt=function(){function e(t){Mt(this,e),this.radian=t}return bt(e,[{key:"apply",value:function(e,t){var r=Math.cos(this.radian),n=Math.sin(this.radian);return{x:r*e+n*t,y:-n*e+r*t}}},{key:"toTranslateForm",value:function(){return"rotate("+St(-180*this.radian/Math.PI)+") "}}]),e}(),Rt=function(e){dt(r,e);var t=yt(r);function r(e,n){var i;Mt(this,r),(i=t.call(this,e.xypicWrapper)).parent=e,i.drawArea=e.createSVGElement("g",void 0===n?{}:{transform:n.toString()});var a=e.getOrigin();return i.origin=void 0===n?a:n.apply(a.x,a.y),He(vt(i),"getCurrentColor"),i}return bt(r,[{key:"remove",value:function(){this.xypicWrapper.remove(this.drawArea)}},{key:"extendBoundingBox",value:function(e){this.parent.extendBoundingBox(e)}},{key:"getOrigin",value:function(){return this.origin}},{key:"getCurrentColor",value:function(){return this.parent.getCurrentColor()}}]),r}(Ct),At=function(e){dt(r,e);var t=yt(r);function r(e,n){var i;return Mt(this,r),(i=t.call(this,e.xypicWrapper)).parent=e,i.drawArea=e.createSVGElement("g",{stroke:n}),i.color=n,He(vt(i),"getOrigin"),i}return bt(r,[{key:"remove",value:function(){this.xypicWrapper.remove(this.drawArea)}},{key:"extendBoundingBox",value:function(e){this.parent.extendBoundingBox(e)}},{key:"getOrigin",value:function(){return this.parent.getOrigin()}},{key:"getCurrentColor",value:function(){return this.color}}]),r}(Ct);function Tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jt=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shape=t,this.env=r}var t,r,n;return t=e,(r=[{key:"duplicateEnv",value:function(){var t=this.env.duplicate();return new e(this.shape,t)}},{key:"appendShapeToFront",value:function(e){e.isNone||(this.shape.isNone?this.shape=e:this.shape=new pt.CompositeShape(e,this.shape))}},{key:"appendShapeToBack",value:function(e){e.isNone||(this.shape.isNone?this.shape=e:this.shape=new pt.CompositeShape(this.shape,e))}}])&&Tt(t.prototype,r),n&&Tt(t,n),e}();function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Nt=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t>r?(this.start=r,this.end=t):(this.start=t,this.end=r)}var t,r,n;return t=e,(r=[{key:"difference",value:function(t){var r=B.empty,n=this.start,i=this.end,a=t.start,o=t.end;return i<=a||o<=n?r=r.prepend(this):n<a?r=i<=o?r.prepend(new e(n,a)):(r=r.prepend(new e(n,a))).prepend(new e(o,i)):o<i&&(r=r.prepend(new e(o,i))),r}},{key:"differenceRanges",value:function(e){var t=B.empty.prepend(this);return e.foreach((function(e){t=t.flatMap((function(t){return t.difference(e)}))})),t}},{key:"toString",value:function(){return"["+this.start+", "+this.end+"]"}}])&&Bt(t.prototype,r),n&&Bt(t,n),e}();function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gt(e);if(t){var i=Gt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ft(this,r)}}function Ft(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ht(e,t,r){return t&&Xt(e.prototype,t),r&&Xt(e,r),e}var zt=function(){function t(){Vt(this,t);var r=e.MathJax.xypic.measure.length2em("1mm");this.origin={x:0,y:0},this.xBase={x:r,y:0},this.yBase={x:0,y:r},this.savedPosition={},this.stateStack=B.empty,this.stackFrames=B.empty,this.stack=B.empty,this.angle=0,this.lastCurve=Ut.none,this.p=this.c=t.originPosition,this.shouldCapturePos=!1,this.capturedPositions=B.empty,this.objectmargin=e.MathJax.xypic.measure.objectmargin,this.objectheight=e.MathJax.xypic.measure.objectheight,this.objectwidth=e.MathJax.xypic.measure.objectwidth,this.labelmargin=e.MathJax.xypic.measure.labelmargin}return Ht(t,[{key:"duplicate",value:function(){var e=new t;return t.copyFields(this,e),e}},{key:"saveState",value:function(){var e=this.duplicate();this.stateStack=this.stateStack.prepend(e)}},{key:"restoreState",value:function(){if(!this.stateStack.isEmpty){var e=this.stateStack.head;this.stateStack=this.stateStack.tail,t.copyFields(e,this)}}},{key:"absVector",value:function(e,t){return{x:this.origin.x+e*this.xBase.x+t*this.yBase.x,y:this.origin.y+e*this.xBase.y+t*this.yBase.y}}},{key:"inverseAbsVector",value:function(e,t){var r=this.xBase.x,n=this.xBase.y,i=this.yBase.x,a=this.yBase.y,o=r*a-n*i,s=e-this.origin.x,u=t-this.origin.y;return{x:(a*s-i*u)/o,y:(-n*s+r*u)/o}}},{key:"setOrigin",value:function(e,t){this.origin={x:e,y:t}}},{key:"setXBase",value:function(e,t){this.xBase={x:e,y:t}}},{key:"setYBase",value:function(e,t){this.yBase={x:e,y:t}}},{key:"swapPAndC",value:function(){var e=this.p;this.p=this.c,this.c=e}},{key:"enterStackFrame",value:function(){this.stackFrames=this.stackFrames.prepend(this.stack),this.initStack()}},{key:"leaveStackFrame",value:function(){this.stackFrames.isEmpty?this.initStack():(this.stack=this.stackFrames.head,this.stackFrames=this.stackFrames.tail)}},{key:"savePos",value:function(e,t){this.savedPosition[e]=t}},{key:"startCapturePositions",value:function(){this.shouldCapturePos=!0,this.capturedPositions=B.empty}},{key:"endCapturePositions",value:function(){this.shouldCapturePos=!1;var e=this.capturedPositions;return this.capturedPositions=B.empty,e}},{key:"capturePosition",value:function(e){this.shouldCapturePos&&void 0!==e&&(this.capturedPositions=this.capturedPositions.prepend(e))}},{key:"pushPos",value:function(e){void 0!==e&&(this.stack=this.stack.prepend(e))}},{key:"popPos",value:function(){if(this.stack.isEmpty)throw new l.default("ExecutionError","cannot pop from the empty stack");var e=this.stack.head;return this.stack=this.stack.tail,e}},{key:"initStack",value:function(){this.stack=B.empty}},{key:"setStack",value:function(e){this.stack=e}},{key:"stackAt",value:function(e){return this.stack.at(e)}},{key:"lookupPos",value:function(e,t){var r=this.savedPosition[e];if(void 0===r)throw void 0!==t?new l.default("ExecutionError",t):new l.default("ExecutionError",'<pos> "'+e+'" not defined.');return r}},{key:"toString",value:function(){var e="";for(var t in this.savedPosition)this.savedPosition.hasOwnProperty(t)&&(e.length>0&&(e+=", "),e+=t.toString()+":"+this.savedPosition[t]);return"Env\n  p:"+this.p+"\n  c:"+this.c+"\n  angle:"+this.angle+"\n  lastCurve:"+this.lastCurve+"\n  savedPosition:{"+e+"}\n  origin:{x:"+this.origin.x+", y:"+this.origin.y+"}\n  xBase:{x:"+this.xBase.x+", y:"+this.xBase.y+"}\n  yBase:{x:"+this.yBase.x+", y:"+this.yBase.y+"}\n  stackFrames:"+this.stackFrames+"\n  stack:"+this.stack+"\n  shouldCapturePos:"+this.shouldCapturePos+"\n  capturedPositions:"+this.capturedPositions}}],[{key:"copyFields",value:function(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);for(var n in t.savedPosition={},e.savedPosition)e.savedPosition.hasOwnProperty(n)&&(t.savedPosition[n]=e.savedPosition[n])}}]),t}();zt.originPosition=new tt.Point(0,0);var Wt=function(){function t(){Vt(this,t)}return Ht(t,[{key:"velocity",value:function(e){var t=this.dpx(e),r=this.dpy(e);return Math.sqrt(t*t+r*r)}},{key:"length",value:function(e){if(e<0||e>1)throw new l.default("ExecutionError","illegal cubic Bezier parameter t:"+e);this.buildLengthArray();var t=e*p.lengthResolution,r=Math.floor(t),n=Math.ceil(t);if(r===n)return this.lengthArray[r];var i=this.lengthArray[r];return i+(this.lengthArray[n]-i)/(n-r)*(t-r)}},{key:"tOfLength",value:function(e){this.buildLengthArray();var t,r,n,i=this.lengthArray;if(e<i[0])return 0;if(e>i[i.length-1])return 1;for(var a=0,o=i.length-2;a<=o&&(r=i[t=a+o>>1],n=i[t+1],!(e>=r&&e<=n));)e<r?o=t-1:a=t+1;var s=p.lengthResolution;return r===n?t/s:(t+(e-r)/(n-r))/s}},{key:"tOfShavedStart",value:function(e){if(e.isPoint())return 0;var t=this.tOfIntersections(e);return 0!=t.length?Math.min.apply(Math,t):void 0}},{key:"tOfShavedEnd",value:function(e){if(e.isPoint())return 1;var t=this.tOfIntersections(e);return 0!=t.length?Math.max.apply(Math,t):void 0}},{key:"shaveStart",value:function(e){if(e.isPoint())return this;var t=this.tOfIntersections(e);if(0!=t.length){var r=Math.min.apply(Math,t);return this.divide(r)[1]}}},{key:"shaveEnd",value:function(e){if(e.isPoint())return this;var t=this.tOfIntersections(e);if(0!=t.length){var r=Math.max.apply(Math,t);return this.divide(r)[0]}}},{key:"buildLengthArray",value:function(){if(void 0===this.lengthArray){var e=p.lengthResolution,t=new Array(e+1),r=0,n=.5/e,i=0,a=n/3;t[0]=0,r=this.velocity(0)+4*this.velocity(n);var o=this.velocity(2*n);for(t[1]=a*(r+o),i=2;i<=e;i++)r+=2*o+4*this.velocity((2*i-1)*n),o=this.velocity(2*i*n),t[i]=a*(r+o);this.lengthArray=t}}},{key:"drawParallelCurve",value:function(e,r){var n,i,a,o,s,u,c,h,l=this.countOfSegments()*p.interpolationResolution,f=new Array(l+1),d=new Array(l+1),m=new Array(l+1),y=new Array(l+1),x=new Array(l+1),v=Math.PI/2,g=r;for(n=0;n<=l;n++)i=n/l,f[n]=i,a=this.angle(i),s=(o=this.position(i)).x,u=o.y,c=g*Math.cos(a+v),h=g*Math.sin(a+v),d[n]=s+c,m[n]=u+h,y[n]=s-c,x[n]=u-h;t.CubicBeziers.interpolation(f,d,m).drawPrimitive(e,"none"),t.CubicBeziers.interpolation(f,y,x).drawPrimitive(e,"none")}},{key:"drawParallelDottedCurve",value:function(t,r,n){var i=1/e.MathJax.xypic.measure.em,a=i/2,o=i+r,s=this.length(1),u=Math.floor((s-i)/o),c=n;if(u>=0){var h,l=Math.PI/2,p=this.startPosition();this.endPosition();for(h=0;h<=u;h++){p=a+h*o;var f=this.tOfLength(p),d=this.angle(f),m=this.position(f),y=m.x,x=m.y,v=c*Math.cos(d+l),g=c*Math.sin(d+l);t.createSVGElement("circle",{cx:e.MathJax.xypic.measure.em2px(y+v),cy:-e.MathJax.xypic.measure.em2px(x+g),r:.12,fill:"currentColor"}),t.createSVGElement("circle",{cx:e.MathJax.xypic.measure.em2px(y-v),cy:-e.MathJax.xypic.measure.em2px(x-g),r:.12,fill:"currentColor"})}}}},{key:"drawParallelDashedCurve",value:function(e,r,n){var i,a,o,s,u,c,h,l,p=this.length(1),f=Math.floor((p-r)/(2*r)),d=2*f+1,m=(p-r)/2-f*r,y=new Array(f+1),x=new Array(f+1),v=new Array(f+1),g=new Array(f+1),M=new Array(f+1),w=Math.PI/2,b=n;for(i=0;i<=d;i++)a=this.tOfLength(m+i*r),y[i]=a,o=this.angle(a),u=(s=this.position(a)).x,c=s.y,h=b*Math.cos(o+w),l=b*Math.sin(o+w),x[i]=u+h,v[i]=c+l,g[i]=u-h,M[i]=c-l;t.CubicBeziers.interpolation(y,x,v).drawSkipped(e),t.CubicBeziers.interpolation(y,g,M).drawSkipped(e)}},{key:"drawSquigCurve",value:function(t,r){var n=e.MathJax.xypic.measure.length2em("0.15em"),i=this.length(1),a=4*n,o=n;if(i>=a){var s,u,c,h,l,p,f,d,m,y=Math.floor(i/a),x=(i-y*a)/2,v=Math.PI/2;switch(r){case"3":s=x,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f="M"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d="M"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),m="M"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p);for(var g=0;g<y;g++)s=x+a*g+n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x+2*l)+","+e.MathJax.xypic.measure.em2px(-c.y-2*p),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),m+=" Q"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),s=x+a*g+2*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),m+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*g+3*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),m+=" "+e.MathJax.xypic.measure.em2px(c.x-2*l)+","+e.MathJax.xypic.measure.em2px(-c.y+2*p),s=x+a*(g+1),u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),m+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p);t.createSVGElement("path",{d:f}),t.createSVGElement("path",{d}),t.createSVGElement("path",{d:m});break;case"2":s=x,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f="M"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d="M"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p);for(g=0;g<y;g++)s=x+a*g+n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" Q"+e.MathJax.xypic.measure.em2px(c.x+3*l)+","+e.MathJax.xypic.measure.em2px(-c.y-3*p),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),s=x+a*g+2*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*g+3*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" Q"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x-3*l)+","+e.MathJax.xypic.measure.em2px(-c.y+3*p),s=x+a*(g+1),u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p);t.createSVGElement("path",{d:f}),t.createSVGElement("path",{d});break;default:s=x,u=this.tOfLength(s),c=this.position(u),f="M"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y);for(g=0;g<y;g++)s=x+a*g+n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),s=x+a*g+2*n,u=this.tOfLength(s),c=this.position(u),f+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),s=x+a*g+3*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*(g+1),u=this.tOfLength(s),c=this.position(u),f+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y);t.createSVGElement("path",{d:f})}}}},{key:"drawDashSquigCurve",value:function(t,r){var n=e.MathJax.xypic.measure.thickness,i=this.length(1),a=4*n,o=n;if(i>=a){var s,u,c,h,l,p,f,d,m,y=Math.floor((i-a)/2/a),x=(i-a)/2-y*a,v=Math.PI/2;switch(r){case"3":f=d=m="";for(var g=0;g<=y;g++)s=x+a*g*2,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" M"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" M"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),m+=" M"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*g*2+n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x+2*l)+","+e.MathJax.xypic.measure.em2px(-c.y-2*p),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),m+=" Q"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),s=x+a*g*2+2*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),m+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*g*2+3*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),m+=" "+e.MathJax.xypic.measure.em2px(c.x-2*l)+","+e.MathJax.xypic.measure.em2px(-c.y+2*p),s=x+a*(2*g+1),u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),m+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p);t.createSVGElement("path",{d:f}),t.createSVGElement("path",{d}),t.createSVGElement("path",{d:m});break;case"2":f=d="";for(g=0;g<=y;g++)s=x+a*g*2,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" M"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" M"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*g*2+n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" Q"+e.MathJax.xypic.measure.em2px(c.x+3*l)+","+e.MathJax.xypic.measure.em2px(-c.y-3*p),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),s=x+a*g*2+2*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*g*2+3*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" Q"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),d+=" Q"+e.MathJax.xypic.measure.em2px(c.x-3*l)+","+e.MathJax.xypic.measure.em2px(-c.y+3*p),s=x+a*(2*g+1),u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v)/2,p=o*Math.sin(h+v)/2,f+=" "+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),d+=" "+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p);t.createSVGElement("path",{d:f}),t.createSVGElement("path",{d});break;default:f="";for(g=0;g<=y;g++)s=x+a*g*2,u=this.tOfLength(s),c=this.position(u),f+=" M"+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),s=x+a*g*2+n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x+l)+","+e.MathJax.xypic.measure.em2px(-c.y-p),s=x+a*g*2+2*n,u=this.tOfLength(s),c=this.position(u),f+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),s=x+a*g*2+3*n,u=this.tOfLength(s),c=this.position(u),h=this.angle(u),l=o*Math.cos(h+v),p=o*Math.sin(h+v),f+=" Q"+e.MathJax.xypic.measure.em2px(c.x-l)+","+e.MathJax.xypic.measure.em2px(-c.y+p),s=x+a*(2*g+1),u=this.tOfLength(s),c=this.position(u),f+=" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y);t.createSVGElement("path",{d:f})}}}},{key:"drawCurve",value:function(e,t,r,n){if(n.isEmpty)this._drawCurve(e,t,r);else{var i=new Nt(0,1).differenceRanges(n),a=this;i.foreach((function(n){a.slice(n.start,n.end)._drawCurve(e,t,r)}))}}},{key:"_drawCurve",value:function(t,r,n){var i,a=e.MathJax.xypic.measure.length2em("0.15em");if(void 0!==n){var o=n.dirMain(),s=n.dirVariant();switch(o){case"=":o="-",s="2";break;case"==":o="--",s="2";break;case":":case"::":o=".",s="2"}switch(o){case"":break;case"-":switch(s){case"2":i=a/2,this.drawParallelCurve(t,i);break;case"3":i=a,this.drawParallelCurve(t,i),this.drawPrimitive(t,"none");break;default:i=0,this.drawPrimitive(t,"none")}break;case".":case"..":switch(s){case"2":i=a/2,this.drawParallelDottedCurve(t,a,i);break;case"3":i=a,this.drawParallelDottedCurve(t,a,i),this.drawPrimitive(t,e.MathJax.xypic.measure.dottedDasharray);break;default:i=0,this.drawPrimitive(t,e.MathJax.xypic.measure.dottedDasharray)}break;case"--":var u=3*a;if((g=this.length(1))>=u)switch(s){case"2":i=a/2,this.drawParallelDashedCurve(t,u,i);break;case"3":i=a,this.drawParallelDashedCurve(t,u,i);var c=(g-u)/2-Math.floor((g-u)/2/u)*u,h=this.tOfLength(c);this.divide(h)[1].drawPrimitive(t,e.MathJax.xypic.measure.em2px(u)+" "+e.MathJax.xypic.measure.em2px(u));break;default:i=0;c=(g-u)/2-Math.floor((g-u)/2/u)*u,h=this.tOfLength(c);this.divide(h)[1].drawPrimitive(t,e.MathJax.xypic.measure.em2px(u)+" "+e.MathJax.xypic.measure.em2px(u))}break;case"~":switch(this.drawSquigCurve(t,s),s){case"2":i=1.5*a;break;case"3":i=2*a;break;default:i=0}break;case"~~":switch(this.drawDashSquigCurve(t,s),s){case"2":i=1.5*a;break;case"3":i=2*a;break;default:i=0}break;default:(w=new zt).c=zt.originPosition;var l=new Jt(pt.none,w),p=n.boundingBox(l);if(null==p)return;var f,d,m=p.l,y=m+p.r;if(void 0!==r){var x=r.boundingBox(l);void 0!==x&&(f=(d=x.l)+x.r)}else f=0;var v=y+f;0==v&&(v=e.MathJax.xypic.measure.strokeWidth);var g=this.length(1);if(0==(E=Math.floor(g/v)))return;c=(g-E*v)/2,l=new Jt(pt.none,w);for(var M=0;M<E;M++){k=c+M*v,void 0!==r&&(L=this.tOfLength(k+d),w.c=this.position(L),w.angle=this.angle(L),r.toDropShape(l).draw(t)),L=this.tOfLength(k+f+m),w.c=this.position(L),w.angle=this.angle(L);n.toDropShape(l).draw(t)}}}else{var w;(w=new zt).c=zt.originPosition;l=new Jt(pt.none,w);var b=r,S=b.boundingBox(l);if(void 0===S)return;var O=S.l+S.r,C=O;0==C&&(C=e.MathJax.xypic.measure.strokeWidth);var E;g=this.length(1);if(0==(E=Math.floor(g/C)))return;for(c=(g-E*C+C-O)/2+S.l,l=new Jt(pt.none,w),M=0;M<E;M++){var k=c+M*C,L=this.tOfLength(k);w.c=this.position(L),w.angle=0,b.toDropShape(l).draw(t)}}}},{key:"toShape",value:function(t,r,n){var i,a=t.env,o=e.MathJax.xypic.measure.length2em("0.15em"),s=pt.none;if(void 0!==n){var u=n.dirMain(),c=n.dirVariant();switch(u){case"=":u="-",c="2";break;case"==":u="--",c="2";break;case":":case"::":u=".",c="2"}switch(u){case"":i=0;break;case"-":case".":case"..":switch(c){case"2":i=o/2;break;case"3":i=o;break;default:i=0}break;case"--":var h=3*o;if((y=this.length(1))>=h)switch(c){case"2":i=o/2;break;case"3":i=o;break;default:i=0}break;case"~":case"~~":switch(c){case"2":i=1.5*o;break;case"3":i=2*o;break;default:i=0}break;default:var l=n.boundingBox(t);if(null==l)return a.angle=0,a.lastCurve=Ut.none,pt.none;i=Math.max(l.u,l.d);var p,f=l.l+l.r;if(void 0!==r){var d=r.boundingBox(t);void 0!==d&&(p=d.l+d.r,i=Math.max(i,d.u,d.d))}else p=0;var m=f+p;0==m&&(m=e.MathJax.xypic.measure.strokeWidth);var y=this.length(1);return 0==Math.floor(y/m)?(a.angle=0,a.lastCurve=Ut.none,pt.none):(s=new pt.CurveShape(this,r,n,this.boundingBox(i)),t.appendShapeToFront(s),s)}return void 0===i?pt.none:(s=new pt.CurveShape(this,r,n,this.boundingBox(i)),t.appendShapeToFront(s),s)}if(void 0!==r){var x=r.boundingBox(t);if(null==x)return a.angle=0,a.lastCurve=Ut.none,pt.none;var v=x.l+x.r;0==v&&(v=e.MathJax.xypic.measure.strokeWidth);y=this.length(1);return 0==Math.floor(y/v)?(a.angle=0,a.lastCurve=Ut.none,pt.none):(i=Math.max(x.u,x.d),s=new pt.CurveShape(this,r,n,this.boundingBox(i)),t.appendShapeToFront(s),s)}return s}}],[{key:"sign",value:function(e){return e>0?1:0===e?0:-1}},{key:"solutionsOfCubicEq",value:function(e,r,n,i){if(0===e)return t.solutionsOfQuadEq(r,n,i);var a=r/3/e,o=n/e,s=a*a-o/3,u=-(i/e)/2+o*a/2-a*a*a,c=u*u-s*s*s;if(0===c){var h=2*(m=Math.pow(u,1/3))-a,l=-m-a;return t.filterByIn0to1([h,l])}if(c>0){var p=u+t.sign(u)*Math.sqrt(c),f=(d=t.sign(p)*Math.pow(Math.abs(p),1/3))+(m=s/d)-a;return t.filterByIn0to1([f])}var d=2*Math.sqrt(s),m=Math.acos(2*u/s/d),y=(h=d*Math.cos(m/3)-a,l=d*Math.cos((m+2*Math.PI)/3)-a,d*Math.cos((m+4*Math.PI)/3)-a);return t.filterByIn0to1([h,l,y])}},{key:"solutionsOfQuadEq",value:function(e,r,n){if(0===e)return t.solutionsOfLinearEq(r,n);var i=r*r-4*n*e;if(i>=0){var a=Math.sqrt(i),o=(-r+a)/2/e,s=(-r-a)/2/e;return t.filterByIn0to1([o,s])}return[]}},{key:"solutionsOfLinearEq",value:function(e,r){return 0===e?0===r?0:[]:t.filterByIn0to1([-r/e])}},{key:"filterByIn0to1",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>=0&&n<=1&&t.push(n)}return t}}]),t}();Wt.QuadBezier=function(t){Dt(n,t);var r=_t(n);function n(e,t,i){var a;Vt(this,n),(a=r.call(this)).cp0=e,a.cp1=t,a.cp2=i;var o=e.x,s=2*(t.x-e.x),u=i.x-2*t.x+e.x;a.px=function(e){return o+e*s+e*e*u},a.dpx=function(e){return s+2*e*u};var c=e.y,h=2*(t.y-e.y),l=i.y-2*t.y+e.y;return a.py=function(e){return c+e*h+e*e*l},a.dpy=function(e){return h+2*e*l},a}return Ht(n,[{key:"startPosition",value:function(){return this.cp0}},{key:"endPosition",value:function(){return this.cp2}},{key:"position",value:function(e){return new tt.Point(this.px(e),this.py(e))}},{key:"derivative",value:function(e){return new tt.Point(this.dpx(e),this.dpy(e))}},{key:"angle",value:function(e){return Math.atan2(this.dpy(e),this.dpx(e))}},{key:"boundingBox",value:function(e){var t=this.maxMin(this.cp0.x,this.cp1.x,this.cp2.x,e),r=this.maxMin(this.cp0.y,this.cp1.y,this.cp2.y,e);if(0===e)return new tt.Rect(this.cp0.x,this.cp0.y,{l:this.cp0.x-t.min,r:t.max-this.cp0.x,u:r.max-this.cp0.y,d:this.cp0.y-r.min});var n=Math.PI/2,i=this.cp0.x,a=this.cp0.y,o=this.cp2.x,s=this.cp2.y,u=this.angle(0)+n,c=this.angle(1)+n,h=e*Math.cos(u),l=e*Math.sin(u),p=e*Math.cos(c),f=e*Math.sin(c),d=Math.min(t.min,i+h,i-h,o+p,o-p),m=Math.max(t.max,i+h,i-h,o+p,o-p),y=Math.min(r.min,a+l,a-l,s+f,s-f),x=Math.max(r.max,a+l,a-l,s+f,s-f);return new tt.Rect(i,a,{l:i-d,r:m-i,u:x-a,d:a-y})}},{key:"maxMin",value:function(e,t,r,n){var i,a;e>r?(i=e,a=r):(i=r,a=e);var o,s,u=Xe,c=u(e),h=u(t-e),l=u(r-2*t+e);return 0!=l&&(s=-h/l)>0&&s<1&&(o=function(e){return c+2*e*h+e*e*l}(s),i=Math.max(i,o+n,o-n),a=Math.min(a,o+n,o-n)),{min:a,max:i}}},{key:"divide",value:function(e){if(e<0||e>1)throw new l.default("ExecutionError","illegal quadratic Bezier parameter t:"+e);var t=this.cp0.x,r=this.cp1.x,n=this.cp2.x,i=this.cp0.y,a=this.cp1.y,o=this.cp2.y,s=this.px(e),u=this.py(e),c=this.cp0,h=new tt.Point(t+e*(r-t),i+e*(a-i)),p=new tt.Point(s,u),f=p,d=new tt.Point(r+e*(n-r),a+e*(o-a)),m=this.cp2;return[new Wt.QuadBezier(c,h,p),new Wt.QuadBezier(f,d,m)]}},{key:"slice",value:function(e,t){if(!(e>=t)){if(e<0&&(e=0),t>1&&(t=1),0===e&&1===t)return this;this.cp0.x;var r=this.cp1.x,n=this.cp2.x,i=(this.cp0.y,this.cp1.y),a=this.cp2.y,o=this.px(e),s=this.py(e),u=r+e*(n-r),c=i+e*(a-i),h=new tt.Point(o,s),l=new tt.Point(o+t*(u-o),s+t*(c-s)),p=new tt.Point(this.px(t),this.py(t));return new Wt.QuadBezier(h,l,p)}}},{key:"tOfIntersections",value:function(e){if(e.isPoint())return[];if(e.isRect()){var t,r=e.x+e.r,n=e.x-e.l,i=e.y+e.u,a=e.y-e.d,o=Xe,s=this.cp0.x,u=this.cp1.x,c=this.cp2.x,h=o(s),l=o(2*(u-s)),p=o(c-2*u+s),f=function(e){return h+e*l+e*e*p},d=this.cp0.y,m=this.cp1.y,y=this.cp2.y,x=o(d),v=o(2*(m-d)),g=o(y-2*m+d),M=function(e){return x+e*v+e*e*g},w=[];t=(t=Wt.solutionsOfQuadEq(p,l,h-r)).concat(Wt.solutionsOfQuadEq(p,l,h-n));for(var b=0;b<t.length;b++){(C=M(F=t[b]))>=a&&C<=i&&w.push(F)}t=(t=Wt.solutionsOfQuadEq(g,v,x-i)).concat(Wt.solutionsOfQuadEq(g,v,x-a));for(b=0;b<t.length;b++){(O=f(F=t[b]))>=n&&O<=r&&w.push(F)}return w}if(e.isCircle()){var S=Math.PI,O=e.x,C=e.y,E=e.l,k=e.r,L=e.u,P=e.d,R=O+(k-E)/2,A=C+(L-P)/2,T=(r=(E+k)/2,(L+P)/2),J=S/180,B=new qt.Arc(R,A,r,T,-S-J,-S/2+J),N=new qt.Arc(R,A,r,T,-S/2-J,0+J),I=new qt.Arc(R,A,r,T,0-J,S/2+J),D=new qt.Arc(R,A,r,T,S/2-J,S+J),j=new qt.QuadBezier(this,0,1),_=[];_=(_=(_=(_=_.concat(qt.findIntersections(B,j))).concat(qt.findIntersections(N,j))).concat(qt.findIntersections(I,j))).concat(qt.findIntersections(D,j));for(w=[],b=0;b<_.length;b++){var F=(_[b][1].min+_[b][1].max)/2;w.push(F)}return w}}},{key:"countOfSegments",value:function(){return 1}},{key:"drawPrimitive",value:function(t,r){var n=this.cp0,i=this.cp1,a=this.cp2;t.createSVGElement("path",{d:"M"+e.MathJax.xypic.measure.em2px(n.x)+","+e.MathJax.xypic.measure.em2px(-n.y)+" Q"+e.MathJax.xypic.measure.em2px(i.x)+","+e.MathJax.xypic.measure.em2px(-i.y)+" "+e.MathJax.xypic.measure.em2px(a.x)+","+e.MathJax.xypic.measure.em2px(-a.y),"stroke-dasharray":r})}},{key:"toString",value:function(){return"QuadBezier("+this.cp0.x+", "+this.cp0.y+")-("+this.cp1.x+", "+this.cp1.y+")-("+this.cp2.x+", "+this.cp2.y+")"}}]),n}(Wt),Wt.CubicBezier=function(t){Dt(n,t);var r=_t(n);function n(e,t,i,a){var o;Vt(this,n),(o=r.call(this)).cp0=e,o.cp1=t,o.cp2=i,o.cp3=a;var s=e.x,u=3*(t.x-e.x),c=3*(i.x-2*t.x+e.x),h=a.x-3*i.x+3*t.x-e.x;o.px=function(e){return s+e*u+e*e*c+e*e*e*h},o.dpx=function(e){return u+2*e*c+3*e*e*h};var l=e.y,p=3*(t.y-e.y),f=3*(i.y-2*t.y+e.y),d=a.y-3*i.y+3*t.y-e.y;return o.py=function(e){return l+e*p+e*e*f+e*e*e*d},o.dpy=function(e){return p+2*e*f+3*e*e*d},o}return Ht(n,[{key:"startPosition",value:function(){return this.cp0}},{key:"endPosition",value:function(){return this.cp3}},{key:"position",value:function(e){return new tt.Point(this.px(e),this.py(e))}},{key:"derivative",value:function(e){return new tt.Point(this.dpx(e),this.dpy(e))}},{key:"angle",value:function(e){return Math.atan2(this.dpy(e),this.dpx(e))}},{key:"boundingBox",value:function(e){var t=this.maxMin(this.cp0.x,this.cp1.x,this.cp2.x,this.cp3.x,e),r=this.maxMin(this.cp0.y,this.cp1.y,this.cp2.y,this.cp3.y,e);if(0===e)return new tt.Rect(this.cp0.x,this.cp0.y,{l:this.cp0.x-t.min,r:t.max-this.cp0.x,u:r.max-this.cp0.y,d:this.cp0.y-r.min});var n=Math.PI/2,i=this.cp0.x,a=this.cp0.y,o=this.cp3.x,s=this.cp3.y,u=this.angle(0)+n,c=this.angle(1)+n,h=e*Math.cos(u),l=e*Math.sin(u),p=e*Math.cos(c),f=e*Math.sin(c),d=Math.min(t.min,i+h,i-h,o+p,o-p),m=Math.max(t.max,i+h,i-h,o+p,o-p),y=Math.min(r.min,a+l,a-l,s+f,s-f),x=Math.max(r.max,a+l,a-l,s+f,s-f);return new tt.Rect(i,a,{l:i-d,r:m-i,u:x-a,d:a-y})}},{key:"maxMin",value:function(e,t,r,n,i){var a,o;e>n?(a=e,o=n):(a=n,o=e);var s,u=Xe,c=u(e),h=u(t-e),l=u(r-2*t+e),p=u(n-3*r+3*t-e),f=function(e){e>0&&e<1&&(s=function(e){return c+3*e*h+3*e*e*l+e*e*e*p}(e),a=Math.max(a,s+i,s-i),o=Math.min(o,s+i,s-i))};if(0==p)0!=l&&f(-h/l/2);else{var d=l*l-h*p;d>0?(f((-l+Math.sqrt(d))/p),f((-l-Math.sqrt(d))/p)):0==d&&f(-l/p)}return{min:o,max:a}}},{key:"divide",value:function(e){if(e<0||e>1)throw new l.default("ExecutionError","illegal cubic Bezier parameter t:"+e);var t=this.cp0.x,r=this.cp1.x,n=this.cp2.x,i=this.cp3.x,a=this.cp0.y,o=this.cp1.y,s=this.cp2.y,u=this.cp3.y,c=this.px(e),h=this.py(e),p=this.cp0,f=new tt.Point(t+e*(r-t),a+e*(o-a)),d=new tt.Point(t+2*e*(r-t)+e*e*(n-2*r+t),a+2*e*(o-a)+e*e*(s-2*o+a)),m=new tt.Point(c,h),y=m,x=new tt.Point(r+2*e*(n-r)+e*e*(i-2*n+r),o+2*e*(s-o)+e*e*(u-2*s+o)),v=new tt.Point(n+e*(i-n),s+e*(u-s)),g=this.cp3;return[new Wt.CubicBezier(p,f,d,m),new Wt.CubicBezier(y,x,v,g)]}},{key:"slice",value:function(e,t){if(!(e>=t)){if(e<0&&(e=0),t>1&&(t=1),0===e&&1===t)return this;this.cp0.x;var r=this.cp1.x,n=this.cp2.x,i=this.cp3.x,a=(this.cp0.y,this.cp1.y),o=this.cp2.y,s=this.cp3.y,u=this.px(e),c=this.py(e),h=r+2*e*(n-r)+e*e*(i-2*n+r),l=a+2*e*(o-a)+e*e*(s-2*o+a),p=n+e*(i-n),f=o+e*(s-o),d=new tt.Point(u,c),m=new tt.Point(u+t*(h-u),c+t*(l-c)),y=new tt.Point(u+2*t*(h-u)+t*t*(p-2*h+u),c+2*t*(l-c)+t*t*(f-2*l+c)),x=new tt.Point(this.px(t),this.py(t));return new Wt.CubicBezier(d,m,y,x)}}},{key:"tOfIntersections",value:function(e){if(e.isPoint())return[];if(e.isRect()){var t,r=e.x+e.r,n=e.x-e.l,i=e.y+e.u,a=e.y-e.d,o=Xe,s=this.cp0.x,u=this.cp1.x,c=this.cp2.x,h=this.cp3.x,l=this.cp0.y,p=this.cp1.y,f=this.cp2.y,d=this.cp3.y,m=o(s),y=o(3*(u-s)),x=o(3*(c-2*u+s)),v=o(h-3*c+3*u-s),g=function(e){return m+e*y+e*e*x+e*e*e*v},M=o(l),w=o(3*(p-l)),b=o(3*(f-2*p+l)),S=o(d-3*f+3*p-l),O=function(e){return M+e*w+e*e*b+e*e*e*S},C=[];t=(t=Wt.solutionsOfCubicEq(v,x,y,m-r)).concat(Wt.solutionsOfCubicEq(v,x,y,m-n));for(var E=0;E<t.length;E++){(P=O(H=t[E]))>=a&&P<=i&&C.push(H)}t=(t=Wt.solutionsOfCubicEq(S,b,w,M-i)).concat(Wt.solutionsOfCubicEq(S,b,w,M-a));for(E=0;E<t.length;E++){(L=g(H=t[E]))>=n&&L<=r&&C.push(H)}return C}if(e.isCircle()){var k=Math.PI,L=e.x,P=e.y,R=e.l,A=e.r,T=e.u,J=e.d,B=L+(A-R)/2,N=P+(T-J)/2,I=(r=(R+A)/2,(T+J)/2),D=k/180,j=new qt.Arc(B,N,r,I,-k-D,-k/2+D),_=new qt.Arc(B,N,r,I,-k/2-D,0+D),F=new qt.Arc(B,N,r,I,0-D,k/2+D),G=new qt.Arc(B,N,r,I,k/2-D,k+D),V=new qt.CubicBezier(this,0,1),X=[];X=(X=(X=(X=X.concat(qt.findIntersections(j,V))).concat(qt.findIntersections(_,V))).concat(qt.findIntersections(F,V))).concat(qt.findIntersections(G,V));for(C=[],E=0;E<X.length;E++){var H=(X[E][1].min+X[E][1].max)/2;C.push(H)}return C}}},{key:"countOfSegments",value:function(){return 1}},{key:"drawPrimitive",value:function(t,r){var n=this.cp0,i=this.cp1,a=this.cp2,o=this.cp3;t.createSVGElement("path",{d:"M"+e.MathJax.xypic.measure.em2px(n.x)+","+e.MathJax.xypic.measure.em2px(-n.y)+" C"+e.MathJax.xypic.measure.em2px(i.x)+","+e.MathJax.xypic.measure.em2px(-i.y)+" "+e.MathJax.xypic.measure.em2px(a.x)+","+e.MathJax.xypic.measure.em2px(-a.y)+" "+e.MathJax.xypic.measure.em2px(o.x)+","+e.MathJax.xypic.measure.em2px(-o.y),"stroke-dasharray":r})}},{key:"toString",value:function(){return"CubicBezier("+this.cp0.x+", "+this.cp0.y+")-("+this.cp1.x+", "+this.cp1.y+")-("+this.cp2.x+", "+this.cp2.y+")-("+this.cp3.x+", "+this.cp3.y+")"}}]),n}(Wt),Wt.CubicBeziers=function(t){Dt(n,t);var r=_t(n);function n(e){var t;Vt(this,n),(t=r.call(this)).cbs=e;var i=t.cbs.length;return t.delegate=0==i?function(e,t,r){return r}:function(t,r,n){var a=t*i,o=Math.floor(a);o<0&&(o=0),o>=i&&(o=i-1);var s=a-o;return r(e[o],s)},t}return Ht(n,[{key:"startPosition",value:function(){return this.cbs[0].cp0}},{key:"endPosition",value:function(){return this.cbs[this.cbs.length-1].cp3}},{key:"position",value:function(e){return this.delegate(e,(function(e,t){return e.position(t)}),void 0)}},{key:"derivative",value:function(e){return this.delegate(e,(function(e,t){return e.derivative(t)}),void 0)}},{key:"angle",value:function(e){return this.delegate(e,(function(e,t){return e.angle(t)}),0)}},{key:"velocity",value:function(e){var t=this.cbs.length;return this.delegate(e,(function(e,r){return t*e.velocity(r)}),0)}},{key:"boundingBox",value:function(e){if(0!=this.cbs.length){var t,r=this.cbs[0].boundingBox(e),n=this.cbs.length;for(t=1;t<n;t++)r=r.combineRect(this.cbs[t].boundingBox(e));return r}}},{key:"tOfIntersections",value:function(e){var t=[],r=0,n=this.cbs.length;for(r=0;r<n;r++)for(var i=this.cbs[r].tOfIntersections(e),a=0;a<i.length;a++)t.push((i[a]+r)/n);return t}},{key:"divide",value:function(e){if(e<0||e>1)throw new l.default("ExecutionError","illegal cubic Bezier parameter t:"+e);if(0===e)return[new Wt.CubicBeziers([]),this];if(1===e)return[this,new Wt.CubicBeziers([])];var t=this.cbs.length,r=e*t,n=Math.floor(r);n===t&&(n=t-1);var i=r-n,a=this.cbs.slice(0,n),o=this.cbs.slice(n+1),s=this.cbs[n].divide(i);return a.push(s[0]),o.unshift(s[1]),[new Wt.CubicBeziers(a),new Wt.CubicBeziers(o)]}},{key:"slice",value:function(e,t){if(!(e>=t)){if(e<0&&(e=0),t>1&&(t=1),0===e&&1===t)return this;var r=this.cbs.length,n=e*r,i=t*r,a=Math.floor(n),o=Math.floor(i);a===r&&(a=r-1),o===r&&(o=r-1);var s,u=n-a,c=i-o;return a===o?s=[this.cbs[a].slice(u,c)]:((s=this.cbs.slice(a+1,o)).push(this.cbs[o].slice(0,c)),s.unshift(this.cbs[a].slice(u,1))),new Wt.CubicBeziers(s)}}},{key:"countOfSegments",value:function(){return this.cbs.length}},{key:"drawPrimitive",value:function(t,r){for(var n=this.cbs.length,i=this.cbs,a=i[0],o=a.cp0,s=a.cp1,u=a.cp2,c=a.cp3,h="M"+e.MathJax.xypic.measure.em2px(o.x)+","+e.MathJax.xypic.measure.em2px(-o.y)+" C"+e.MathJax.xypic.measure.em2px(s.x)+","+e.MathJax.xypic.measure.em2px(-s.y)+" "+e.MathJax.xypic.measure.em2px(u.x)+","+e.MathJax.xypic.measure.em2px(-u.y)+" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y),l=1;l<n;l++)u=(a=i[l]).cp2,c=a.cp3,h+=" S"+e.MathJax.xypic.measure.em2px(u.x)+","+e.MathJax.xypic.measure.em2px(-u.y)+" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y);t.createSVGElement("path",{d:h,"stroke-dasharray":r})}},{key:"drawSkipped",value:function(t){for(var r=this.cbs.length,n=this.cbs,i="",a=0;a<r;a+=2){var o=n[a],s=o.cp0,u=o.cp1,c=o.cp2,h=o.cp3;i+="M"+e.MathJax.xypic.measure.em2px(s.x)+","+e.MathJax.xypic.measure.em2px(-s.y)+" C"+e.MathJax.xypic.measure.em2px(u.x)+","+e.MathJax.xypic.measure.em2px(-u.y)+" "+e.MathJax.xypic.measure.em2px(c.x)+","+e.MathJax.xypic.measure.em2px(-c.y)+" "+e.MathJax.xypic.measure.em2px(h.x)+","+e.MathJax.xypic.measure.em2px(-h.y)}t.createSVGElement("path",{d:i})}}],[{key:"interpolation",value:function(e,t,r){var n,i=Wt.CubicBeziers.cubicSplineInterpolation(e,t),a=i[0],o=i[1],s=Wt.CubicBeziers.cubicSplineInterpolation(e,r),u=s[0],c=s[1],h=e.length,l=new Array(h-1);for(n=0;n<h-1;n++)l[n]=new Wt.CubicBezier(new tt.Point(t[n],r[n]),new tt.Point(a[n],u[n]),new tt.Point(o[n],c[n]),new tt.Point(t[n+1],r[n+1]));return new Wt.CubicBeziers(l)}},{key:"cubicSplineInterpolation",value:function(e,t){var r,n=e.length-1,i=new Array(n);for(r=0;r<n;r++)i[r]=e[r+1]-e[r];var a=new Array(n);for(r=1;r<n;r++)a[r]=3*(t[r+1]-t[r])/i[r]-3*(t[r]-t[r-1])/i[r-1];var o=new Array(n+1),s=new Array(n+1),u=new Array(n+1);for(o[0]=1,s[0]=0,u[0]=0,r=1;r<n;r++)o[r]=2*(e[r+1]-e[r-1])-i[r-1]*s[r-1],s[r]=i[r]/o[r],u[r]=(a[r]-i[r-1]*u[r-1])/o[r];o[n]=1,u[n]=0;var c=new Array(n),h=new Array(n+1);for(h[n]=0,r=n-1;r>=0;r--){var l=i[r],p=h[r+1],f=l*l*u[r]-s[r]*p;h[r]=f,c[r]=t[r+1]-t[r]-(p+2*f)/3}var d=new Array(n),m=new Array(n);for(r=0;r<n;r++){var y=t[r],x=c[r],v=h[r];d[r]=y+x/3,m[r]=y+(2*x+v)/3}return[d,m]}}]),n}(Wt),Wt.CubicBSpline=function(){function e(t,r,n){if(Vt(this,e),r.length<1)throw new l.default("ExecutionError","the number of internal control points of cubic B-spline must be greater than or equal to 1");var i=[];i.push(t);for(var a=0,o=r.length;a<o;a++)i.push(r[a]);i.push(n),this.cps=i;var s=this.cps.length-1,u=function(e){return e<0?i[0]:e>s?i[s]:i[e]},c=function(e){var t=Math.abs(e);return t<=1?(3*t*t*t-6*t*t+4)/6:t<=2?-(t-2)*(t-2)*(t-2)/6:0};this.px=function(e){for(var t=(s+2)*e-1,r=Math.ceil(t-2),n=Math.floor(t+2),i=0,a=r;a<=n;a++)i+=c(t-a)*u(a).x;return i},this.py=function(e){for(var t=(s+2)*e-1,r=Math.ceil(t-2),n=Math.floor(t+2),i=0,a=r;a<=n;a++)i+=c(t-a)*u(a).y;return i};var h=function(e){var t=e>0?1:e<0?-1:0,r=Math.abs(e);return r<=1?t*(3*r*r-4*r)/2:r<=2?-t*(r-2)*(r-2)/2:0};this.dpx=function(e){for(var t=(s+2)*e-1,r=Math.ceil(t-2),n=Math.floor(t+2),i=0,a=r;a<=n;a++)i+=h(t-a)*u(a).x;return i},this.dpy=function(e){for(var t=(s+2)*e-1,r=Math.ceil(t-2),n=Math.floor(t+2),i=0,a=r;a<=n;a++)i+=h(t-a)*u(a).y;return i}}return Ht(e,[{key:"position",value:function(e){return new tt.Point(this.px(e),this.py(e))}},{key:"angle",value:function(e){return Math.atan2(this.dpy(e),this.dpx(e))}},{key:"toCubicBeziers",value:function(){var e=[],t=this.cps,r=t[0],n=t[1],i=t[2],a=r.x,o=r.y,s=a+(n.x-a)/3,u=o+(n.y-o)/3,c=a+2*(n.x-a)/3,h=o+2*(n.y-o)/3,l=n.x+(i.x-n.x)/3,p=n.y+(i.y-n.y)/3,f=(c+l)/2,d=(h+p)/2,m=r,y=new tt.Point(s,u),x=new tt.Point(c,h),v=new tt.Point(f,d),g=new Wt.CubicBezier(m,y,x,v);e.push(g);for(var M=this.cps.length-1,w=2;w<M;w++)r=n,n=i,i=t[w+1],a=f,o=d,s=2*f-c,u=2*d-h,c=r.x+2*(n.x-r.x)/3,h=r.y+2*(n.y-r.y)/3,f=(c+(l=n.x+(i.x-n.x)/3))/2,d=(h+(p=n.y+(i.y-n.y)/3))/2,m=v,y=new tt.Point(s,u),x=new tt.Point(c,h),v=new tt.Point(f,d),g=new Wt.CubicBezier(m,y,x,v),e.push(g);return r=n,n=i,a=f,o=d,s=2*f-c,u=2*d-h,c=r.x+2*(n.x-r.x)/3,h=r.y+2*(n.y-r.y)/3,f=n.x,d=n.y,m=v,y=new tt.Point(s,u),x=new tt.Point(c,h),v=new tt.Point(f,d),g=new Wt.CubicBezier(m,y,x,v),e.push(g),e}},{key:"countOfSegments",value:function(){return this.cps.length-1}}]),e}(),Wt.Line=function(){function t(e,r){Vt(this,t),this.s=e,this.e=r}return Ht(t,[{key:"position",value:function(e){return new tt.Point(this.s.x+e*(this.e.x-this.s.x),this.s.y+e*(this.e.y-this.s.y))}},{key:"slice",value:function(e,t){if(!(e>=t)){if(e<0&&(e=0),t>1&&(t=1),0===e&&1===t)return this;var r=this.s,n=this.e,i=n.x-r.x,a=n.y-r.y,o=new tt.Point(r.x+e*i,r.y+e*a),s=new tt.Point(r.x+t*i,r.y+t*a);return new Wt.Line(o,s)}}},{key:"tOfIntersections",value:function(e){if(e.isPoint())return[];var t=this.s,r=this.e;if(e.isRect()){var n,i=e.x+e.r,a=e.x-e.l,o=e.y+e.u,s=e.y-e.d,u=t.x,c=t.y,h=r.x-u,l=r.y-c,p=function(e){return u+e*h},f=function(e){return c+e*l},d=[];n=(n=Wt.solutionsOfLinearEq(h,u-i)).concat(Wt.solutionsOfLinearEq(h,u-a));for(var m=0;m<n.length;m++){var y=f(x=n[m]);y>=s&&y<=o&&d.push(x)}n=(n=Wt.solutionsOfLinearEq(l,c-o)).concat(Wt.solutionsOfLinearEq(l,c-s));for(m=0;m<n.length;m++){var x,v=p(x=n[m]);v>=a&&v<=i&&d.push(x)}return d}if(e.isCircle()){Math.PI;var g=e.l,M=e.r,w=e.u,b=e.d,S=e.x+(M-g)/2,O=e.y+(w-b)/2,C=(i=(g+M)/2,(w+b)/2),E=t.x,k=t.y,L=r.x-E,P=-L,R=(s=r.y-k)*i,A=P*C,T=R*R+A*A,J=(r=-(b=R*S+A*O+((L*k-s*E)*i+(i-C)*P*O))/T,T*i*i-b*b);if(J<0)return[];var B,N,I=Math.sqrt(J)/T,D=C/i,j=R*r+A*I+S,_=D*(A*r-R*I+O-O)+O,F=R*r-A*I+S,G=D*(A*r+R*I+O-O)+O;Math.abs(L)>Math.abs(s)?(B=(j-E)/L,N=(F-E)/L):(B=(_-k)/s,N=(G-k)/s);d=[];return B>=0&&B<=1&&d.push(B),N>=0&&N<=1&&d.push(N),d}}},{key:"toShape",value:function(t,r,n,i){var a=t.env,o=e.MathJax.xypic.measure.thickness,s=this.s,u=this.e;if(s.x!==u.x||s.y!==u.y){var c,h=u.x-s.x,l=u.y-s.y,p=Math.atan2(l,h),f=pt.none;switch(n){case"=":n="-",i="2";break;case"==":n="--",i="2";break;case":":case"::":n=".",i="2"}switch(n){case"":return a.angle=p,a.lastCurve=new Ut.Line(s,u,a.p,a.c,void 0),f;case"-":case".":case"..":switch(i){case"2":c=o/2;break;case"3":c=o;break;default:c=0}break;case"--":var d=3*o;if((x=Math.sqrt(h*h+l*l))>=d)switch(i){case"2":c=o/2;break;case"3":c=o;break;default:c=0}break;case"~":case"~~":switch(i){case"2":c=1.5*o;break;case"3":c=2*o;break;default:c=0}break;default:var m=r.boundingBox(t);if(null==m)return a.angle=0,a.lastCurve=Ut.none,pt.none;var y=m.l+m.r;0==y&&(y=e.MathJax.xypic.measure.strokeWidth);var x=Math.sqrt(h*h+l*l);if(0==Math.floor(x/y))return a.angle=0,a.lastCurve=Ut.none,pt.none;c=Math.max(m.u,m.d)}if(void 0!==c){var v=this.boundingBox(c);return f=new pt.LineShape(this,r,n,i,v),t.appendShapeToFront(f),a.angle=p,a.lastCurve=new Ut.Line(s,u,a.p,a.c,f),f}}return a.angle=0,a.lastCurve=Ut.none,pt.none}},{key:"boundingBox",value:function(e){var t=this.s,r=this.e,n=r.x-t.x,i=r.y-t.y,a=Math.atan2(i,n),o=e*Math.cos(a+Math.PI/2),s=e*Math.sin(a+Math.PI/2);return new tt.Rect(t.x,t.y,{l:t.x-Math.min(t.x+o,t.x-o,r.x+o,r.x-o),r:Math.max(t.x+o,t.x-o,r.x+o,r.x-o)-t.x,u:Math.max(t.y+s,t.y-s,r.y+s,r.y-s)-t.y,d:t.y-Math.min(t.y+s,t.y-s,r.y+s,r.y-s)})}},{key:"drawLine",value:function(e,t,r,n,i){if(i.isEmpty)this._drawLine(e,t,r,n);else{var a=new Nt(0,1).differenceRanges(i),o=this;a.foreach((function(i){o.slice(i.start,i.end)._drawLine(e,t,r,n)}))}}},{key:"_drawLine",value:function(t,r,n,i){var a=e.MathJax.xypic.measure.thickness,o=this.s,s=this.e;if(o.x!==s.x||o.y!==s.y){var u=s.x-o.x,c=s.y-o.y,h=Math.atan2(c,u),l={x:0,y:0};switch(n){case"":break;case"-":this.drawStraightLine(t,o,s,l,h,a,i,"");break;case"=":this.drawStraightLine(t,o,s,l,h,a,"2","");break;case".":case"..":this.drawStraightLine(t,o,s,l,h,a,i,e.MathJax.xypic.measure.dottedDasharray);break;case":":case"::":this.drawStraightLine(t,o,s,l,h,a,"2",e.MathJax.xypic.measure.dottedDasharray);break;case"--":case"==":var p=3*a;if((k=Math.sqrt(u*u+c*c))>=p)l={x:(L=(k-p)/2-Math.floor((k-p)/2/p)*p)*Math.cos(h),y:L*Math.sin(h)},this.drawStraightLine(t,o,s,l,h,a,"=="===n?"2":i,e.MathJax.xypic.measure.em2px(p)+" "+e.MathJax.xypic.measure.em2px(p));break;case"~":if((k=Math.sqrt(u*u+c*c))>=(w=4*a)){l={x:(L=(k-(E=Math.floor(k/w))*w)/2)*Math.cos(h),y:L*Math.sin(h)};for(var f=a*Math.cos(h+Math.PI/2),d=a*Math.sin(h+Math.PI/2),m=a*Math.cos(h),y=a*Math.sin(h),x=o.x+l.x,v=-o.y-l.y,g="M"+e.MathJax.xypic.measure.em2px(x)+","+e.MathJax.xypic.measure.em2px(v)+" Q"+e.MathJax.xypic.measure.em2px(x+m+f)+","+e.MathJax.xypic.measure.em2px(v-y-d)+" "+e.MathJax.xypic.measure.em2px(x+2*m)+","+e.MathJax.xypic.measure.em2px(v-2*y)+" T"+e.MathJax.xypic.measure.em2px(x+4*m)+","+e.MathJax.xypic.measure.em2px(v-4*y),M=1;M<E;M++)g+=" T"+e.MathJax.xypic.measure.em2px(x+(4*M+2)*m)+","+e.MathJax.xypic.measure.em2px(v-(4*M+2)*y)+" T"+e.MathJax.xypic.measure.em2px(x+(4*M+4)*m)+","+e.MathJax.xypic.measure.em2px(v-(4*M+4)*y);this.drawSquigglyLineShape(t,g,o,s,f,d,i)}break;case"~~":var w;if((k=Math.sqrt(u*u+c*c))>=(w=4*a)){l={x:(L=(k-w)/2-(E=Math.floor((k-w)/2/w))*w)*Math.cos(h),y:L*Math.sin(h)};for(f=a*Math.cos(h+Math.PI/2),d=a*Math.sin(h+Math.PI/2),m=a*Math.cos(h),y=a*Math.sin(h),x=o.x+l.x,v=-o.y-l.y,g="",M=0;M<=E;M++)g+=" M"+e.MathJax.xypic.measure.em2px(x+8*M*m)+","+e.MathJax.xypic.measure.em2px(v-8*M*y)+" Q"+e.MathJax.xypic.measure.em2px(x+(8*M+1)*m+f)+","+e.MathJax.xypic.measure.em2px(v-(8*M+1)*y-d)+" "+e.MathJax.xypic.measure.em2px(x+(8*M+2)*m)+","+e.MathJax.xypic.measure.em2px(v-(8*M+2)*y)+" T"+e.MathJax.xypic.measure.em2px(x+(8*M+4)*m)+","+e.MathJax.xypic.measure.em2px(v-(8*M+4)*y);this.drawSquigglyLineShape(t,g,o,s,f,d,i)}break;default:var b=new zt;b.c=zt.originPosition;var S=new Jt(pt.none,b),O=r.boundingBox(S);if(null==O)return;var C=O.l+O.r;0==C&&(C=e.MathJax.xypic.measure.strokeWidth);var E,k=Math.sqrt(u*u+c*c);if(0==(E=Math.floor(k/C)))return;var L=(k-E*C)/2,P=Math.cos(h),R=Math.sin(h),A=C*P,T=C*R,J=o.x+(L+O.l)*P,B=o.y+(L+O.l)*R;for(S=new Jt(pt.none,b),M=0;M<E;M++)b.c=new tt.Point(J+M*A,B+M*T),b.angle=h,r.toDropShape(S).draw(t)}}}},{key:"drawStraightLine",value:function(t,r,n,i,a,o,s,u){if("3"===s){var c=o*Math.cos(a+Math.PI/2),h=o*Math.sin(a+Math.PI/2);t.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r.x+i.x),y1:-e.MathJax.xypic.measure.em2px(r.y+i.y),x2:e.MathJax.xypic.measure.em2px(n.x),y2:-e.MathJax.xypic.measure.em2px(n.y),"stroke-dasharray":u}),t.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r.x+c+i.x),y1:-e.MathJax.xypic.measure.em2px(r.y+h+i.y),x2:e.MathJax.xypic.measure.em2px(n.x+c),y2:-e.MathJax.xypic.measure.em2px(n.y+h),"stroke-dasharray":u}),t.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r.x-c+i.x),y1:-e.MathJax.xypic.measure.em2px(r.y-h+i.y),x2:e.MathJax.xypic.measure.em2px(n.x-c),y2:-e.MathJax.xypic.measure.em2px(n.y-h),"stroke-dasharray":u})}else if("2"===s){c=o*Math.cos(a+Math.PI/2)/2,h=o*Math.sin(a+Math.PI/2)/2;t.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r.x+c+i.x),y1:-e.MathJax.xypic.measure.em2px(r.y+h+i.y),x2:e.MathJax.xypic.measure.em2px(n.x+c),y2:-e.MathJax.xypic.measure.em2px(n.y+h),"stroke-dasharray":u}),t.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r.x-c+i.x),y1:-e.MathJax.xypic.measure.em2px(r.y-h+i.y),x2:e.MathJax.xypic.measure.em2px(n.x-c),y2:-e.MathJax.xypic.measure.em2px(n.y-h),"stroke-dasharray":u})}else t.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r.x+i.x),y1:-e.MathJax.xypic.measure.em2px(r.y+i.y),x2:e.MathJax.xypic.measure.em2px(n.x),y2:-e.MathJax.xypic.measure.em2px(n.y),"stroke-dasharray":u})}},{key:"drawSquigglyLineShape",value:function(e,t,r,n,i,a,o){"3"===o?(e.createSVGElement("path",{d:t}),e.createGroup(e.transformBuilder().translate(i,a)).createSVGElement("path",{d:t}),e.createGroup(e.transformBuilder().translate(-i,-a)).createSVGElement("path",{d:t})):"2"===o?(e.createGroup(e.transformBuilder().translate(i/2,a/2)).createSVGElement("path",{d:t}),e.createGroup(e.transformBuilder().translate(-i/2,-a/2)).createSVGElement("path",{d:t})):e.createSVGElement("path",{d:t})}}]),t}();var qt=function(){function e(){Vt(this,e)}return Ht(e,[{key:"bezierFatLine",value:function(e){var t,r,n,i,a=this.cps[0],o=this.cps[e];if(a.x!==o.x||a.y!==o.y)t=a.y-o.y,r=o.x-a.x,t/=i=Math.sqrt(t*t+r*r),r/=i,n=(a.x*o.y-a.y*o.x)/i;else{var s=this.bezier.angle(this.tmin);t=-Math.sin(s),r=Math.cos(s),n=-t*this.cp0.x-r*this.cp0.y}for(var u=n,c=n,h=1;h<e;h++){var l=-t*this.cps[h].x-r*this.cps[h].y;l>c?c=l:l<u&&(u=l)}return{min:[t,r,u],max:[t,r,c]}}},{key:"clippedLineRange",value:function(e,t,r){for(var n,i,a,o,s,u=e.length-1,c=new Array(u+1),h=Ge,l=0;l<=u;l++)c[l]=[l/u,-t[0]*e[l].x-t[1]*e[l].y-t[2],1];if(c[0][1]<0){var p=!0;for(l=1;l<=u;l++){(n=-(d=h(c[0],c[l]))[2]/d[0])>0&&n<1&&(void 0===i||n<i)&&(i=n),c[l][1]>=0&&(p=!1)}if(p)return}else i=0;if(c[u][1]<0)for(l=0;l<u;l++){(n=-(m=h(c[u],c[l]))[2]/m[0])>0&&n<1&&(void 0===a||n>a)&&(a=n)}else a=1;for(l=0;l<=u;l++)c[l]=[l/u,r[0]*e[l].x+r[1]*e[l].y+r[2],1];if(c[0][1]<0){var f=!0;for(l=1;l<=u;l++){var d;(n=-(d=h(c[0],c[l]))[2]/d[0])>0&&n<1&&(void 0===o||n<o)&&(o=n),c[l][1]>=0&&(f=!1)}if(f)return}else o=0;if(c[u][1]<0)for(l=0;l<u;l++){var m;(n=-(m=h(c[u],c[l]))[2]/m[0])>0&&n<1&&(void 0===s||n>s)&&(s=n)}else s=1;var y=Math.max(i,o),x=Math.min(a,s);return{min:this.tmin+y*(this.tmax-this.tmin),max:this.tmin+x*(this.tmax-this.tmin)}}}],[{key:"findIntersections",value:function(t,r){for(var n=e.maxIterations,i=e.goalAccuracy,a=[[t,r,!1]],o=0,s=[];o<n&&a.length>0;){o++;var u=a.shift(),c=(t=u[0],r=u[1],u[2]),h=t.fatLine(),l=r.clippedRange(h.min,h.max);if(null!=l){var p=l.min,f=l.max,d=f-p;if(d<i&&t.paramLength()<i)c?s.push([r.clip(p,f).paramRange(),t.paramRange()]):s.push([t.paramRange(),r.clip(p,f).paramRange()]);else if(d<=.8*r.paramLength())a.push([r.clip(p,f),t,!c]);else if(d>t.paramLength()){var m=(f+p)/2;a.push([r.clip(p,m),t,!c]),a.push([r.clip(m,f),t,!c])}else{var y=r.clip(p,f),x=t.paramRange(),v=(x.min+x.max)/2;a.push([y,t.clip(x.min,v),!c]),a.push([y,t.clip(v,x.max),!c])}}}return s}},{key:"maxIterations",get:function(){return 30}},{key:"goalAccuracy",get:function(){return 1e-4}}]),e}();qt.Line=function(t){Dt(n,t);var r=_t(n);function n(e,t,i,a){var o;return Vt(this,n),(o=r.call(this)).p0=e,o.p1=t,o.tmin=i,o.tmax=a,o}return Ht(n,[{key:"paramRange",value:function(){return{min:this.tmin,max:this.tmax}}},{key:"paramLength",value:function(){return this.tmax-this.tmin}},{key:"containsParam",value:function(e){return e>=this.tmin&&e<=this.tmax}},{key:"position",value:function(e){return{x:this.p0.x+e*(this.p1.x-this.p0.x),y:this.p0.y+e*(this.p1.y-this.p0.y)}}},{key:"fatLine",value:function(){var e=this.p1.y-this.p0.y,t=this.p0.x-this.p1.x,r=this.p1.x*this.p0.y-this.p0.x*this.p1.y,n=Math.sqrt(e*e+t*t);return 0===n?(e=1,t=0):(e/=n,t/=n,r/=n),{min:[e,t,r],max:[e,t,r]}}},{key:"clip",value:function(e,t){return new qt.Line(this.p0,this.p1,e,t)}},{key:"clippedRange",value:function(e,t){var r=new Array(2);return r[0]=this.position(this.tmin),r[1]=this.position(this.tmax),this.clippedLineRange(r,e,t)}},{key:"drawFatLine",value:function(){this.fatLine().min;var t=function(e,t){return-(e*t[0]+t[2])/t[1]},r=this.p0.x,n=this.p1.x;e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(r),y1:-e.MathJax.xypic.measure.em2px(t(r,lmax)),x2:e.MathJax.xypic.measure.em2px(n),y2:-e.MathJax.xypic.measure.em2px(t(n,lmax)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"red"})}}]),n}(qt),qt.QuadBezier=function(t){Dt(n,t);var r=_t(n);function n(e,t,i){var a;return Vt(this,n),(a=r.call(this)).bezier=e,a.tmin=t,a.tmax=i,a.cp0=e.position(t),a.cp1=new tt.Point((1-i)*(1-t)*e.cp0.x+(t+i-2*t*i)*e.cp1.x+t*i*e.cp2.x,(1-i)*(1-t)*e.cp0.y+(t+i-2*t*i)*e.cp1.y+t*i*e.cp2.y),a.cp2=e.position(i),a.cps=[a.cp0,a.cp1,a.cp2],a}return Ht(n,[{key:"paramRange",value:function(){return{min:this.tmin,max:this.tmax}}},{key:"paramLength",value:function(){return this.tmax-this.tmin}},{key:"fatLine",value:function(){return this.bezierFatLine(2)}},{key:"clip",value:function(e,t){return new qt.QuadBezier(this.bezier,e,t)}},{key:"clippedRange",value:function(e,t){return this.clippedLineRange(this.cps,e,t)}},{key:"drawFatLine",value:function(){var t=this.fatLine(),r=t.min,n=t.max,i=function(e,t){return-(e*t[0]+t[2])/t[1]},a=this.cp0.x,o=this.cp2.x;e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(a),y1:-e.MathJax.xypic.measure.em2px(i(a,r)),x2:e.MathJax.xypic.measure.em2px(o),y2:-e.MathJax.xypic.measure.em2px(i(o,r)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"blue"}),e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(a),y1:-e.MathJax.xypic.measure.em2px(i(a,n)),x2:e.MathJax.xypic.measure.em2px(o),y2:-e.MathJax.xypic.measure.em2px(i(o,n)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"red"})}}]),n}(qt),qt.CubicBezier=function(t){Dt(n,t);var r=_t(n);function n(e,t,i){var a;return Vt(this,n),(a=r.call(this)).bezier=e,a.tmin=t,a.tmax=i,a.cp0=e.position(t),a.cp1=new tt.Point((1-i)*(1-t)*(1-t)*e.cp0.x+(1-t)*(2*t+i-3*t*i)*e.cp1.x+t*(2*i+t-3*t*i)*e.cp2.x+t*t*i*e.cp3.x,(1-i)*(1-t)*(1-t)*e.cp0.y+(1-t)*(2*t+i-3*t*i)*e.cp1.y+t*(2*i+t-3*t*i)*e.cp2.y+t*t*i*e.cp3.y),a.cp2=new tt.Point((1-t)*(1-i)*(1-i)*e.cp0.x+(1-i)*(2*i+t-3*t*i)*e.cp1.x+i*(2*t+i-3*t*i)*e.cp2.x+t*i*i*e.cp3.x,(1-t)*(1-i)*(1-i)*e.cp0.y+(1-i)*(2*i+t-3*t*i)*e.cp1.y+i*(2*t+i-3*t*i)*e.cp2.y+t*i*i*e.cp3.y),a.cp3=e.position(i),a.cps=[a.cp0,a.cp1,a.cp2,a.cp3],a}return Ht(n,[{key:"paramRange",value:function(){return{min:this.tmin,max:this.tmax}}},{key:"paramLength",value:function(){return this.tmax-this.tmin}},{key:"fatLine",value:function(){return this.bezierFatLine(3)}},{key:"clip",value:function(e,t){return new qt.CubicBezier(this.bezier,e,t)}},{key:"clippedRange",value:function(e,t){return this.clippedLineRange(this.cps,e,t)}},{key:"drawFatLine",value:function(){var t=this.fatLine(),r=t.min,n=t.max,i=function(e,t){return-(e*t[0]+t[2])/t[1]},a=this.cp0.x,o=this.cp3.x;e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(a),y1:-e.MathJax.xypic.measure.em2px(i(a,r)),x2:e.MathJax.xypic.measure.em2px(o),y2:-e.MathJax.xypic.measure.em2px(i(o,r)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"blue"}),e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(a),y1:-e.MathJax.xypic.measure.em2px(i(a,n)),x2:e.MathJax.xypic.measure.em2px(o),y2:-e.MathJax.xypic.measure.em2px(i(o,n)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"red"})}}]),n}(qt),qt.Arc=function(t){Dt(n,t);var r=_t(n);function n(e,t,i,a,o,s){var u;return Vt(this,n),(u=r.call(this)).x=e,u.y=t,u.rx=i,u.ry=a,u.angleMin=o,u.angleMax=s,u}return Ht(n,[{key:"paramRange",value:function(){return{min:this.angleMin,max:this.angleMax}}},{key:"paramLength",value:function(){return this.angleMax-this.angleMin}},{key:"normalizeAngle",value:function(e){return(e=e%2*Math.PI)>Math.PI?e-2*Math.PI:e<-Math.PI?e+2*Math.PI:e}},{key:"containsParam",value:function(e){return e>=this.angleMin&&e<=this.angleMax}},{key:"fatLine",value:function(){var e=this.rx,t=this.ry,r=(this.angleMax+this.angleMin)/2,n=(this.angleMax-this.angleMin)/2,i=Math.cos(r),a=Math.sin(r),o=Math.sqrt(e*e*a*a+t*t*i*i);if(o<p.machinePrecision)var s=[1,0,this.x*t*i+this.y*e*a+e*t*Math.cos(n)],u=[1,0,this.x*t*i+this.y*e*a+e*t];else{var c=e/o,h=t/o;s=[-h*i,-c*a,this.x*h*i+this.y*c*a+e*t/o*Math.cos(n)],u=[-h*i,-c*a,this.x*h*i+this.y*c*a+e*t/o]}return{min:s,max:u}}},{key:"clip",value:function(e,t){return new qt.Arc(this.x,this.y,this.rx,this.ry,e,t)}},{key:"toCircleLine",value:function(e,t,r,n,i){var a=e[0],o=e[1],s=a*n,u=o*i,c=e[2]*n+(n-i)*o*r,h=Math.sqrt(s*s+u*u);return h<p.machinePrecision?(s=1,u=0):(s/=h,u/=h,c/=h),[s,u,c]}},{key:"clippedRange",value:function(e,t){var r=this.x,n=this.y,i=this.rx,a=this.ry,o=this.toCircleLine(e,r,n,i,a),s=this.toCircleLine(t,r,n,i,a),u=i,c=this.angleMin,h=this.angleMax,l=-(o[0]*r+o[1]*n+o[2]),p=[];if(u*u-l*l>=0){var f=o[0]*l-o[1]*Math.sqrt(u*u-l*l),d=o[1]*l+o[0]*Math.sqrt(u*u-l*l),m=o[0]*l+o[1]*Math.sqrt(u*u-l*l),y=o[1]*l-o[0]*Math.sqrt(u*u-l*l),x=Math.atan2(d,f),v=Math.atan2(y,m);this.containsParam(x)&&p.push(x),this.containsParam(v)&&p.push(v)}var g,M,w=-(o[0]*(r+u*Math.cos(c))+o[1]*(n+u*Math.sin(c))+o[2]),b=-(o[0]*(r+u*Math.cos(h))+o[1]*(n+u*Math.sin(h))+o[2]);if(w<0){if(0==p.length)return;g=Math.min.apply(Math,p)}else g=this.angleMin;if(b<0){if(0==p.length)return;M=Math.max.apply(Math,p)}else M=this.angleMax;p=[];if(u*u-(l=s[0]*r+s[1]*n+s[2])*l>=0){f=-o[0]*l+o[1]*Math.sqrt(u*u-l*l),d=-o[1]*l-o[0]*Math.sqrt(u*u-l*l),m=-o[0]*l-o[1]*Math.sqrt(u*u-l*l),y=-o[1]*l+o[0]*Math.sqrt(u*u-l*l),x=Math.atan2(d,f),v=Math.atan2(y,m);this.containsParam(x)&&p.push(x),this.containsParam(v)&&p.push(v)}var S,O;w=s[0]*(r+u*Math.cos(c))+s[1]*(n+u*Math.sin(c))+s[2],b=s[0]*(r+u*Math.cos(h))+s[1]*(n+u*Math.sin(h))+s[2];if(w<0){if(0==p.length)return;S=Math.min.apply(Math,p)}else S=this.angleMin;if(b<0){if(0==p.length)return;O=Math.max.apply(Math,p)}else O=this.angleMax;return{min:Math.max(g,S),max:Math.min(M,O)}}},{key:"drawFatLine",value:function(){var t=this.fatLine(),r=t.min,n=t.max,i=function(e,t){return-(e*t[0]+t[2])/t[1]},a=this.x+this.r*Math.cos(this.angleMin),o=this.x+this.r*Math.cos(this.angleMax);e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(a),y1:-e.MathJax.xypic.measure.em2px(i(a,r)),x2:e.MathJax.xypic.measure.em2px(o),y2:-e.MathJax.xypic.measure.em2px(i(o,r)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"blue"}),e.MathJax.xypic.svgForDebug.createSVGElement("line",{x1:e.MathJax.xypic.measure.em2px(a),y1:-e.MathJax.xypic.measure.em2px(i(a,n)),x2:e.MathJax.xypic.measure.em2px(o),y2:-e.MathJax.xypic.measure.em2px(i(o,n)),"stroke-width":e.MathJax.xypic.measure.em2px(.02*e.MathJax.xypic.measure.oneem),stroke:"red"})}}]),n}(qt);var Ut=function e(){Vt(this,e)};function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kt(e,t,r){return t&&Qt(e.prototype,t),r&&Qt(e,r),e}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Ut.None=function(e){Dt(r,e);var t=_t(r);function r(){return Vt(this,r),t.call(this)}return Ht(r,[{key:"isDefined",get:function(){return!1}},{key:"segments",value:function(){return[]}},{key:"angle",value:function(){return 0}}]),r}(Ut),Ut.none=new Ut.None,Ut.Line=function(e){Dt(r,e);var t=_t(r);function r(e,n,i,a,o){var s;return Vt(this,r),(s=t.call(this)).start=e,s.end=n,s.p=i,s.c=a,s.lineShape=o,s}return Ht(r,[{key:"isDefined",get:function(){return!0}},{key:"position",value:function(e){return new tt.Point(this.p.x+e*(this.c.x-this.p.x),this.p.y+e*(this.c.y-this.p.y))}},{key:"derivative",value:function(e){return new tt.Point(this.c.x-this.p.x,this.c.y-this.p.y)}},{key:"angle",value:function(e){var t=this.c.x-this.p.x,r=this.c.y-this.p.y;return 0===t&&0===r?0:Math.atan2(r,t)}},{key:"tOfPlace",value:function(e,t,r,n){var i=e?this.start:this.p,a=t?this.end:this.c;if(i.x===a.x&&i.y===a.y)return 0;var o,s,u=a.x-i.x,c=a.y-i.y,h=Math.sqrt(u*u+c*c);r>.5?(o=a.x-(1-r)*u+n*u/h,s=a.y-(1-r)*c+n*c/h):(o=i.x+r*u+n*u/h,s=i.y+r*c+n*c/h);var l=this.c.x-this.p.x,p=this.c.y-this.p.y;return 0===l&&0===p?0:Math.abs(l)>Math.abs(p)?(o-this.p.x)/l:(s-this.p.y)/p}},{key:"sliceHole",value:function(e,t){if(void 0!==this.lineShape&&!e.isPoint()){var r=this.lineShape,n=r.line,i=n.tOfIntersections(e);i.push(0),i.push(1),i.sort();for(var a=i[0],o=1;o<i.length;o++){var s=i[o],u=n.position((s+a)/2);if(e.contains(u)){var c=new Nt(a,s);r.sliceHole(c)}a=s}}}},{key:"segments",value:function(){return[new qt.Line(this.p,this.c,0,1)]}}]),r}(Ut),Ut.QuadBezier=function(e){Dt(r,e);var t=_t(r);function r(e,n,i,a){var o;return Vt(this,r),(o=t.call(this)).origBezier=e,o.tOfShavedStart=n,o.tOfShavedEnd=i,a.isNone||(o.curveShape=a,n>0&&a.sliceHole(new Nt(0,n)),i<1&&a.sliceHole(new Nt(i,1))),o}return Ht(r,[{key:"isDefined",get:function(){return!0}},{key:"position",value:function(e){return this.origBezier.position(e)}},{key:"derivative",value:function(e){return this.origBezier.derivative(e)}},{key:"angle",value:function(e){return this.origBezier.angle(e)}},{key:"tOfPlace",value:function(e,t,r,n){var i,a;e?(i=this.tOfShavedStart,a=t?this.tOfShavedEnd-this.tOfShavedStart:1-this.tOfShavedStart):(i=0,a=t?this.tOfShavedEnd:1);var o=this.origBezier,s=i+a*r;if(0!==n){var u=o.length(s);s=o.tOfLength(u+n)}return s}},{key:"sliceHole",value:function(e,t){var r=this.curveShape;if(void 0!==r&&!e.isPoint()){var n=r.curve,i=n.tOfIntersections(e);i.push(0),i.push(1),i.sort();for(var a=i[0],o=1;o<i.length;o++){var s=i[o];if(a<=t&&t<=s){var u=n.position((s+a)/2);if(e.contains(u)){var c=new Nt(a,s);r.sliceHole(c)}}a=s}}}},{key:"segments",value:function(){return[new qt.QuadBezier(this.origBezier,0,1)]}}]),r}(Ut),Ut.CubicBezier=function(e){Dt(r,e);var t=_t(r);function r(e,n,i,a){var o;return Vt(this,r),(o=t.call(this)).origBezier=e,o.tOfShavedStart=n,o.tOfShavedEnd=i,a.isNone||(o.curveShape=a,n>0&&a.sliceHole(new Nt(0,n)),i<1&&a.sliceHole(new Nt(i,1))),o}return Ht(r,[{key:"originalLine",value:function(){return this.originalLine}},{key:"isDefined",get:function(){return!0}},{key:"position",value:function(e){return this.origBezier.position(e)}},{key:"derivative",value:function(e){return this.origBezier.derivative(e)}},{key:"angle",value:function(e){return this.origBezier.angle(e)}},{key:"tOfPlace",value:function(e,t,r,n){var i,a;e?(i=this.tOfShavedStart,a=t?this.tOfShavedEnd-this.tOfShavedStart:1-this.tOfShavedStart):(i=0,a=t?this.tOfShavedEnd:1);var o=this.origBezier,s=i+a*r;if(0!==n){var u=o.length(s);s=o.tOfLength(u+n)}return s}},{key:"sliceHole",value:function(e,t){var r=this.curveShape;if(void 0!==r&&!e.isPoint()){var n=r.curve,i=n.tOfIntersections(e);i.push(0),i.push(1),i.sort();for(var a=i[0],o=1;o<i.length;o++){var s=i[o];if(a<=t&&t<=s){var u=n.position((s+a)/2);if(e.contains(u)){var c=new Nt(a,s);r.sliceHole(c)}}a=s}}}},{key:"segments",value:function(){return[new qt.CubicBezier(this.origBezier,0,1)]}}]),r}(Ut),Ut.CubicBSpline=function(e){Dt(r,e);var t=_t(r);function r(e,n,i,a,o,s){var u;return Vt(this,r),(u=t.call(this)).s=e,u.e=n,u.origBeziers=i,u.tOfShavedStart=a,u.tOfShavedEnd=o,s.isNone||(u.curveShape=s,a>0&&s.sliceHole(new Nt(0,a)),o<1&&s.sliceHole(new Nt(o,1))),u}return Ht(r,[{key:"isDefined",get:function(){return!0}},{key:"position",value:function(e){return this.origBeziers.position(e)}},{key:"derivative",value:function(e){return this.origBeziers.derivative(e)}},{key:"angle",value:function(e){return this.origBeziers.angle(e)}},{key:"tOfPlace",value:function(e,t,r,n){var i,a;e?(i=this.tOfShavedStart,a=t?this.tOfShavedEnd-this.tOfShavedStart:1-this.tOfShavedStart):(i=0,a=t?this.tOfShavedEnd:1);var o=this.origBeziers,s=i+a*r;if(0!==n){var u=o.length(s);s=o.tOfLength(u+n)}return s}},{key:"sliceHole",value:function(e,t){var r=this.curveShape;if(void 0!==r&&!e.isPoint()){var n=r.curve,i=n.tOfIntersections(e);i.push(0),i.push(1),i.sort();for(var a=i[0],o=1;o<i.length;o++){var s=i[o];if(a<=t&&t<=s){var u=n.position((s+a)/2);if(e.contains(u)){var c=new Nt(a,s);r.sliceHole(c)}}a=s}}}},{key:"segments",value:function(){for(var e=new Array(this.origBeziers.length),t=e.length,r=0;r<t;r++)e[r]=new qt.CubicBezier(this.origBezier,r/t,(r+1)/t);return e}}]),r}(Ut);var Yt=function e(){$t(this,e)};function Zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tr(e,t,r){return t&&er(e.prototype,t),r&&er(e,r),e}function rr(e,t){for(var r in t)e.prototype.hasOwnProperty(r)?console.log("WARN","method "+r+" is already exists in class "+e.name):e.prototype[r]=t[r]}Yt.Position=function(){function e(t){$t(this,e),this.pos=t}return Kt(e,[{key:"position",value:function(e){return this.pos}},{key:"toString",value:function(){return this.pos.toString()}}]),e}(),Yt.Macro=function(){function e(t){$t(this,e),this.macro=t}return Kt(e,[{key:"position",value:function(e){return env.c=this.macro.position(e),env.c}},{key:"toString",value:function(){return this.macro.toString()}}]),e}(),Yt.Base=function(){function e(t,r,n){$t(this,e),this.origin=t,this.xBase=r,this.yBase=n}return Kt(e,[{key:"position",value:function(e){var t=e.env;return t.origin=this.origin,t.xBase=this.xBase,t.yBase=this.yBase,t.c}},{key:"toString",value:function(){return"origin:"+this.origin+", xBase:"+this.xBase+", yBase:"+this.yBase}}]),e}(),Yt.Stack=function(){function e(t){$t(this,e),this.stack=t}return Kt(e,[{key:"position",value:function(e){var t=e.env;return this.stack.isEmpty||(this.stack.tail.reverse().foreach((function(e){t.capturePosition(e)})),t.c=this.stack.head),t.c}},{key:"toString",value:function(){return this.stack.toString()}}]),e}(),rr(ge.PosDecor,{toShape:function(e){this.pos.toShape(e),this.decor.toShape(e)}}),rr(ge.Pos.Coord,{toShape:function(e){e.env.c=this.coord.position(e),this.pos2s.foreach((function(t){t.toShape(e)}))}}),rr(ge.Pos.Plus,{toShape:function(e){var t=e.env,r=this.coord.position(e);t.c=r.move(t.c.x+r.x,t.c.y+r.y)}}),rr(ge.Pos.Minus,{toShape:function(e){var t=e.env,r=this.coord.position(e);t.c=r.move(t.c.x-r.x,t.c.y-r.y)}}),rr(ge.Pos.Skew,{toShape:function(e){var t=e.env,r=this.coord.position(e),n=new tt.Point(r.x+t.c.x,r.y+t.c.y);t.c=n.combineRect(t.c)}}),rr(ge.Pos.Cover,{toShape:function(e){var t=e.env,r=this.coord.position(e);t.c=t.c.combineRect(r)}}),rr(ge.Pos.Then,{toShape:function(e){var t=e.env;t.capturePosition(t.c),t.c=this.coord.position(e)}}),rr(ge.Pos.SwapPAndC,{toShape:function(e){var t=e.env;t.swapPAndC(),t.c=this.coord.position(e)}}),rr(ge.Pos.SetBase,{toShape:function(e){var t=e.env,r=t.p,n=t.c.x-r.x,i=t.c.y-r.y;t.setOrigin(r.x,r.y),t.setXBase(n,i),t.setYBase(-i,n),t.c=this.coord.position(e)}}),rr(ge.Pos.SetYBase,{toShape:function(e){var t=e.env;t.setYBase(t.c.x-t.origin.x,t.c.y-t.origin.y),t.c=this.coord.position(e)}}),rr(ge.Pos.ConnectObject,{toShape:function(e){this.object.toConnectShape(e)}}),rr(ge.Pos.DropObject,{toShape:function(e){this.object.toDropShape(e)}}),rr(ge.Pos.Place,{toShape:function(t){var r=t.env;if(r.lastCurve.isDefined){var n,i=this.place,a=i.shaveP>0,o=i.shaveC>0,s=a?i.shaveP-1:0,u=o?i.shaveC-1:0;if(a&&(n=0),o&&(n=1),a==o&&(n=.5),void 0!==i.factor)if(i.factor.isIntercept){if(o=a=!1,void 0===(n=i.factor.value(t)))return}else n=i.factor.value(t);var c=e.MathJax.xypic.measure.length2em(i.slide.dimen.getOrElse("0"))+(s-u)*e.MathJax.xypic.measure.jot,h=r.lastCurve.tOfPlace(a,o,n,c),l=r.lastCurve.position(h),p=r.lastCurve.angle(h);return r.c=l,r.angle=p,h}}}),rr(ge.Pos.PushCoord,{toShape:function(e){var t=e.env,r=this.coord.position(e);t.pushPos(r)}}),rr(ge.Pos.EvalCoordThenPop,{toShape:function(e){var t=e.env;t.c=this.coord.position(e),t.popPos()}}),rr(ge.Pos.LoadStack,{toShape:function(e){var t=e.env;t.startCapturePositions(),this.coord.position(e);var r=t.endCapturePositions();t.setStack(r),t.pushPos(t.c)}}),rr(ge.Pos.DoCoord,{toShape:function(e){var t=e.env,r=this.coord;t.stack.reverse().foreach((function(n){t.c=n,r.position(e)}))}}),rr(ge.Pos.InitStack,{toShape:function(e){e.env.initStack()}}),rr(ge.Pos.EnterFrame,{toShape:function(e){e.env.enterStackFrame()}}),rr(ge.Pos.LeaveFrame,{toShape:function(e){e.env.leaveStackFrame()}}),rr(ge.Place.Factor,{value:function(e){return this.factor}}),rr(ge.Place.Intercept,{value:function(e){var t=e.env;if(t.lastCurve.isDefined){var r=t.duplicate();r.angle=0,r.lastCurve=Ut.none,r.p=r.c=zt.originPosition;var n=new Jt(pt.none,r);this.pos.toShape(n);e.appendShapeToFront(n.shape),r.lastCurve.isDefined||(r.lastCurve=new Ut.Line(r.p,r.c,r.p,r.c,void 0));for(var i=[],a=t.lastCurve.segments(),o=r.lastCurve.segments(),s=0;s<a.length;s++)for(var u=0;u<o.length;u++)i=i.concat(qt.findIntersections(a[s],o[u]));if(0===i.length){console.log("perhaps no curve intersection.");for(var c=t.lastCurve,h=r.lastCurve,l=1e-5,p=0,f=2,d=0,m=0,y=function(e){return 1/(1+Math.exp(-e))},x=function(e){var t=Math.exp(-e);return t/(1+t)/(1+t)},v=y(d),g=y(m),M=x(d),w=x(m),b=c.derivative(v),S=h.derivative(g),O=b.x*M,C=-S.x*w,E=b.y*M,k=-S.y*w,L=O*O+E*E,P=O*C+E*k,R=C*O+k*E,A=C*C+k*k,T=c.position(v),J=h.position(g),B=T.x-J.x,N=T.y-J.y,I=O*B+E*N,D=C*B+k*N,j=Math.sqrt(I*I+D*D)<l,_=.001*Math.max(L,A);!j&&p<100;){p++;do{var F=A+_,G=(L+_)*F-P*R,V=(F*I-P*D)/G,X=(-R*I+L*D)/G;if(V*V+X*X<1.0000000000000002e-10*(d*d+m*m))j=!0;else{var H=d-V,z=m-X,W=y(H),q=y(z),U=c.position(W),Q=h.position(q),K=U.x-Q.x,$=U.y-Q.y,Y=(B*B+N*N-(K*K+$*$))/(V*(_*V+I)+X*(_*X+D));if(Y>0){m=z,v=W,g=q,M=x(d=H),w=x(m),b=c.derivative(v),S=h.derivative(g),O=b.x*M,C=-S.x*w,L=O*O+(E=b.y*M)*E,P=O*C+E*(k=-S.y*w),R=C*O+k*E,A=C*C+k*k,I=O*(B=K)+E*(N=$),D=C*B+k*N,j=Math.sqrt(I*I+D*D)<l;var Z=2*Y-1;_+=Math.max(1/3,1-Z*Z*Z),f=2}else _*=f,f*=2}}while(!(j||void 0!==Y&&Y>0))}return y(d)}var ee=(i[0][0].min+i[0][0].max)/2;for(s=1;s<i.length;s++){var te=(i[s][0].min+i[s][0].max)/2;ee>te&&(ee=te)}return ee}}}),rr(ge.Pos.SavePos,{toShape:function(e){var t=e.env;t.savePos(this.id,new Yt.Position(t.c))}}),rr(ge.Pos.SaveMacro,{toShape:function(e){e.env.savePos(this.id,new Yt.Macro(this.macro))}}),rr(ge.Pos.SaveBase,{toShape:function(e){var t=e.env;t.savePos(this.id,new Yt.Base(t.origin,t.xBase,t.yBase))}}),rr(ge.Pos.SaveStack,{toShape:function(e){var t=e.env;t.savePos(this.id,new Yt.Stack(t.stack))}}),rr(ge.Object,{toDropShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;var r=this.modifiers;if(r.isEmpty)return this.object.toDropShape(e);var n=t.duplicate(),i=new Jt(pt.none,n),a=B.empty;r.foreach((function(e){e.preprocess(i,a),a=a.prepend(e)}));var o=this.object.toDropShape(i),s=n.c;if(void 0===s)return pt.none;var u=n.originalReferencePoint;return(n=t.duplicate()).c=s,n.originalReferencePoint=u,i=new Jt(pt.none,n),o=r.head.modifyShape(i,o,r.tail),e.appendShapeToFront(o),t.c=n.c.move(t.c.x,t.c.y),o},toConnectShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;var r=this.modifiers;if(r.isEmpty)return this.object.toConnectShape(e);var n=t.duplicate(),i=new Jt(pt.none,n),a=B.empty;r.foreach((function(e){e.preprocess(i,a),a=a.prepend(e)}));var o=this.object.toConnectShape(i);t.angle=n.angle,t.lastCurve=n.lastCurve;var s=n.c;if(void 0===s)return pt.none;var u=n.originalReferencePoint;return(n=t.duplicate()).c=s,n.originalReferencePoint=u,i=new Jt(pt.none,n),o=r.head.modifyShape(i,o,r.tail),e.appendShapeToFront(o),t.c=n.c.move(t.c.x,t.c.y),o},boundingBox:function(e){var t=e.duplicateEnv(),r=t.env;return r.angle=0,r.p=r.c=zt.originPosition,t.shape=pt.none,this.toDropShape(t).getBoundingBox()}}),rr(ge.ObjectBox,{toConnectShape:function(t){var r=(n=t.env).c,n=t.env,i=(e.MathJax.xypic.measure.thickness,n.p.edgePoint(n.c.x,n.c.y)),a=n.c.edgePoint(n.p.x,n.p.y);if(i.x!==a.x||i.y!==a.y){var o=new Wt.Line(i,a).toShape(t,this,"196883","");return n.originalReferencePoint=r,o}return n.angle=0,n.lastCurve=Ut.none,n.originalReferencePoint=r,pt.none},boundingBox:function(e){var t=e.duplicateEnv(),r=t.env;return r.angle=0,r.p=r.c=zt.originPosition,t.shape=pt.none,this.toDropShape(t).getBoundingBox()}}),rr(ge.ObjectBox.WrapUpObject,{toDropShape:function(e){var t=e.env,r=this.object.toDropShape(e);return t.originalReferencePoint=t.c,r},toConnectShape:function(e){var t=e.env,r=this.object.toConnectShape(e);return t.originalReferencePoint=t.c,r}}),rr(ge.ObjectBox.CompositeObject,{toDropShape:function(e){var t=e.env,r=t.c;if(void 0===r)return pt.none;var n=r,i=t.duplicate(),a=new Jt(pt.none,i);this.objects.foreach((function(e){i.c=r;var t=e.toDropShape(a);n=tt.combineRect(n,i.c),n=tt.combineRect(n,t.getBoundingBox().toPoint())})),t.c=n;var o=a.shape;return e.appendShapeToFront(o),t.originalReferencePoint=r,o}}),rr(ge.ObjectBox.Xybox,{toDropShape:function(e){var t=e.env,r=t.c;if(void 0===r)return pt.none;var n=new zt,i=new Jt(pt.none,n);this.posDecor.toShape(i);var a=i.shape,o=a.getBoundingBox();if(void 0===o)return pt.none;var s=Math.max(0,o.l-o.x),u=Math.max(0,o.r+o.x),c=Math.max(0,o.u+o.y),h=Math.max(0,o.d-o.y);t.c=new tt.Rect(r.x,r.y,{l:s,r:u,u:c,d:h}),t.originalReferencePoint=r;var l=new pt.TranslateShape(r.x,r.y,a);return e.appendShapeToFront(l),l}}),rr(ge.ObjectBox.Xymatrix,{toDropShape:function(e){var t=e.env,r=t.c,n=this.xymatrix.toShape(e);return t.originalReferencePoint=r,n}}),rr(ge.ObjectBox.Text,{toDropShape:function(e){var t=e.env,r=new pt.TextShape(t.c,this.math);return e.appendShapeToFront(r),t.c=r.getBoundingBox(),t.originalReferencePoint=r.getOriginalReferencePoint(),r}}),rr(ge.ObjectBox.Empty,{toDropShape:function(e){var t=e.env;return t.originalReferencePoint=t.c,t.c=new tt.Point(t.c.x,t.c.y),pt.none}}),rr(ge.ObjectBox.Txt,{toDropShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;var r=this.textObject.toDropShape(e);return t.originalReferencePoint=t.c,r}}),rr(ge.ObjectBox.Txt.Width.Vector,{width:function(e){return this.vector.xy().x}}),rr(ge.ObjectBox.Txt.Width.Default,{width:function(e){var t=e.env.c;return t.r+t.l}}),rr(ge.ObjectBox.Cir,{toDropShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;t.originalReferencePoint=t.c;var r=this.radius.radius(e),n=t.c.x,i=t.c.y,a=this.cir.toDropShape(e,n,i,r);return t.c=new tt.Ellipse(n,i,r,r,r,r),a},toConnectShape:function(e){var t=e.env;return t.originalReferencePoint=t.c,pt.none}}),rr(ge.ObjectBox.Cir.Radius.Vector,{radius:function(e){return this.vector.xy(e).x}}),rr(ge.ObjectBox.Cir.Radius.Default,{radius:function(e){return e.env.c.r}}),rr(ge.ObjectBox.Cir.Cir.Segment,{toDropShape:function(e,t,r,n){e.env;var i,a,o=this.startPointDegree(e),s=this.endPointDegree(e,o),u=s-o;if(0===(u=u<0?u+360:u))return pt.none;"^"===this.orient?(i=u>180?"1":"0",a="0"):(i=u>180?"0":"1",a="1");var c=Math.PI/180,h=t+n*Math.cos(o*c),l=r+n*Math.sin(o*c),p=t+n*Math.cos(s*c),f=r+n*Math.sin(s*c),d=new pt.CircleSegmentShape(t,r,h,l,n,i,a,p,f);return e.appendShapeToFront(d),d},startPointDegree:function(e){var t=this.startDiag.toString();return"^"===this.orient?this.diagToAngleACW(t):this.diagToAngleCW(t)},endPointDegree:function(e,t){var r=this.endDiag.toString();return"^"===this.orient?this.diagToAngleACW(r,t):this.diagToAngleCW(r,t)},diagToAngleACW:function(e,t){switch(e){case"l":return 90;case"r":return-90;case"d":return 180;case"u":return 0;case"dl":case"ld":return 135;case"dr":case"rd":return-135;case"ul":case"lu":return 45;case"ur":case"ru":return-45;default:return void 0!==t?t+180:0}},diagToAngleCW:function(e,t){switch(e){case"l":return-90;case"r":return 90;case"d":return 0;case"u":return 180;case"dl":case"ld":return-45;case"dr":case"rd":return 45;case"ul":case"lu":return-135;case"ur":case"ru":return 135;default:return void 0!==t?t+180:0}}}),rr(ge.ObjectBox.Cir.Cir.Full,{toDropShape:function(e,t,r,n){var i=new pt.FullCircleShape(t,r,n);return e.appendShapeToFront(i),i}}),rr(ge.ObjectBox.Frame,{toDropShape:function(e){var t=e.env;return t.originalReferencePoint=t.c,this.toDropFilledShape(e,"currentColor",!1)},toDropFilledShape:function(t,r,n){var i=t.env.c;if(void 0===i)return pt.none;var a=e.MathJax.xypic.measure.thickness,o=i.x,s=i.y,u=i.l,c=i.r,h=i.u,l=i.d,p=pt.none;switch(this.main){case"--":var f=3*a;if(n){var d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f))}else{var m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!1,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f))}break;case"==":f=3*a;if(n){d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!0,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f))}else{m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!0,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f))}break;case"o-":f=3*a,m=e.MathJax.xypic.measure.lineElementLength;p=new pt.RectangleShape(o,s,u,c,h,l,m,!1,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f));break;case"oo":var y=(d=this.radius.xy(t)).x;p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,y,y,!0,r,void 0);break;case"ee":d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!0,r,void 0);break;case"-,":var x=this.radius.depth(t);m=this.radius.radius(t);p=new pt.CompositeShape(new pt.RectangleShape(o,s,u,c,h,l,m,!1,r,void 0),new pt.BoxShadeShape(o,s,u,c,h,l,x));break;case".o":y=(d=this.radius.xy(t)).x;p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,y,y,!1,r,e.MathJax.xypic.measure.dottedDasharray);break;case"-o":f=3*a,y=(d=this.radius.xy(t)).x;p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,y,y,!1,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f));break;case".e":d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,r,e.MathJax.xypic.measure.dottedDasharray);break;case"-e":f=3*a,d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,r,e.MathJax.xypic.measure.em2px(f)+" "+e.MathJax.xypic.measure.em2px(f));break;case"-":if(n){d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,r,void 0)}else{m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!1,r,void 0)}break;case"=":if(n){d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!0,r,void 0)}else{m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!0,r,void 0)}break;case".":if(n){d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,r,e.MathJax.xypic.measure.dottedDasharray)}else{m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!1,r,e.MathJax.xypic.measure.dottedDasharray)}break;case",":x=this.radius.depth(t);p=new pt.BoxShadeShape(o,s,u,c,h,l,x,r);break;case"o":y=(d=this.radius.xy(t)).x;p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,y,y,!1,r,void 0);break;case"e":d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,r,void 0);break;case"\\{":p=new pt.LeftBrace(o-u,s,h,l,0,r);break;case"\\}":p=new pt.LeftBrace(o+c,s,l,h,180,r);break;case"^\\}":case"^\\{":p=new pt.LeftBrace(o,s+h,c,u,270,r);break;case"_\\{":case"_\\}":p=new pt.LeftBrace(o,s-l,u,c,90,r);break;case"(":p=new pt.LeftParenthesis(o-u,s+(h-l)/2,h+l,0,r);break;case")":p=new pt.LeftParenthesis(o+c,s+(h-l)/2,h+l,180,r);break;case"^(":case"^)":p=new pt.LeftParenthesis(o+(c-u)/2,s+h,u+c,270,r);break;case"_(":case"_)":p=new pt.LeftParenthesis(o+(c-u)/2,s-l,u+c,90,r);break;case"*":if(i.isCircle()){d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,"currentColor",void 0,r,!0)}else{m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!1,"currentColor",void 0,r,!0)}break;case"**":if(i.isCircle()){d=this.radius.xy(t);p=new pt.EllipseShape(o+(c-u)/2,s+(h-l)/2,d.x,d.y,!1,"currentColor",void 0,r,!1)}else{m=this.radius.radius(t);p=new pt.RectangleShape(o,s,u,c,h,l,m,!1,"currentColor",void 0,r,!1)}break;default:return pt.none}return t.appendShapeToFront(p),p},toConnectShape:function(e){var t=e.env,r=t.c,n=t.p;void 0!==r&&void 0!==n||pt.none,t.originalReferencePoint=r;var i=t.duplicate();i.c=n.combineRect(r);var a=new Jt(pt.none,i),o=this.toDropShape(a);return e.appendShapeToFront(o),o}}),rr(ge.ObjectBox.Frame.Radius.Vector,{radius:function(e){return this.vector.xy(e).x},depth:function(e){return this.vector.xy(e).x},xy:function(e){return this.vector.xy(e)}}),rr(ge.ObjectBox.Frame.Radius.Default,{radius:function(e){return 0},depth:function(t){return e.MathJax.xypic.measure.thickness/2},xy:function(e){var t=e.env.c;return{x:(t.l+t.r)/2,y:(t.u+t.d)/2}}}),rr(ge.ObjectBox.Dir,{toDropShape:function(t){var r=t.env,n=r.c;r.originalReferencePoint=n;var i=r.angle;if(void 0===n)return pt.none;r.c=new tt.Point(n.x,n.y);e.MathJax.xypic.measure.thickness;var a=pt.none;switch(this.main){case"":return pt.none;case">":switch(this.variant){case"2":var o=(a=new pt.GT2ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;case"3":o=(a=new pt.GT3ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;default:a="^"===this.variant?new pt.UpperGTArrowheadShape(n,i):"_"===this.variant?new pt.LowerGTArrowheadShape(n,i):new pt.GTArrowheadShape(n,i)}break;case"<":switch(this.variant){case"2":o=(a=new pt.LT2ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;case"3":o=(a=new pt.LT3ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;default:a="^"===this.variant?new pt.UpperLTArrowheadShape(n,i):"_"===this.variant?new pt.LowerLTArrowheadShape(n,i):new pt.LTArrowheadShape(n,i)}break;case"|":switch(this.variant){case"^":a=new pt.UpperColumnArrowheadShape(n,i);break;case"_":a=new pt.LowerColumnArrowheadShape(n,i);break;case"2":a=new pt.Column2ArrowheadShape(n,i);break;case"3":a=new pt.Column3ArrowheadShape(n,i);break;default:a=new pt.ColumnArrowheadShape(n,i)}break;case"(":switch(this.variant){case"^":a=new pt.UpperLParenArrowheadShape(n,i);break;case"_":a=new pt.LowerLParenArrowheadShape(n,i);break;default:a=new pt.LParenArrowheadShape(n,i)}break;case")":switch(this.variant){case"^":a=new pt.UpperRParenArrowheadShape(n,i);break;case"_":a=new pt.LowerRParenArrowheadShape(n,i);break;default:a=new pt.RParenArrowheadShape(n,i)}break;case"`":switch(this.variant){case"_":a=new pt.LowerBackquoteArrowheadShape(n,i);break;case"^":default:a=new pt.UpperBackquoteArrowheadShape(n,i)}break;case"'":switch(this.variant){case"_":a=new pt.LowerQuoteArrowheadShape(n,i);break;case"^":default:a=new pt.UpperQuoteArrowheadShape(n,i)}break;case"*":a=new pt.AsteriskArrowheadShape(n,0);break;case"o":a=new pt.OArrowheadShape(n,0);break;case"+":a=new pt.PlusArrowheadShape(n,i);break;case"x":a=new pt.XArrowheadShape(n,i);break;case"/":a=new pt.SlashArrowheadShape(n,i);break;case"-":case"--":e.MathJax.xypic.measure.lineElementLength;a="3"===this.variant?new pt.Line3ArrowheadShape(n,i):"2"===this.variant?new pt.Line2ArrowheadShape(n,i):new pt.LineArrowheadShape(n,i);break;case"=":case"==":a=new pt.Line2ArrowheadShape(n,i);break;case".":case"..":a="3"===this.variant?new pt.Dot3ArrowheadShape(n,i):"2"===this.variant?new pt.Dot2ArrowheadShape(n,i):new pt.DotArrowheadShape(n,i);break;case":":case"::":a=new pt.Dot2ArrowheadShape(n,i);break;case"~":case"~~":a="3"===this.variant?new pt.Tilde3ArrowheadShape(n,i):"2"===this.variant?new pt.Tilde2ArrowheadShape(n,i):new pt.TildeArrowheadShape(n,i);break;case">>":switch(this.variant){case"^":a=new pt.UpperGTGTArrowheadShape(n,i);break;case"_":a=new pt.LowerGTGTArrowheadShape(n,i);break;case"2":o=(a=new pt.GTGT2ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;case"3":o=(a=new pt.GTGT3ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;default:a=new pt.GTGTArrowheadShape(n,i)}break;case"<<":switch(this.variant){case"^":a=new pt.UpperLTLTArrowheadShape(n,i);break;case"_":a=new pt.LowerLTLTArrowheadShape(n,i);break;case"2":o=(a=new pt.LTLT2ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;case"3":o=(a=new pt.LTLT3ArrowheadShape(n,i)).getRadius();r.c=new tt.Ellipse(n.x,n.y,o,o,o,o);break;default:a=new pt.LTLTArrowheadShape(n,i)}break;case"||":switch(this.variant){case"^":a=new pt.UpperColumnColumnArrowheadShape(n,i);break;case"_":a=new pt.LowerColumnColumnArrowheadShape(n,i);break;case"2":a=new pt.ColumnColumn2ArrowheadShape(n,i);break;case"3":a=new pt.ColumnColumn3ArrowheadShape(n,i);break;default:a=new pt.ColumnColumnArrowheadShape(n,i)}break;case"|-":switch(this.variant){case"^":a=new pt.UpperColumnLineArrowheadShape(n,i);break;case"_":a=new pt.LowerColumnLineArrowheadShape(n,i);break;case"2":a=new pt.ColumnLine2ArrowheadShape(n,i);break;case"3":a=new pt.ColumnLine3ArrowheadShape(n,i);break;default:a=new pt.ColumnLineArrowheadShape(n,i)}break;case">|":a=new pt.GTColumnArrowheadShape(n,i);break;case">>|":a=new pt.GTGTColumnArrowheadShape(n,i);break;case"|<":a=new pt.ColumnLTArrowheadShape(n,i);break;case"|<<":a=new pt.ColumnLTLTArrowheadShape(n,i);break;case"//":a=new pt.SlashSlashArrowheadShape(n,i);break;case"=>":a=new pt.LineGT2ArrowheadShape(n,i);break;default:var s=e.MathJax.xypic.repositories.dirRepository.get(this.main);if(void 0===s)throw new TeXError("ExecutionError","\\dir "+this.variant+"{"+this.main+"} not defined.");a=s.toDropShape(t)}return t.appendShapeToFront(a),a},toConnectShape:function(t){var r=t.env;r.originalReferencePoint=r.c;e.MathJax.xypic.measure.thickness;var n=r.p.edgePoint(r.c.x,r.c.y),i=r.c.edgePoint(r.p.x,r.p.y);return n.x!==i.x||n.y!==i.y?new Wt.Line(n,i).toShape(t,this,this.main,this.variant):(r.angle=0,r.lastCurve=Ut.none,pt.none)}}),rr(ge.ObjectBox.Curve,{toDropShape:function(e){var t=e.env;return t.originalReferencePoint=t.c,pt.none},toConnectShape:function(t){var r=t.env;r.originalReferencePoint=r.c;var n=void 0,i=void 0;this.objects.foreach((function(e){n=e.objectForDrop(n),i=e.objectForConnect(i)})),void 0===n&&void 0===i&&(i=new ge.Object(B.empty,new ge.ObjectBox.Dir("","-")));e.MathJax.xypic.measure.thickness;var a=r.c,o=r.p,s=[];this.poslist.foreach((function(e){e.addPositions(s,t)})),r.c=a,r.p=o;var u=pt.none,c=o,h=a;switch(s.length){case 0:return c.x===h.x&&c.y===h.y?(r.lastCurve=Ut.none,r.angle=0,pt.none):void 0!==i?i.toConnectShape(t):n.toConnectShape(t);case 1:var l=(f=new Wt.QuadBezier(c,s[0],h)).tOfShavedStart(c),p=f.tOfShavedEnd(h);if(void 0===l||void 0===p||l>=p)return r.angle=0,r.lastCurve=Ut.none,pt.none;u=f.toShape(t,n,i),r.lastCurve=new Ut.QuadBezier(f,l,p,u),r.angle=Math.atan2(h.y-c.y,h.x-c.x);break;case 2:var f;l=(f=new Wt.CubicBezier(c,s[0],s[1],h)).tOfShavedStart(c),p=f.tOfShavedEnd(h);if(void 0===l||void 0===p||l>=p)return r.angle=0,r.lastCurve=Ut.none,pt.none;u=f.toShape(t,n,i),r.lastCurve=new Ut.CubicBezier(f,l,p,u),r.angle=Math.atan2(h.y-c.y,h.x-c.x);break;default:var d=new Wt.CubicBSpline(c,s,h),m=new Wt.CubicBeziers(d.toCubicBeziers());l=m.tOfShavedStart(c),p=m.tOfShavedEnd(h);if(void 0===l||void 0===p||l>=p)return r.angle=0,r.lastCurve=Ut.none,pt.none;u=m.toShape(t,n,i),r.lastCurve=new Ut.CubicBSpline(c,h,m,l,p,u),r.angle=Math.atan2(h.y-c.y,h.x-c.x)}return u}}),rr(ge.ObjectBox.Curve.Object.Drop,{objectForDrop:function(e){return this.object},objectForConnect:function(e){return e}}),rr(ge.ObjectBox.Curve.Object.Connect,{objectForDrop:function(e){return e},objectForConnect:function(e){return this.object}}),rr(ge.ObjectBox.Curve.PosList.CurPos,{addPositions:function(e,t){var r=t.env;e.push(r.c)}}),rr(ge.ObjectBox.Curve.PosList.Pos,{addPositions:function(e,t){var r=t.env;this.pos.toShape(t),e.push(r.c)}}),rr(ge.ObjectBox.Curve.PosList.AddStack,{addPositions:function(e,t){t.env.stack.reverse().foreach((function(t){e.push(t)}))}}),rr(ge.Coord.C,{position:function(e){return e.env.c}}),rr(ge.Coord.P,{position:function(e){return e.env.p}}),rr(ge.Coord.X,{position:function(e){var t=e.env,r=t.p,n=t.c,i=t.origin,a=t.xBase,o=n.y-r.y,s=r.x-n.x,u=n.x*r.y-n.y*r.x,c=a.y,h=-a.x,l=a.x*i.y-a.y*i.x,f=o*h-c*s;if(Math.abs(f)<p.machinePrecision)return console.log("there is no intersection point."),zt.originPosition;var d=-(h*u-s*l)/f,m=(c*u-o*l)/f;return new tt.Point(d,m)}}),rr(ge.Coord.Y,{position:function(e){var t=e.env,r=t.p,n=t.c,i=t.origin,a=t.yBase,o=n.y-r.y,s=r.x-n.x,u=n.x*r.y-n.y*r.x,c=a.y,h=-a.x,l=a.x*i.y-a.y*i.x,f=o*h-c*s;if(Math.abs(f)<p.machinePrecision)return console.log("there is no intersection point."),zt.originPosition;var d=-(h*u-s*l)/f,m=(c*u-o*l)/f;return new tt.Point(d,m)}}),rr(ge.Coord.Vector,{position:function(e){var t=this.vector.xy(e);return new tt.Point(t.x,t.y)}}),rr(ge.Coord.Id,{position:function(e){return e.env.lookupPos(this.id).position(e)}}),rr(ge.Coord.Group,{position:function(e){var t=e.env,r=t.origin,n=t.xBase,i=t.yBase,a=t.p;return this.posDecor.toShape(e),t.p=a,t.origin=r,t.xBase=n,t.yBase=i,t.c}}),rr(ge.Coord.StackPosition,{position:function(e){return e.env.stackAt(this.number)}}),rr(ge.Coord.DeltaRowColumn,{position:function(e){var t=e.env,r=t.xymatrixRow,n=t.xymatrixCol;if(void 0===r||void 0===n)throw new TeXError("ExecutionError","xymatrix rows and columns not found for "+this.toSring());var i=this.prefix+(r+this.dr)+","+(n+this.dc);return e.env.lookupPos(i,'in entry "'+t.xymatrixRow+","+t.xymatrixCol+'": No '+this+" (is "+i+") from here.").position(e)}}),rr(ge.Coord.Hops,{position:function(e){var t=e.env,r=t.xymatrixRow,n=t.xymatrixCol;if(void 0===r||void 0===n)throw new TeXError("ExecutionError","xymatrix rows and columns not found for "+this.toSring());this.hops.foreach((function(e){switch(e){case"u":r-=1;break;case"d":r+=1;break;case"l":n-=1;break;case"r":n+=1}}));var i=this.prefix+r+","+n;return e.env.lookupPos(i,'in entry "'+t.xymatrixRow+","+t.xymatrixCol+'": No '+this+" (is "+i+") from here.").position(e)}}),rr(ge.Coord.HopsWithPlace,{position:function(e){var t=e.env,r=t.xymatrixRow,n=t.xymatrixCol;if(void 0===r||void 0===n)throw new TeXError("ExecutionError","xymatrix rows and columns not found for "+this.toSring());this.hops.foreach((function(e){switch(e){case"u":r-=1;break;case"d":r+=1;break;case"l":n-=1;break;case"r":n+=1}}));var i=this.prefix+r+","+n,a=e.env.lookupPos(i,'in entry "'+t.xymatrixRow+","+t.xymatrixCol+'": No '+this+" (is "+i+") from here.").position(e),o=(t.c,t.duplicate());o.p=t.c,o.c=a;var s,u=o.c.x-o.p.x,c=o.c.y-o.p.y;s=0===u&&0===c?0:Math.atan2(c,u),o.angle=s;var h=o.p.edgePoint(o.c.x,o.c.y),l=o.c.edgePoint(o.p.x,o.p.y);o.lastCurve=new Ut.Line(h,l,o.p,o.c,void 0);var p=new Jt(pt.none,o),f=this.place.toShape(p);return o.lastCurve.position(f)}}),rr(ge.Vector.InCurBase,{xy:function(e){return e.env.absVector(this.x,this.y)},angle:function(e){var t=e.env.absVector(this.x,this.y);return Math.atan2(t.y,t.x)}}),rr(ge.Vector.Abs,{xy:function(t){return{x:e.MathJax.xypic.measure.length2em(this.x),y:e.MathJax.xypic.measure.length2em(this.y)}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Vector.Angle,{xy:function(e){var t=Math.PI/180*this.degree,r=e.env.absVector(Math.cos(t),Math.sin(t));return r},angle:function(e){return Math.PI/180*this.degree}}),rr(ge.Vector.Dir,{xy:function(t){var r=e.MathJax.xypic.measure.length2em(this.dimen),n=this.dir.angle(t);return{x:r*Math.cos(n),y:r*Math.sin(n)}},angle:function(e){return this.dir.angle(e)}}),rr(ge.Vector.Corner,{xy:function(e){var t=this.corner.xy(e);return{x:t.x*this.factor,y:t.y*this.factor}},angle:function(e){return this.corner.angle(e)}}),rr(ge.Corner.L,{xy:function(e){return{x:-e.env.c.l,y:0}},angle:function(e){return Math.PI}}),rr(ge.Corner.R,{xy:function(e){return{x:e.env.c.r,y:0}},angle:function(e){return 0}}),rr(ge.Corner.D,{xy:function(e){return{x:0,y:-e.env.c.d}},angle:function(e){return-Math.PI/2}}),rr(ge.Corner.U,{xy:function(e){return{x:0,y:e.env.c.u}},angle:function(e){return Math.PI/2}}),rr(ge.Corner.CL,{xy:function(e){var t=e.env.c;return{x:-t.l,y:(t.u-t.d)/2}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.CR,{xy:function(e){var t=e.env.c;return{x:t.r,y:(t.u-t.d)/2}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.CD,{xy:function(e){var t=e.env.c;return{x:(t.r-t.l)/2,y:-t.d}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.CU,{xy:function(e){var t=e.env.c;return{x:(t.r-t.l)/2,y:t.u}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.LU,{xy:function(e){var t=e.env.c;return{x:-t.l,y:t.u}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.LD,{xy:function(e){var t=e.env.c;return{x:-t.l,y:-t.d}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.RU,{xy:function(e){var t=e.env.c;return{x:t.r,y:t.u}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.RD,{xy:function(e){var t=e.env.c;return{x:t.r,y:-t.d}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.NearestEdgePoint,{xy:function(e){var t=e.env,r=t.c,n=r.edgePoint(t.p.x,t.p.y);return{x:n.x-r.x,y:n.y-r.y}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.PropEdgePoint,{xy:function(e){var t=e.env,r=t.c,n=r.proportionalEdgePoint(t.p.x,t.p.y);return{x:n.x-r.x,y:n.y-r.y}},angle:function(e){var t=this.xy(e);return Math.atan2(t.y,t.x)}}),rr(ge.Corner.Axis,{xy:function(t){return{x:0,y:e.MathJax.xypic.measure.axisHeightLength}},angle:function(e){return Math.PI/2}}),rr(ge.Modifier,{proceedModifyShape:function(e,t,r){return r.isEmpty?t:r.head.modifyShape(e,t,r.tail)}}),rr(ge.Modifier.Vector,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=this.vector.xy(e),i=e.env;return i.c=i.c.shiftFrame(-n.x,-n.y),t=new pt.TranslateShape(-n.x,-n.y,t),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.RestoreOriginalRefPoint,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env,i=n.originalReferencePoint;if(void 0!==i){var a=n.c.x-i.x,o=n.c.y-i.y;n.c=n.c.shiftFrame(a,o),t=new pt.TranslateShape(a,o,t)}return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.Point,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env.c;return e.env.c=new tt.Point(n.x,n.y),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.Rect,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env.c;return e.env.c=new tt.Rect(n.x,n.y,{l:n.l,r:n.r,u:n.u,d:n.d}),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.Circle,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env.c;return e.env.c=new tt.Ellipse(n.x,n.y,n.l,n.r,n.u,n.d),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.L,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env,i=n.c;if(void 0!==i){var a,o,s=i.r+i.l,u=i.u+i.d;s<u?(a=(i.l-i.r)/2,o=(i.d-i.u)/2):(a=-i.r+u/2,o=(i.d-i.u)/2),n.c=n.c.shiftFrame(a,o),t=new pt.TranslateShape(a,o,t)}return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.R,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env,i=n.c;if(void 0!==i){var a,o,s=i.r+i.l,u=i.u+i.d;s<u?(a=(i.l-i.r)/2,o=(i.d-i.u)/2):(a=i.l-u/2,o=(i.d-i.u)/2),n.c=n.c.shiftFrame(a,o),t=new pt.TranslateShape(a,o,t)}return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.U,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env,i=n.c;if(void 0!==i){var a,o,s=i.r+i.l;s>i.u+i.d?(a=(i.l-i.r)/2,o=(i.d-i.u)/2):(a=(i.l-i.r)/2,o=i.d-s/2),n.c=n.c.shiftFrame(a,o),t=new pt.TranslateShape(a,o,t)}return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.D,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env,i=n.c;if(void 0!==i){var a,o,s=i.r+i.l;s>i.u+i.d?(a=(i.l-i.r)/2,o=(i.d-i.u)/2):(a=(i.l-i.r)/2,o=-i.u+s/2),n.c=n.c.shiftFrame(a,o),t=new pt.TranslateShape(a,o,t)}return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.C,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n,i,a=e.env,o=a.c;void 0!==o&&(n=(o.l-o.r)/2,i=(o.d-o.u)/2,a.c=a.c.shiftFrame(n,i),t=new pt.TranslateShape(n,i,t));return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.ChangeColor,{preprocess:function(e,t){},modifyShape:function(e,t,r){return t=this.proceedModifyShape(e,t,r),new pt.ChangeColorShape(this.colorName,t)}}),rr(ge.Modifier.Shape.Alphabets,{preprocess:function(t,r){var n=e.MathJax.xypic.repositories.modifierRepository.get(this.alphabets);if(void 0!==n)return n.preprocess(t,r)},modifyShape:function(t,r,n){var i=e.MathJax.xypic.repositories.modifierRepository.get(this.alphabets);if(void 0!==i)return i.modifyShape(t,r,n)}}),rr(ge.Modifier.Shape.DefineShape,{preprocess:function(t,r){var n=r.reverse();e.MathJax.xypic.repositories.modifierRepository.put(this.shape,new ge.Modifier.Shape.CompositeModifiers(n))},modifyShape:function(e,t,r){return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.CompositeModifiers,{preprocess:function(e,t){this.modifiers.foreach((function(r){r.preprocess(e,t),t=t.prepend(r)}))},modifyShape:function(e,t,r){return t=this.proceedModifyShape(e,t,this.modifiers),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Invisible,{preprocess:function(e,t){},modifyShape:function(e,t,r){return t=this.proceedModifyShape(e,t,r),pt.none}}),rr(ge.Modifier.Hidden,{preprocess:function(e,t){},modifyShape:function(e,t,r){return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Direction,{preprocess:function(e,t){e.env.angle=this.direction.angle(e)},modifyShape:function(e,t,r){return e.env.angle=this.direction.angle(e),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.AddOp,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env.c;return e.env.c=this.op.apply(this.size,n,e),e.appendShapeToFront(new pt.InvisibleBoxShape(e.env.c)),this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.AddOp.Grow,{apply:function(e,t,r){var n=r.env,i=e.isDefault?{x:2*n.objectmargin,y:2*n.objectmargin}:e.vector.xy(r),a=Math.abs(i.x/2),o=Math.abs(i.y/2);return t.grow(a,o)},applyToDimen:function(e,t){return e+t}}),rr(ge.Modifier.AddOp.Shrink,{apply:function(e,t,r){var n=r.env,i=e.isDefault?{x:2*n.objectmargin,y:2*n.objectmargin}:e.vector.xy(r),a=-Math.abs(i.x/2),o=-Math.abs(i.y/2);return t.grow(a,o)},applyToDimen:function(e,t){return e-t}}),rr(ge.Modifier.AddOp.Set,{apply:function(e,t,r){var n=r.env,i=e.isDefault?{x:n.objectwidth,y:n.objectheight}:e.vector.xy(r),a=Math.abs(i.x),o=Math.abs(i.y);return t.toSize(a,o)},applyToDimen:function(e,t){return t}}),rr(ge.Modifier.AddOp.GrowTo,{apply:function(e,t,r){var n=Math.max(t.l+t.r,t.u+t.d),i=e.isDefault?{x:n,y:n}:e.vector.xy(r),a=Math.abs(i.x),o=Math.abs(i.y);return t.growTo(a,o)},applyToDimen:function(e,t){return Math.max(Math.max(e,t),0)}}),rr(ge.Modifier.AddOp.ShrinkTo,{apply:function(e,t,r){var n=Math.min(t.l+t.r,t.u+t.d),i=e.isDefault?{x:n,y:n}:e.vector.xy(r),a=Math.abs(i.x),o=Math.abs(i.y);return t.shrinkTo(a,o)},applyToDimen:function(e,t){return Math.max(Math.min(e,t),0)}}),rr(ge.Modifier.Shape.Frame,{preprocess:function(e,t){},modifyShape:function(e,t,r){var n=e.env;if(void 0!==n.c){this.main;var i=new ge.ObjectBox.Frame.Radius.Default,a="currentColor";this.options.foreach((function(e){i=e.getRadius(i)})),this.options.foreach((function(e){a=e.getColorName(a)}));var o=n.duplicate(),s=new Jt(pt.none,o),u=new ge.ObjectBox.Frame(i,this.main).toDropFilledShape(s,a,n.c.isCircle());t=new pt.CompositeShape(t,u)}return this.proceedModifyShape(e,t,r)}}),rr(ge.Modifier.Shape.Frame.Radius,{getRadius:function(e){return new ge.ObjectBox.Frame.Radius.Vector(this.vector)},getColorName:function(e){return e}}),rr(ge.Modifier.Shape.Frame.Color,{getRadius:function(e){return e},getColorName:function(e){return this.colorName}}),rr(ge.Direction.Compound,{angle:function(e){var t=this.dir.angle(e);return this.rots.foreach((function(r){t=r.rotate(t,e)})),t}}),rr(ge.Direction.Diag,{angle:function(e){return this.diag.angle(e)}}),rr(ge.Direction.Vector,{angle:function(e){return this.vector.angle(e)}}),rr(ge.Direction.ConstructVector,{angle:function(e){var t=e.env,r=t.origin,n=t.xBase,i=t.yBase,a=t.p,o=t.c;this.posDecor.toShape(e);var s=Math.atan2(t.c.y-t.p.y,t.c.x-t.p.x);return t.c=o,t.p=a,t.origin=r,t.xBase=n,t.yBase=i,s}}),rr(ge.Direction.RotVector,{rotate:function(e,t){return e+this.vector.angle(t)}}),rr(ge.Direction.RotCW,{rotate:function(e,t){return e+Math.PI/2}}),rr(ge.Direction.RotAntiCW,{rotate:function(e,t){return e-Math.PI/2}}),rr(ge.Diag.Default,{isEmpty:!0,angle:function(e){return e.env.angle}}),rr(ge.Diag.Angle,{isEmpty:!1,angle:function(e){return this.ang}}),rr(ge.Decor,{toShape:function(e){this.commands.foreach((function(t){t.toShape(e)}))}}),rr(ge.Command.Save,{toShape:function(e){e.env.saveState(),this.pos.toShape(e)}}),rr(ge.Command.Restore,{toShape:function(e){e.env.restoreState()}}),rr(ge.Command.Pos,{toShape:function(e){this.pos.toShape(e)}}),rr(ge.Command.AfterPos,{toShape:function(e){this.pos.toShape(e),this.decor.toShape(e)}}),rr(ge.Command.Drop,{toShape:function(e){this.object.toDropShape(e)}}),rr(ge.Command.Connect,{toShape:function(e){this.object.toConnectShape(e)}}),rr(ge.Command.Relax,{toShape:function(e){}}),rr(ge.Command.Ignore,{toShape:function(e){}}),rr(ge.Command.ShowAST,{toShape:function(e){console.log(this.pos.toString()+" "+this.decor)}}),rr(ge.Command.Ar,{toShape:function(e){var t=e.env,r=t.origin,n=t.xBase,i=t.yBase,a=t.p,o=t.c;t.pathActionForBeforeSegment=b.empty,t.pathActionForAfterSegment=b.empty,t.labelsForNextSegmentOnly=b.empty,t.labelsForLastSegmentOnly=b.empty,t.labelsForEverySegment=b.empty,t.segmentSlideEm=b.empty,t.lastTurnDiag=b.empty,t.arrowVariant="",t.tailTip=new ge.Command.Ar.Form.Tip.Tipchars(""),t.headTip=new ge.Command.Ar.Form.Tip.Tipchars(">"),t.stemConn=new ge.Command.Ar.Form.Conn.Connchars("-"),t.reverseAboveAndBelow=!1,t.arrowObjectModifiers=B.empty,this.forms.foreach((function(t){t.toShape(e)})),t.pathActionForBeforeSegment.isDefined||(t.pathActionForBeforeSegment=new b.Some(new ge.PosDecor(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.ConnectObject(new ge.Object(t.arrowObjectModifiers,t.stemConn.getObject(e))))),new ge.Decor(B.empty)))),t.labelsForNextSegmentOnly=new b.Some(new ge.Command.Path.Labels(B.empty.append(new ge.Command.Path.Label.At(new ge.Pos.Place(new ge.Place(1,1,new ge.Place.Factor(0),new ge.Slide(b.empty))),t.tailTip.getObject(e),b.empty)))),t.labelsForLastSegmentOnly=new b.Some(new ge.Command.Path.Labels(B.empty.append(new ge.Command.Path.Label.At(new ge.Pos.Place(new ge.Place(1,1,new ge.Place.Factor(1),new ge.Slide(b.empty))),t.headTip.getObject(e),b.empty)))),this.path.toShape(e),t.c=o,t.p=a,t.origin=r,t.xBase=n,t.yBase=i}}),rr(ge.Command.Ar.Form.BuildArrow,{toShape:function(e){var t=e.env;t.arrowVariant=this.variant,t.tailTip=this.tailTip,t.stemConn=this.stemConn,t.headTip=this.headTip}}),rr(ge.Command.Ar.Form.ChangeVariant,{toShape:function(e){e.env.arrowVariant=this.variant}}),rr(ge.Command.Ar.Form.ChangeStem,{toShape:function(e){e.env.stemConn=new ge.Command.Ar.Form.Conn.Connchars(this.connchar)}}),rr(ge.Command.Ar.Form.DashArrowStem,{toShape:function(e){}}),rr(ge.Command.Ar.Form.CurveArrow,{toShape:function(t){var r=t.env,n=e.MathJax.xypic.measure.em2length(2*e.MathJax.xypic.measure.length2em(this.dist));r.pathActionForBeforeSegment=new b.Some(new ge.PosDecor(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.ConnectObject(new ge.Object(r.arrowObjectModifiers,new ge.ObjectBox.Curve(B.empty,B.empty.append(new ge.ObjectBox.Curve.Object.Connect(r.stemConn.getObject(t))),B.empty.append(new ge.ObjectBox.Curve.PosList.Pos(new ge.Pos.Coord(new ge.Coord.Group(new ge.PosDecor(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.ConnectObject(new ge.Object(B.empty,new ge.ObjectBox.Dir("","")))).append(new ge.Pos.Place(new ge.Place(0,0,void 0,new ge.Slide(b.empty)))).append(new ge.Pos.Plus(new ge.Coord.Vector(new ge.Vector.Dir(this.direction,n))))),new ge.Decor(B.empty))),B.empty)))))))),new ge.Decor(B.empty)))}}),rr(ge.Command.Ar.Form.CurveFitToDirection,{toShape:function(e){var t=e.env;t.pathActionForBeforeSegment=new b.Some(new ge.PosDecor(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.ConnectObject(new ge.Object(t.arrowObjectModifiers,new ge.ObjectBox.Curve(B.empty,B.empty.append(new ge.ObjectBox.Curve.Object.Connect(t.stemConn.getObject(e))),B.empty.append(new ge.ObjectBox.Curve.PosList.Pos(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.SwapPAndC(new ge.Coord.C)).append(new ge.Pos.Plus(new ge.Coord.Vector(new ge.Vector.Dir(this.outDirection,"3pc"))))))).append(new ge.ObjectBox.Curve.PosList.Pos(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.SwapPAndC(new ge.Coord.C)).append(new ge.Pos.Plus(new ge.Coord.Vector(new ge.Vector.Dir(this.inDirection,"3pc")))))))))))),new ge.Decor(B.empty)))}}),rr(ge.Command.Ar.Form.CurveWithControlPoints,{toShape:function(e){var t=e.env,r=t.duplicate();r.startCapturePositions();var n=new Jt(pt.none,r);this.coord.position(n);var i=r.endCapturePositions();i=i.append(r.c);var a=B.empty;i.reverse().foreach((function(e){var r=t.inverseAbsVector(e.x,e.y);a=a.prepend(new ge.ObjectBox.Curve.PosList.Pos(new ge.Pos.Coord(new ge.Coord.Vector(new ge.Vector.InCurBase(r.x,r.y)),B.empty)))})),t.pathActionForBeforeSegment=new b.Some(new ge.PosDecor(new ge.Pos.Coord(new ge.Coord.C,B.empty.append(new ge.Pos.ConnectObject(new ge.Object(t.arrowObjectModifiers,new ge.ObjectBox.Curve(B.empty,B.empty.append(new ge.ObjectBox.Curve.Object.Connect(t.stemConn.getObject(e))),a))))),new ge.Decor(B.empty)))}}),rr(ge.Command.Ar.Form.AddShape,{toShape:function(e){e.env.arrowObjectModifiers=B.empty.append(this.shape)}}),rr(ge.Command.Ar.Form.AddModifiers,{toShape:function(e){e.env.arrowObjectModifiers=this.modifiers}}),rr(ge.Command.Ar.Form.Slide,{toShape:function(t){t.env.segmentSlideEm=new b.Some(e.MathJax.xypic.measure.length2em(this.slideDimen))}}),rr(ge.Command.Ar.Form.LabelAt,{toShape:function(e){e.env.labelsForEverySegment=new b.Some(new ge.Command.Path.Labels(B.empty.append(new ge.Command.Path.Label.At(new ge.Pos.Place(this.anchor),this.it,b.empty))))}}),rr(ge.Command.Ar.Form.LabelAbove,{toShape:function(e){var t,r=e.env;t=r.reverseAboveAndBelow?new ge.Command.Path.Label.Below(new ge.Pos.Place(this.anchor),this.it,b.empty):new ge.Command.Path.Label.Above(new ge.Pos.Place(this.anchor),this.it,b.empty),r.labelsForEverySegment=new b.Some(new ge.Command.Path.Labels(B.empty.append(t)))}}),rr(ge.Command.Ar.Form.LabelBelow,{toShape:function(e){var t,r=e.env;t=r.reverseAboveAndBelow?new ge.Command.Path.Label.Above(new ge.Pos.Place(this.anchor),this.it,b.empty):new ge.Command.Path.Label.Below(new ge.Pos.Place(this.anchor),this.it,b.empty),r.labelsForEverySegment=new b.Some(new ge.Command.Path.Labels(B.empty.append(t)))}}),rr(ge.Command.Ar.Form.ReverseAboveAndBelow,{toShape:function(e){e.env.reverseAboveAndBelow=!0}}),rr(ge.Command.Ar.Form.Conn.Connchars,{getObject:function(e){var t=e.env,r=new ge.ObjectBox.Dir(t.arrowVariant,this.connchars);return new ge.Object(t.arrowObjectModifiers,r)}}),rr(ge.Command.Ar.Form.Conn.Object,{getObject:function(e){var t=e.env.arrowObjectModifiers.concat(this.object.modifiers);return new ge.Object(t,this.object.object)}}),rr(ge.Command.Ar.Form.Conn.Dir,{getObject:function(e){var t=e.env,r=this.dir,n=r;return""===r.variant&&""!==t.arrowVariant&&(n=new ge.ObjectBox.Dir(t.arrowVariant,r.main)),new ge.Object(t.arrowObjectModifiers,n)}}),rr(ge.Command.Ar.Form.Tip.Tipchars,{getObject:function(e){var t=e.env,r=new ge.ObjectBox.Dir(t.arrowVariant,this.tipchars);return new ge.Object(t.arrowObjectModifiers,r)}}),rr(ge.Command.Ar.Form.Tip.Object,{getObject:function(e){var t=e.env.arrowObjectModifiers.concat(this.object.modifiers);return new ge.Object(t,this.object.object)}}),rr(ge.Command.Ar.Form.Tip.Dir,{getObject:function(e){var t=e.env,r=this.dir,n=r;return""===r.variant&&""!==t.arrowVariant&&(n=new ge.ObjectBox.Dir(t.arrowVariant,r.main)),new ge.Object(t.arrowObjectModifiers,n)}}),rr(ge.Command.Path,{toShape:function(e){var t=e.env,r=t.origin,n=t.xBase,i=t.yBase,a=t.p,o=t.c;t.pathActionForBeforeSegment=b.empty,t.pathActionForAfterSegment=b.empty,t.labelsForNextSegmentOnly=b.empty,t.labelsForLastSegmentOnly=b.empty,t.labelsForEverySegment=b.empty,t.segmentSlideEm=b.empty,t.lastTurnDiag=b.empty,this.path.toShape(e),t.c=o,t.p=a,t.origin=r,t.xBase=n,t.yBase=i}}),rr(ge.Command.AfterPath,{toShape:function(e){this.path.toShape(e),this.decor.toShape(e)}}),rr(ge.Command.Path.Path,{toShape:function(e){this.pathElements.foreach((function(t){t.toShape(e)}))}}),rr(ge.Command.Path.SetBeforeAction,{toShape:function(e){e.env.pathActionForBeforeSegment=new b.Some(this.posDecor)}}),rr(ge.Command.Path.SetAfterAction,{toShape:function(e){e.env.pathActionForAfterSegment=new b.Some(this.posDecor)}}),rr(ge.Command.Path.AddLabelNextSegmentOnly,{toShape:function(e){e.env.labelsForNextSegmentOnly=new b.Some(this.labels)}}),rr(ge.Command.Path.AddLabelLastSegmentOnly,{toShape:function(e){e.env.labelsForLastSegmentOnly=new b.Some(this.labels)}}),rr(ge.Command.Path.AddLabelEverySegment,{toShape:function(e){e.env.labelsForEverySegment=new b.Some(this.labels)}}),rr(ge.Command.Path.StraightSegment,{toShape:function(e){var t=e.env;this.segment.setupPositions(e);var r=t.c;t.pathActionForBeforeSegment.foreach((function(t){t.toShape(e)})),t.labelsForNextSegmentOnly.foreach((function(r){r.toShape(e),t.labelsForNextSegmentOnly=b.empty})),t.labelsForEverySegment.foreach((function(t){t.toShape(e)})),t.c=r,t.pathActionForAfterSegment.foreach((function(t){t.toShape(e)})),this.segment.toLabelsShape(e)}}),rr(ge.Command.Path.LastSegment,{toShape:function(e){var t=e.env;this.segment.setupPositions(e);var r=t.c;t.pathActionForBeforeSegment.foreach((function(t){t.toShape(e)})),t.labelsForNextSegmentOnly.foreach((function(r){r.toShape(e),t.labelsForNextSegmentOnly=b.empty})),t.labelsForLastSegmentOnly.foreach((function(r){r.toShape(e),t.labelsForNextSegmentOnly=b.empty})),t.labelsForEverySegment.foreach((function(t){t.toShape(e)})),t.c=r,t.pathActionForAfterSegment.foreach((function(t){t.toShape(e)})),this.segment.toLabelsShape(e)}}),rr(ge.Command.Path.TurningSegment,{toShape:function(t){var r=t.env,n=r.c;this.segment.pos.toShape(t),r.p=n;var i=this.turn.explicitizedCircle(t),a=this.turn.radius.radius(t);r.lastTurnDiag=new b.Some(i.endDiag);var o=i.startVector(t),s=i.endVector(t),u=r.segmentSlideEm.getOrElse(0);this.segment.slide.dimen.foreach((function(t){u=e.MathJax.xypic.measure.length2em(t),r.segmentSlideEm=new b.Some(u)})),0!==u&&(r.p=r.p.move(r.p.x-u*o.y,r.p.y+u*o.x),r.c=r.c.move(r.c.x-u*s.y,r.c.y+u*s.x),a="^"===i.orient?Math.max(0,a-u):Math.max(0,a+u));var c,h=r.p.edgePoint(r.p.x+o.x,r.p.y+o.y),l=r.c,f=i.relativeStartPoint(t,a),d=i.relativeEndPoint(t,a),m=i.relativeEndPoint(t,a+("^"===i.orient?u:-u)),y=o.x*s.y-o.y*s.x;if(Math.abs(y)<p.machinePrecision)c=0;else{var x=l.x-h.x+f.x-d.x,v=l.y-h.y+f.y-d.y;(c=(s.y*x-s.x*v)/y)<0&&(c=0)}var g=h.x-f.x+c*o.x,M=h.y-f.y+c*o.y,w=(i.toDropShape(t,g,M,a),new tt.Point(g+m.x,M+m.y));r.c=new tt.Point(g+f.x,M+f.y),r.pathActionForBeforeSegment.foreach((function(e){e.toShape(t)})),r.labelsForNextSegmentOnly.foreach((function(e){e.toShape(t),r.labelsForNextSegmentOnly=b.empty})),r.labelsForEverySegment.foreach((function(e){e.toShape(t)})),r.c=w,r.pathActionForAfterSegment.foreach((function(e){e.toShape(t)})),this.segment.toLabelsShape(t)}}),rr(ge.Command.Path.Turn.Cir,{explicitizedCircle:function(e){var t,r,n,i=e.env;return t=this.cir.startDiag.isEmpty?i.lastTurnDiag.getOrElse(new ge.Diag.R):this.cir.startDiag,r=this.cir.orient,n=this.cir.endDiag.isEmpty?t.turn(r):this.cir.endDiag,new ge.ObjectBox.Cir.Cir.Segment(t,r,n)}}),rr(ge.ObjectBox.Cir.Cir.Segment,{startVector:function(e){var t=this.startDiag.angle(e);return{x:Math.cos(t),y:Math.sin(t)}},endVector:function(e){var t=this.endDiag.angle(e);return{x:Math.cos(t),y:Math.sin(t)}},relativeStartPointAngle:function(e){return this.startPointDegree(e)/180*Math.PI},relativeStartPoint:function(e,t){var r=this.startPointDegree(e)/180*Math.PI;return{x:t*Math.cos(r),y:t*Math.sin(r)}},relativeEndPoint:function(e,t){var r;return r=this.endPointDegree(e,this.relativeStartPointAngle(e))/180*Math.PI,{x:t*Math.cos(r),y:t*Math.sin(r)}}}),rr(ge.Command.Path.Turn.Diag,{explicitizedCircle:function(e){var t,r,n,i=e.env,a=(t=this.diag.isEmpty?i.lastTurnDiag.getOrElse(new ge.Diag.R):this.diag).angle(e);return r=(i.c.x-i.p.x)*Math.sin(a)-(i.c.y-i.p.y)*Math.cos(a)<0?"^":"_",n=t.turn(r),new ge.ObjectBox.Cir.Cir.Segment(t,r,n)}}),rr(ge.Command.Path.TurnRadius.Default,{radius:function(t){return e.MathJax.xypic.measure.turnradius}}),rr(ge.Command.Path.TurnRadius.Dimen,{radius:function(t){return e.MathJax.xypic.measure.length2em(this.dimen)}}),rr(ge.Command.Path.Segment,{setupPositions:function(t){var r=t.env;r.p=r.c,this.pos.toShape(t);var n=r.p,i=r.c,a=i.x-n.x,o=i.y-n.y,s=Math.atan2(o,a)+Math.PI/2,u=r.segmentSlideEm.getOrElse(0);this.slide.dimen.foreach((function(t){u=e.MathJax.xypic.measure.length2em(t),r.segmentSlideEm=new b.Some(u)})),0!==u&&(n=n.move(n.x+u*Math.cos(s),n.y+u*Math.sin(s)),i=i.move(i.x+u*Math.cos(s),i.y+u*Math.sin(s))),r.p=n,r.c=i},toLabelsShape:function(e){var t=e.env,r=t.c,n=t.p;this.labels.toShape(e),t.c=r,t.p=n}}),rr(ge.Command.Path.Labels,{toShape:function(e){this.labels.foreach((function(t){t.toShape(e)}))}}),rr(ge.Command.Path.Label,{toShape:function(e){var t=e.env,r=t.p,n=t.c,i=this.anchor.toShape(e),a=this.getLabelMargin(e);if(0!==a){var o;o=(M=t.lastCurve).isNone?Math.atan2(n.y-r.y,n.x-r.x)+Math.PI/2:M.angle(i)+Math.PI/2+(a>0?0:Math.PI);n=t.c;var s=new Jt(pt.none,t);this.it.toDropShape(s);var u=s.shape,c=u.getBoundingBox();if(void 0!==c){var h=c.x-n.x,l=c.y-n.y,p=c.l,f=c.r,d=c.u,m=c.d,y=Math.cos(o),x=Math.sin(o),v=Math.min((h-p)*y+(l-m)*x,(h-p)*y+(l+d)*x,(h+f)*y+(l-m)*x,(h+f)*y+(l+d)*x),g=Math.abs(a)-v;t.c=t.c.move(n.x+g*y,n.y+g*x),e.appendShapeToFront(new pt.TranslateShape(g*y,g*x,u))}}else this.it.toDropShape(e);var M=t.lastCurve;this.shouldSliceHole&&M.isDefined&&void 0!==i&&M.sliceHole(t.c,i),this.aliasOption.foreach((function(e){t.savePos(e,new Yt.Position(t.c))}))}}),rr(ge.Command.Path.Label.Above,{getLabelMargin:function(e){return e.env.labelmargin},shouldSliceHole:!1}),rr(ge.Command.Path.Label.Below,{getLabelMargin:function(e){return-e.env.labelmargin},shouldSliceHole:!1}),rr(ge.Command.Path.Label.At,{getLabelMargin:function(e){return 0},shouldSliceHole:!0}),rr(ge.Command.Xymatrix,{toShape:function(t){var r=t.env;if(void 0===r.c)return pt.none;var n=r.duplicate(),i=new Jt(pt.none,n);n.xymatrixPrefix="",n.xymatrixRowSepEm=e.MathJax.xypic.measure.length2em("2pc"),n.xymatrixColSepEm=e.MathJax.xypic.measure.length2em("2pc"),n.xymatrixPretendEntryHeight=b.empty,n.xymatrixPretendEntryWidth=b.empty,n.xymatrixFixedRow=!1,n.xymatrixFixedCol=!1,n.xymatrixOrientationAngle=0,n.xymatrixEntryModifiers=B.empty,this.setup.foreach((function(e){e.toShape(i)}));var a,o,s=n.xymatrixOrientationAngle,u=0,c=0,h=new nr(this.rows.map((function(e){c+=1,o=0;var t=new nr.Row(e.entries.map((function(e){o+=1;var t=n.duplicate();t.origin={x:0,y:0},t.p=t.c=zt.originPosition,t.angle=0,t.lastCurve=Ut.none,t.xymatrixRow=c,t.xymatrixCol=o;var r,i,a,s,u=new Jt(pt.none,t),h=e.toShape(u),l=t.c;if(n.xymatrixPretendEntryHeight.isDefined){var p=n.xymatrixPretendEntryHeight.get;a=p/2,s=p/2}else a=l.u,s=l.d;if(n.xymatrixPretendEntryWidth.isDefined){var f=n.xymatrixPretendEntryWidth.get;r=f/2,i=f/2}else r=l.l,i=l.r;var d=new tt.Rect(0,0,{l:r,r:i,u:a,d:s});return new nr.Entry(t.c,h,e.decor,d)})),s);return u=Math.max(u,o),t})),s);if(0===(a=c))return pt.none;h.rows.foreach((function(e){o=0,e.entries.foreach((function(e){o+=1,h.getColumn(o).addEntry(e)}))}));var l,p,f=n.xymatrixColSepEm,d=[],m=r.c.x;if(d.push(m),n.xymatrixFixedCol){var y=0,x=0;h.columns.foreach((function(e){y=Math.max(y,e.getL()),x=Math.max(x,e.getR())})),h.columns.tail.foreach((function(e){m=m+x+f+y,d.push(m)})),l=y,p=d[d.length-1]+x}else{var v=h.columns.head;h.columns.tail.foreach((function(e){m=m+v.getR()+f+e.getL(),d.push(m),v=e})),l=h.columns.head.getL(),p=m+h.columns.at(u-1).getR()-d[0]}var g,M,w=n.xymatrixRowSepEm,S=[],O=r.c.y;if(S.push(O),n.xymatrixFixedRow){var C=0,E=0;h.rows.foreach((function(e){C=Math.max(C,e.getU()),E=Math.max(E,e.getD())})),h.rows.tail.foreach((function(e){O-=E+w+C,S.push(O)})),g=C,M=S[0]-S[S.length-1]+E}else{var k=h.rows.head;h.rows.tail.foreach((function(e){O-=k.getD()+w+e.getU(),S.push(O),k=e})),g=h.rows.head.getU(),M=S[0]-O+h.rows.at(a-1).getD()}r.c=new tt.Rect(r.c.x,r.c.y,{l,r:p,u:g,d:M});var L=n.xymatrixPrefix,P=Math.cos(s),R=Math.sin(s),A=0;h.rows.foreach((function(e){var t=0;e.entries.foreach((function(e){var r=d[t],i=S[A],a=r*P-i*R,o=r*R+i*P,s=t+1,u=A+1,c=new Yt.Position(e.c.move(a,o));n.savePos(u+","+s,c),n.savePos(L+u+","+s,c),t+=1})),A+=1})),i=new Jt(pt.none,n);A=0;h.rows.foreach((function(e){var t=0;e.entries.foreach((function(e){var r=d[t],a=S[A],o=r*P-a*R,s=r*R+a*P,u=t+1,c=A+1,h=new pt.TranslateShape(o,s,e.objectShape);i.appendShapeToFront(h),n.c=e.c.move(o,s),n.xymatrixRow=c,n.xymatrixCol=u,e.decor.toShape(i),t+=1})),A+=1}));var T=i.shape;return t.appendShapeToFront(T),r.savedPosition=n.savedPosition,T}});var nr=function(){function e(t,r){Zt(this,e),this.rows=t,this.columns=B.empty,this.orientation=r}return tr(e,[{key:"getColumn",value:function(t){if(this.columns.length()>=t)return this.columns.at(t-1);var r=new e.Column(this.orientation);return this.columns=this.columns.append(r),r}},{key:"toString",value:function(){return"Xymatrix{\n"+this.rows.mkString("\\\\\n")+"\n}"}}]),e}();function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return or(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cr(e,t,r){return t&&ur(e.prototype,t),r&&ur(e,r),e}function hr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dr(e);if(t){var i=dr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fr(this,r)}}function fr(e,t){return!t||"object"!==ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}nr.Row=function(){function e(t,r){Zt(this,e),this.entries=t,this.orientation=r,He(this,"getU"),He(this,"getD")}return tr(e,[{key:"getU",value:function(){var e=this.orientation,t=0;return this.entries.foreach((function(r){t=Math.max(t,r.getU(e))})),t}},{key:"getD",value:function(){var e=this.orientation,t=0;return this.entries.foreach((function(r){t=Math.max(t,r.getD(e))})),t}},{key:"toString",value:function(){return this.entries.mkString(" & ")}}]),e}(),nr.Column=function(){function e(t){Zt(this,e),this.entries=B.empty,this.orientation=t,He(this,"getL"),He(this,"getR")}return tr(e,[{key:"addEntry",value:function(e){this.entries=this.entries.append(e),this.getL.reset,this.getR.reset}},{key:"getL",value:function(){var e=this.orientation,t=0;return this.entries.foreach((function(r){t=Math.max(t,r.getL(e))})),t}},{key:"getR",value:function(){var e=this.orientation,t=0;return this.entries.foreach((function(r){t=Math.max(t,r.getR(e))})),t}},{key:"toString",value:function(){return this.entries.mkString(" \\\\ ")}}]),e}(),nr.Entry=function(){function e(t,r,n,i){Zt(this,e),this.c=t,this.objectShape=r,this.decor=n,this.frame=i}return tr(e,[{key:"getDistanceToEdgePoint",value:function(e,t){var r=e.edgePoint(e.x+Math.cos(t),e.y+Math.sin(t)),n=r.x-e.x,i=r.y-e.y;return Math.sqrt(n*n+i*i)}},{key:"getU",value:function(e){return 0===e?this.frame.u:this.getDistanceToEdgePoint(this.frame,e+Math.PI/2)}},{key:"getD",value:function(e){return 0===e?this.frame.d:this.getDistanceToEdgePoint(this.frame,e-Math.PI/2)}},{key:"getL",value:function(e){return 0===e?this.frame.l:this.getDistanceToEdgePoint(this.frame,e+Math.PI)}},{key:"getR",value:function(e){return 0===e?this.frame.r:this.getDistanceToEdgePoint(this.frame,e)}},{key:"toString",value:function(){return this.objectShape.toString()+" "+this.decor}}]),e}(),rr(ge.Command.Xymatrix.Setup.Prefix,{toShape:function(e){e.env.xymatrixPrefix=this.prefix}}),rr(ge.Command.Xymatrix.Setup.ChangeSpacing.Row,{toShape:function(t){var r=t.env;r.xymatrixRowSepEm=this.addop.applyToDimen(r.xymatrixRowSepEm,e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.ChangeSpacing.Column,{toShape:function(t){var r=t.env;r.xymatrixColSepEm=this.addop.applyToDimen(r.xymatrixColSepEm,e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.ChangeSpacing.RowAndColumn,{toShape:function(t){var r=t.env,n=this.addop.applyToDimen(r.xymatrixRowSepEm,e.MathJax.xypic.measure.length2em(this.dimen));r.xymatrixRowSepEm=n,r.xymatrixColSepEm=n}}),rr(ge.Command.Xymatrix.Setup.PretendEntrySize.Height,{toShape:function(t){t.env.xymatrixPretendEntryHeight=new b.Some(e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.PretendEntrySize.Width,{toShape:function(t){t.env.xymatrixPretendEntryWidth=new b.Some(e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.PretendEntrySize.HeightAndWidth,{toShape:function(t){var r=new b.Some(e.MathJax.xypic.measure.length2em(this.dimen));t.env.xymatrixPretendEntryHeight=r,t.env.xymatrixPretendEntryWidth=r}}),rr(ge.Command.Xymatrix.Setup.FixGrid.Row,{toShape:function(e){e.env.xymatrixFixedRow=!0}}),rr(ge.Command.Xymatrix.Setup.FixGrid.Column,{toShape:function(e){e.env.xymatrixFixedCol=!0}}),rr(ge.Command.Xymatrix.Setup.FixGrid.RowAndColumn,{toShape:function(e){e.env.xymatrixFixedRow=!0,e.env.xymatrixFixedCol=!0}}),rr(ge.Command.Xymatrix.Setup.AdjustEntrySize.Margin,{toShape:function(t){var r=t.env;r.objectmargin=this.addop.applyToDimen(r.objectmargin,e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.AdjustEntrySize.Width,{toShape:function(t){var r=t.env;r.objectwidth=this.addop.applyToDimen(r.objectwidth,e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.AdjustEntrySize.Height,{toShape:function(t){var r=t.env;r.objectheight=this.addop.applyToDimen(r.objectheight,e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.AdjustLabelSep,{toShape:function(t){var r=t.env;r.labelmargin=this.addop.applyToDimen(r.labelmargin,e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Xymatrix.Setup.SetOrientation,{toShape:function(e){e.env.xymatrixOrientationAngle=this.direction.angle(e)}}),rr(ge.Command.Xymatrix.Setup.AddModifier,{toShape:function(e){var t=e.env;t.xymatrixEntryModifiers=t.xymatrixEntryModifiers.prepend(this.modifier)}}),rr(ge.Command.Xymatrix.Entry.SimpleEntry,{toShape:function(t){var r=t.env,n=e.MathJax.xypic.measure.em2length(r.objectmargin+r.objectwidth),i=e.MathJax.xypic.measure.em2length(r.objectmargin+r.objectheight),a=new ge.Modifier.AddOp(new ge.Modifier.AddOp.GrowTo,new ge.Modifier.AddOp.VactorSize(new ge.Vector.Abs(n,i))),o=e.MathJax.xypic.measure.em2length(r.objectmargin),s=new ge.Modifier.AddOp(new ge.Modifier.AddOp.Grow,new ge.Modifier.AddOp.VactorSize(new ge.Vector.Abs(o,o))),u=this.modifiers.concat(r.xymatrixEntryModifiers).prepend(a).prepend(s);return new ge.Object(u,this.objectbox).toDropShape(t)}}),rr(ge.Command.Xymatrix.Entry.EmptyEntry,{toShape:function(t){var r=t.env,n=e.MathJax.xypic.measure.em2length(r.objectmargin+r.objectwidth),i=e.MathJax.xypic.measure.em2length(r.objectmargin+r.objectheight),a=new ge.Modifier.AddOp(new ge.Modifier.AddOp.GrowTo,new ge.Modifier.AddOp.VactorSize(new ge.Vector.Abs(n,i))),o=e.MathJax.xypic.measure.em2length(r.objectmargin),s=new ge.Modifier.AddOp(new ge.Modifier.AddOp.Grow,new ge.Modifier.AddOp.VactorSize(new ge.Vector.Abs(o,o))),u=r.xymatrixEntryModifiers.prepend(a).prepend(s);return new ge.Object(u,new ge.ObjectBox.Empty).toDropShape(t)}}),rr(ge.Command.Xymatrix.Entry.ObjectEntry,{toShape:function(e){return this.object.toDropShape(e)}}),rr(ge.Command.Twocell,{toShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;var r=t.duplicate(),n=new Jt(pt.none,r);r.twocellmodmapobject=t.twocellmodmapobject||new ge.Object(B.empty,new ge.ObjectBox.Dir("","|")),r.twocellhead=t.twocellhead||new ge.Object(B.empty,new ge.ObjectBox.Dir("",">")),r.twocelltail=t.twocelltail||new ge.Object(B.empty,new ge.ObjectBox.Dir("","")),r.twocellarrowobject=t.twocellarrowobject||new ge.Object(B.empty,new ge.ObjectBox.Dir("","=>")),r.twocellUpperCurveObjectSpacer=t.twocellUpperCurveObjectSpacer,r.twocellUpperCurveObject=t.twocellUpperCurveObject,r.twocellLowerCurveObjectSpacer=t.twocellLowerCurveObjectSpacer,r.twocellLowerCurveObject=t.twocellLowerCurveObject,r.twocellUpperLabel=b.empty,r.twocellLowerLabel=b.empty,r.twocellCurvatureEm=b.empty,r.twocellShouldDrawCurve=!0,r.twocellShouldDrawModMap=!1,this.switches.foreach((function(e){e.setup(n)})),this.twocell.toShape(n,this.arrow),e.appendShapeToFront(n.shape)}}),rr(ge.Command.Twocell.Hops2cell,{toShape:function(e,t){var r=e.env,n=r.c,i=r.angle,a=r.c,o=this.targetPosition(e);if(void 0!==a&&void 0!==o){var s=o.x-a.x,u=o.y-a.y;if(0!==s||0!==u){var c=new tt.Point(a.x+.5*s,a.y+.5*u),h=Math.atan2(u,s),l=h+Math.PI/2,p=r.twocellCurvatureEm.getOrElse(this.getDefaultCurvature()),f=Math.cos(l),d=Math.sin(l),m=this.getUpperControlPoint(a,o,c,p,f,d),y=this.getLowerControlPoint(a,o,c,p,f,d);if(r.twocellShouldDrawCurve){var x,v;if(v=void 0===(x=r.twocellUpperCurveObjectSpacer)?new ge.Object(B.empty,new ge.ObjectBox.Dir("","-")):void 0!==r.twocellUpperCurveObject?r.twocellUpperCurveObject.getOrElse(void 0):void 0,this.toUpperCurveShape(e,a,m,o,x,v),r.lastCurve.isDefined){r.angle=h;var g=this.getUpperLabelPosition(a,o,c,p,f,d),M=this.getUpperLabelAngle(l,a,o,c,p,f,d);r.twocellUpperLabel.foreach((function(t){t.toShape(e,g,Math.cos(M),Math.sin(M),h)})),this.hasUpperTips&&t.toUpperTipsShape(e)}if(v=void 0===(x=r.twocellLowerCurveObjectSpacer)?new ge.Object(B.empty,new ge.ObjectBox.Dir("","-")):void 0!==r.twocellLowerCurveObject?r.twocellLowerCurveObject.getOrElse(void 0):void 0,this.toLowerCurveShape(e,a,y,o,x,v),r.lastCurve.isDefined){r.angle=h;var w=this.getLowerLabelPosition(a,o,c,p,f,d),b=this.getLowerLabelAngle(l,a,o,c,p,f,d);r.twocellLowerLabel.foreach((function(t){t.toShape(e,w,Math.cos(b),Math.sin(b),h)})),this.hasLowerTips&&t.toLowerTipsShape(e)}}r.c=this.getDefaultArrowPoint(a,o,c,p,f,d),r.angle=l+Math.PI;var S=c;t.toArrowShape(e,S),r.c=n,r.angle=i}}},_toCurveShape:function(e,t,r,n,i,a){var o=e.env,s=new Wt.QuadBezier(t,r,n),u=s.tOfShavedStart(t),c=s.tOfShavedEnd(n);if(void 0===u||void 0===c||u>=c)o.lastCurve=Ut.none;else{var h=s.toShape(e,i,a);o.lastCurve=new Ut.QuadBezier(s,u,c,h)}},targetPosition:function(e){var t=e.env,r=t.xymatrixRow,n=t.xymatrixCol;if(void 0===r||void 0===n)throw new TeXError("ExecutionError","rows and columns not found for hops ["+this.hops+"]");for(var i=0;i<this.hops.length;i++)switch(this.hops[i]){case"u":r-=1;break;case"d":r+=1;break;case"l":n-=1;break;case"r":n+=1}var a=r+","+n;return e.env.lookupPos(a,'in entry "'+t.xymatrixRow+","+t.xymatrixCol+'": No '+this+" (is "+a+") from here.").position(e)}}),rr(ge.Command.Twocell.Twocell,{getUpperControlPoint:function(e,t,r,n,i,a){return new tt.Point(r.x+n*i,r.y+n*a)},getLowerControlPoint:function(e,t,r,n,i,a){return new tt.Point(r.x-n*i,r.y-n*a)},getUpperLabelPosition:function(e,t,r,n,i,a){return new tt.Point(r.x+.5*n*i,r.y+.5*n*a)},getLowerLabelPosition:function(e,t,r,n,i,a){return new tt.Point(r.x-.5*n*i,r.y-.5*n*a)},getUpperLabelAngle:function(e,t,r,n,i,a,o){return e+(i<0?Math.PI:0)},getLowerLabelAngle:function(e,t,r,n,i,a,o){return e+(i<0?0:Math.PI)},getDefaultArrowPoint:function(e,t,r,n,i,a){return r},toUpperCurveShape:function(e,t,r,n,i,a){this._toCurveShape(e,t,r,n,i,a)},toLowerCurveShape:function(e,t,r,n,i,a){this._toCurveShape(e,t,r,n,i,a)},getDefaultCurvature:function(){return 3.5*e.MathJax.xypic.measure.lineElementLength},hasUpperTips:!0,hasLowerTips:!0}),rr(ge.Command.Twocell.UpperTwocell,{getUpperControlPoint:function(e,t,r,n,i,a){return new tt.Point(r.x+n*i,r.y+n*a)},getLowerControlPoint:function(e,t,r,n,i,a){return r},getUpperLabelPosition:function(e,t,r,n,i,a){return new tt.Point(r.x+.5*n*i,r.y+.5*n*a)},getLowerLabelPosition:function(e,t,r,n,i,a){return r},getUpperLabelAngle:function(e,t,r,n,i,a,o){return e+(i<0?Math.PI:0)},getLowerLabelAngle:function(e,t,r,n,i,a,o){return e+(i<0?0:Math.PI)},getDefaultArrowPoint:function(e,t,r,n,i,a){return new tt.Point(r.x+.25*n*i,r.y+.25*n*a)},toUpperCurveShape:function(e,t,r,n,i,a){this._toCurveShape(e,t,r,n,i,a)},toLowerCurveShape:function(e,t,r,n,i,a){var o=t.edgePoint(n.x,n.y),s=n.edgePoint(t.x,t.y);o.x!==s.x||o.y!==s.y?e.env.lastCurve=new Ut.Line(o,s,t,n,void 0):e.env.lastCurve=Ut.none},getDefaultCurvature:function(){return 7*e.MathJax.xypic.measure.lineElementLength},hasUpperTips:!0,hasLowerTips:!1}),rr(ge.Command.Twocell.LowerTwocell,{getUpperControlPoint:function(e,t,r,n,i,a){return r},getLowerControlPoint:function(e,t,r,n,i,a){return new tt.Point(r.x+n*i,r.y+n*a)},getUpperLabelPosition:function(e,t,r,n,i,a){return r},getLowerLabelPosition:function(e,t,r,n,i,a){return new tt.Point(r.x+.5*n*i,r.y+.5*n*a)},getUpperLabelAngle:function(e,t,r,n,i,a,o){return e+(i<0?0:Math.PI)},getLowerLabelAngle:function(e,t,r,n,i,a,o){return e+(i<0?Math.PI:0)},getDefaultArrowPoint:function(e,t,r,n,i,a){return new tt.Point(r.x+.25*n*i,r.y+.25*n*a)},toUpperCurveShape:function(e,t,r,n,i,a){var o=t.edgePoint(n.x,n.y),s=n.edgePoint(t.x,t.y);o.x!==s.x||o.y!==s.y?e.env.lastCurve=new Ut.Line(o,s,t,n,void 0):e.env.lastCurve=Ut.none},toLowerCurveShape:function(e,t,r,n,i,a){this._toCurveShape(e,t,r,n,i,a)},getDefaultCurvature:function(){return-7*e.MathJax.xypic.measure.lineElementLength},hasUpperTips:!1,hasLowerTips:!0}),rr(ge.Command.Twocell.CompositeMap,{getUpperControlPoint:function(e,t,r,n,i,a){var o=this.getMidBoxSize();return new tt.Ellipse(r.x+n*i,r.y+n*a,o,o,o,o)},getLowerControlPoint:function(e,t,r,n,i,a){var o=this.getMidBoxSize();return new tt.Ellipse(r.x+n*i,r.y+n*a,o,o,o,o)},getUpperLabelPosition:function(e,t,r,n,i,a){var o=r.x+n*i-t.x,s=r.y+n*a-t.y;Math.sqrt(o*o+s*s);return new tt.Point(t.x+.5*o,t.y+.5*s)},getLowerLabelPosition:function(e,t,r,n,i,a){var o=r.x+n*i-e.x,s=r.y+n*a-e.y;Math.sqrt(o*o+s*s);return new tt.Point(e.x+.5*o,e.y+.5*s)},getUpperLabelAngle:function(e,t,r,n,i,a,o){var s=r.x-n.x+i*a,u=r.y-n.y+i*o,c=Math.atan2(u,s),h=i<0?Math.PI:0;return c+Math.PI/2+h},getLowerLabelAngle:function(e,t,r,n,i,a,o){var s=n.x+i*a-t.x,u=n.y+i*o-t.y,c=Math.atan2(u,s),h=i<0?Math.PI:0;return c+Math.PI/2+h},getDefaultArrowPoint:function(e,t,r,n,i,a){return r},toUpperCurveShape:function(e,t,r,n,i,a){var o=e.env,s=t,u=r,c=s.edgePoint(u.x,u.y),h=u.edgePoint(s.x,s.y),l=o.p,p=o.c;o.p=s,o.c=u,new Wt.Line(c,h).toShape(e,void 0,"-",""),o.p=l,o.c=p},toLowerCurveShape:function(e,t,r,n,i,a){var o=e.env,s=r,u=n,c=s.edgePoint(u.x,u.y),h=u.edgePoint(s.x,s.y),l=o.p,p=o.c;o.p=s,o.c=u,new Wt.Line(c,h).toShape(e,void 0,"-",""),o.p=l,o.c=p},getMidBoxSize:function(){return.5*e.MathJax.xypic.measure.lineElementLength},getDefaultCurvature:function(){return 3.5*e.MathJax.xypic.measure.lineElementLength},hasUpperTips:!0,hasLowerTips:!0}),rr(ge.Command.Twocell.Switch.UpperLabel,{setup:function(e){e.env.twocellUpperLabel=new b.Some(this)},toShape:function(e,t,r,n,i){this.label.toShape(e,t,r,n,i)}}),rr(ge.Command.Twocell.Switch.LowerLabel,{setup:function(e){e.env.twocellLowerLabel=new b.Some(this)},toShape:function(e,t,r,n,i){this.label.toShape(e,t,r,n,i)}}),rr(ge.Command.Twocell.Switch.SetCurvature,{setup:function(t){var r=t.env;this.nudge.isOmit?r.twocellShouldDrawCurve=!1:r.twocellCurvatureEm=new b.Some(this.nudge.number*e.MathJax.xypic.measure.lineElementLength)}}),rr(ge.Command.Twocell.Switch.DoNotSetCurvedArrows,{setup:function(e){e.env.twocellShouldDrawCurve=!1}}),rr(ge.Command.Twocell.Switch.PlaceModMapObject,{setup:function(e){e.env.twocellShouldDrawModMap=!0}}),rr(ge.Command.Twocell.Switch.ChangeHeadTailObject,{setup:function(e){var t=e.env;switch(this.what){case"`":t.twocelltail=this.object;break;case"'":t.twocellhead=this.object}}}),rr(ge.Command.Twocell.Switch.ChangeCurveObject,{setup:function(e){var t=e.env;switch(this.what){case"":t.twocellUpperCurveObjectSpacer=this.spacer,t.twocellUpperCurveObject=this.maybeObject,t.twocellLowerCurveObjectSpacer=this.spacer,t.twocellLowerCurveObject=this.maybeObject;break;case"^":t.twocellUpperCurveObjectSpacer=this.spacer,t.twocellUpperCurveObject=this.maybeObject;break;case"_":t.twocellLowerCurveObjectSpacer=this.spacer,t.twocellLowerCurveObject=this.maybeObject}}}),rr(ge.Command.Twocell.Label,{toShape:function(t,r,n,i,a){var o,s=this.maybeNudge;if(s.isDefined){var u=s.get;if(u.isOmit)return;o=u.number*e.MathJax.xypic.measure.lineElementLength}else o=this.getDefaultLabelOffset();var c=t.env,h=c.c;c.c=new tt.Point(r.x+o*n,r.y+o*i),this.labelObject.toDropShape(t),c.c=h},getDefaultLabelOffset:function(){return e.MathJax.xypic.measure.lineElementLength}}),rr(ge.Command.Twocell.Nudge.Number,{isOmit:!1}),rr(ge.Command.Twocell.Nudge.Omit,{isOmit:!0}),rr(ge.Command.Twocell.Arrow,{toTipsShape:function(e,t,r){var n=e.env,i=n.lastCurve,a=n.c,o=n.angle,s=t?Math.PI:0,u=i.tOfPlace(!0,!0,t?0:1,0);n.c=i.position(u),n.angle=i.angle(u)+s,n.twocellhead.toDropShape(e);u=i.tOfPlace(!0,!0,t?1:0,0);if(n.c=i.position(u),n.angle=i.angle(u)+s,r?n.twocellhead.toDropShape(e):n.twocelltail.toDropShape(e),n.twocellShouldDrawModMap){u=i.tOfPlace(!1,!1,.5,0);n.c=i.position(u),n.angle=i.angle(u)+s,n.twocellmodmapobject.toDropShape(e)}n.c=a,n.angle=o}}),rr(ge.Command.Twocell.Arrow.WithOrientation,{toUpperTipsShape:function(e){switch(this.tok){case"":case"^":case"_":case"=":case"\\omit":case"'":this.toTipsShape(e,!1,!1);break;case"`":this.toTipsShape(e,!0,!1);break;case'"':this.toTipsShape(e,!1,!0)}},toLowerTipsShape:function(e){switch(this.tok){case"":case"^":case"_":case"=":case"\\omit":case"`":this.toTipsShape(e,!1,!1);break;case"'":this.toTipsShape(e,!0,!1);break;case'"':this.toTipsShape(e,!1,!0)}},toArrowShape:function(t,r){var n=t.env,i=n.c;switch(this.tok){case"^":var a=n.angle;n.angle=a+Math.PI,n.twocellarrowobject.toDropShape(t),n.c=new tt.Point(i.x+e.MathJax.xypic.measure.lineElementLength*Math.cos(a-Math.PI/2),i.y+e.MathJax.xypic.measure.lineElementLength*Math.sin(a-Math.PI/2)),this.labelObject.toDropShape(t),n.angle=a;break;case"":case"_":a=n.angle;n.twocellarrowobject.toDropShape(t),n.c=new tt.Point(i.x+e.MathJax.xypic.measure.lineElementLength*Math.cos(a+Math.PI/2),i.y+e.MathJax.xypic.measure.lineElementLength*Math.sin(a+Math.PI/2)),this.labelObject.toDropShape(t);break;case"=":a=n.angle;var o=new pt.TwocellEqualityArrowheadShape(n.c,n.angle);t.appendShapeToFront(o),n.c=new tt.Point(i.x+e.MathJax.xypic.measure.lineElementLength*Math.cos(a+Math.PI/2),i.y+e.MathJax.xypic.measure.lineElementLength*Math.sin(a+Math.PI/2)),this.labelObject.toDropShape(t);break;default:this.labelObject.toDropShape(t)}n.c=i}}),rr(ge.Command.Twocell.Arrow.WithPosition,{toUpperTipsShape:function(e){this.toTipsShape(e,!1,!1)},toLowerTipsShape:function(e){this.toTipsShape(e,!1,!1)},toArrowShape:function(t,r){var n,i=t.env,a=i.c,o=i.angle,s=this.nudge;if(s.isOmit)n=a;else{var u=s.number*e.MathJax.xypic.measure.lineElementLength;n=new tt.Point(r.x+u*Math.cos(o),r.y+u*Math.sin(o))}i.c=n,i.twocellarrowobject.toDropShape(t),s.isOmit||(i.c=new tt.Point(n.x+e.MathJax.xypic.measure.lineElementLength*Math.cos(o+Math.PI/2),n.y+e.MathJax.xypic.measure.lineElementLength*Math.sin(o+Math.PI/2)),this.labelObject.toDropShape(t)),i.c=a}}),rr(ge.Pos.Xyimport.TeXCommand,{toShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;var r=t.duplicate(),n=new Jt(pt.none,r),i=this.graphics.toDropShape(n),a=this.width,o=this.height;if(0===a||0===o)throw new TeXError("ExecutionError","the 'width' and 'height' attributes of the \\xyimport should be non-zero.");var s=r.c,u=s.l+s.r,c=s.u+s.d;if(0===u||0===c)throw new TeXError("ExecutionError","the width and height of the graphics to import should be non-zero.");var h=this.xOffset,l=this.yOffset;t.c=s.toRect({u:c/o*(o-l),d:c/o*l,l:u/a*h,r:u/a*(a-h)}),t.setXBase(u/a,0),t.setYBase(0,c/o);var p=s.l-t.c.l,f=s.d-t.c.d;i=new pt.TranslateShape(p,f,n.shape);e.appendShapeToFront(i)}}),rr(ge.Pos.Xyimport.Graphics,{toShape:function(e){var t=e.env;if(void 0===t.c)return pt.none;var r=t.duplicate(),n=new Jt(pt.none,r),i=this.width,a=this.height;if(0===i||0===a)throw new TeXError("ExecutionError","the 'width' and 'height' attributes of the \\xyimport should be non-zero.");var o=this.graphics;if(o.setup(n),!r.includegraphicsWidth.isDefined||!r.includegraphicsHeight.isDefined)throw new TeXError("ExecutionError","the 'width' and 'height' attributes of the \\includegraphics are required.");var s=r.includegraphicsWidth.get,u=r.includegraphicsHeight.get;if(0===s||0===u)throw new TeXError("ExecutionError","the 'width' and 'height' attributes of the \\includegraphics should be non-zero.");var c=this.xOffset,h=this.yOffset;t.c=r.c.toRect({u:u/a*(a-h),d:u/a*h,l:s/i*c,r:s/i*(i-c)}),t.setXBase(s/i,0),t.setYBase(0,u/a);var l=new pt.ImageShape(t.c,o.filepath);e.appendShapeToFront(l)}}),rr(ge.Command.Includegraphics,{setup:function(e){var t=e.env;t.includegraphicsWidth=b.empty,t.includegraphicsHeight=b.empty,this.attributeList.foreach((function(t){t.setup(e)}))}}),rr(ge.Command.Includegraphics.Attr.Width,{setup:function(t){t.env.includegraphicsWidth=new b.Some(e.MathJax.xypic.measure.length2em(this.dimen))}}),rr(ge.Command.Includegraphics.Attr.Height,{setup:function(t){t.env.includegraphicsHeight=new b.Some(e.MathJax.xypic.measure.length2em(this.dimen))}});var mr="http://www.w3.org/2000/svg",yr=ze;rr(pt.TextShape,{_draw:function(t,r){var n=e.MathJax.xypic.measure.length2em("0.2em"),i=t.xypicWrapper,a=i.getChildWrapper(this.math),o=a.adaptor,s=a.getBBox(),u=s.scale,c=(s.h+n)*u,h=(s.d+n)*u,l=(s.w+2*n)*u,p=(c+h)/2,f=l/2,d=this.c;if(this.originalBBox={H:c,D:h,W:l},!r){var m=a.html("mjx-xypic-object");o.append(i.getElement(),m),o.setStyle(m,"text-align","center"),o.setStyle(m,"position","absolute"),o.setStyle(m,"color",t.getCurrentColor()),a.toCHTML(m);var y=t.getOrigin();o.setAttribute(m,"data-x",d.x-f-y.x+n*u),o.setAttribute(m,"data-y",-d.y-p-y.y+n*u),o.setAttribute(m,"data-xypic-id",this.math.xypicTextObjectId),i.appendTextObject(m)}return d.toRect({u:p,d:p,l:f,r:f})}});var xr=function(t){hr(n,t);var r=pr(n);function n(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;sr(this,n),a=r.call(this,t,i,o);for(var s=e.MathJax.xypic.wrapperOfTextObjectMap,u=i.textMmls,c=a.childNodes,h=u.length,l=0;l<h;l++){var p=u[l].xypicTextObjectId;s[p]=c[l]}return a._textObjects=[],a}return cr(n,[{key:"getElement",value:function(){return this.chtml}},{key:"appendTextObject",value:function(e){this._textObjects.push(e)}},{key:"getChildWrapper",value:function(t){var r=t.xypicTextObjectId;if(null==r)throw new l.default("IllegalStateError","BUG");var n=e.MathJax.xypic.wrapperOfTextObjectMap[r];if(null==n)throw new l.default("IllegalStateError","unknown textObjectId:"+r);return n}},{key:"toCHTML",value:function(t){var r=e.MathJax.xypic.svgForDebug,n=e.MathJax.xypic.svgForTestLayout;this._textObjects=[],this.setupMeasure(this),this._toCHTML(t),e.MathJax.xypic.svgForDebug=r,e.MathJax.xypic.svgForTestLayout=n}},{key:"setupMeasure",value:function(t){var r=ze,n=t.length2em("1em"),i=parseFloat(t.px(100).replace("px",""))/100,a=t.font.params.axis_height,o=t.length2em("0.15em"),s=function(e){return Math.round(parseFloat(t.px(100*e).replace("px","")))/100};e.MathJax.xypic.measure={length2em:function(e){return r(t.length2em(e))},oneem:n,em2length:function(e){return r(e/n)+"em"},Em:function(e){return t.em(e)},em:i,em2px:s,axis_height:a,strokeWidth:t.length2em("0.04em"),thickness:o,jot:t.length2em("3pt"),objectmargin:t.length2em("3pt"),objectwidth:t.length2em("0pt"),objectheight:t.length2em("0pt"),labelmargin:t.length2em("2.5pt"),turnradius:t.length2em("10pt"),lineElementLength:t.length2em("5pt"),axisHeightLength:a*t.length2em("10pt"),dottedDasharray:n+" "+s(o)}}},{key:"append",value:function(e,t){this.adaptor.append(e,t)}},{key:"remove",value:function(e){this.adaptor.remove(e)}},{key:"svg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.adaptor.node(e,t,r,mr)}},{key:"setAttribute",value:function(e,t,r,n){return this.adaptor.setAttribute(e,t,r,n)}},{key:"setStyle",value:function(e,t,r){this.adaptor.setStyle(e,t,r)}}]),n}(_e.CHTMLWrapper),vr=function(t){hr(n,t);var r=pr(n);function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return sr(this,n),r.call(this,e,t,i)}return cr(n,[{key:"_toCHTML",value:function(t){var r=this.standardCHTMLnode(t);this.cthml=r;var n=this.adaptor;n.setStyle(r,"position","relative");var i=this.length2em("0.2em"),a=e.MathJax.xypic.measure.strokeWidth,o=1,s=0,u=1,c=e.MathJax.xypic.measure.em2px,h=Ot.createSVG(this,o,s,u,a,"black",{viewBox:[0,-c(o+s),c(u),c(o+s)].join(" "),role:"img",focusable:!1,overflow:"visible"});e.MathJax.xypic.svgForDebug=h,e.MathJax.xypic.svgForTestLayout=h,n.append(r,h.svg);var l=this.node.cmd;if(l){var p=new zt,f=new Jt(pt.none,p);l.toShape(f);var d=f.shape;d.draw(h);var m=d.getBoundingBox();if(void 0!==m){var y=(m=new tt.Rect(0,0,{l:Math.max(0,-(m.x-m.l)),r:Math.max(0,m.x+m.r),u:Math.max(0,m.y+m.u),d:Math.max(0,-(m.y-m.d))})).x-m.l-i,x=-m.y-m.u-i,v=m.l+m.r+2*i,g=m.u+m.d+2*i;h.setWidth(v),h.setHeight(g),h.setAttribute("viewBox",[c(y),c(x),c(v),c(g)].join(" ")),n.setStyle(r,"vertical-align",yr(-m.d-i+e.MathJax.xypic.measure.axis_height)+"em");var M,w=ar(this._textObjects);try{for(w.s();!(M=w.n()).done;){var b=M.value,S=parseFloat(n.getAttribute(b,"data-x")),O=parseFloat(n.getAttribute(b,"data-y"));n.setStyle(b,"left",yr(S-y)+"em"),n.setStyle(b,"top",yr(O-x)+"em")}}catch(e){w.e(e)}finally{w.f()}}else n.remove(h.svg)}else n.remove(h.svg)}}]),n}(xr);vr.kind=ge.xypic.prototype.kind;var gr=function(t){hr(n,t);var r=pr(n);function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return sr(this,n),r.call(this,e,t,i)}return cr(n,[{key:"_toCHTML",value:function(t){var r=this.node.cmd;e.MathJax.xypic.repositories.dirRepository.put(r.dirMain,r.compositeObject)}}]),n}(xr);gr.kind=ge.xypic.newdir.prototype.kind;var Mr=function(e){hr(r,e);var t=pr(r);function r(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return sr(this,r),(i=t.call(this,e,n,a))._setupGraphics(),i.computeBBox(i.bbox),i.bboxComputed=!0,i}return cr(r,[{key:"_setupGraphics",value:function(){this.setupMeasure(this);var e=new zt,t=new Jt(pt.none,e),r=this.node.cmd;if(r.setup(t),!e.includegraphicsWidth.isDefined||!e.includegraphicsHeight.isDefined)throw new l.default("ExecutionError","the 'width' and 'height' attributes of the \\includegraphics are required.");var n=e.includegraphicsWidth.get,i=e.includegraphicsHeight.get;this.imageWidth=this.length2em(n),this.imageHeight=this.length2em(i),this.filepath=r.filepath}},{key:"computeBBox",value:function(e){e.empty(),e.updateFrom(new Fe.BBox({w:this.imageWidth,h:this.imageHeight,d:0}))}},{key:"_toCHTML",value:function(e){var t=this.standardCHTMLnode(e);this.cthml=t,this.adaptor.setStyle(t,"position","relative"),this.adaptor.setStyle(t,"vertical-align","0em");var r=this.html("img");r.setAttribute("src",this.filepath),this.adaptor.setStyle(r,"width",yr(this.imageWidth)+"em"),this.adaptor.setStyle(r,"height",yr(this.imageHeight)+"em"),this.adaptor.append(t,r)}}]),r}(xr);function wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sr(e,t,r){return t&&br(e.prototype,t),r&&br(e,r),e}Mr.kind=ge.xypic.includegraphics.prototype.kind;var Or=function(){function e(){wr(this,e),this.userDirMap={}}return Sr(e,[{key:"get",value:function(e){return this.userDirMap[e]}},{key:"put",value:function(e,t){this.userDirMap[e]=t}}]),e}(),Cr=function(){function e(){wr(this,e),this.userModifierMap={}}return Sr(e,[{key:"get",value:function(t){var r=e.embeddedModifierMap[t];return void 0!==r?r:this.userModifierMap[t]}},{key:"put",value:function(t,r){void 0===e.embeddedModifierMap[t]&&(this.userModifierMap[t]=r)}}]),e}();function Er(t,r,n){var i=[],a={lastNoSuccess:void 0,whiteSpaceRegex:p.whiteSpaceRegex,createTextNode:function(r){var n=new(h())(r,t.stack.env,t.configuration).mml();return n.xypicTextObjectId=e.MathJax.xypic.textObjectIdCounter,e.MathJax.xypic.textObjectIdCounter++,i.push(n),n}},o=new ee(t.string,t.i,a),s=te.parse(r,o);if(t.i=s.next.offset,s.successful)return t.create(n,s.get(),i);var u=a.lastNoSuccess.next.pos().lineContents(),c=a.lastNoSuccess.msg+'. Parse error at or near "'+u+'".';throw new l.default("SyntaxError",c)}Cr.embeddedModifierMap={o:new ge.Modifier.Shape.Circle,l:new ge.Modifier.Shape.L,r:new ge.Modifier.Shape.R,u:new ge.Modifier.Shape.U,d:new ge.Modifier.Shape.D,c:new ge.Modifier.Shape.C,aliceblue:new ge.Modifier.Shape.ChangeColor("aliceblue"),antiquewhite:new ge.Modifier.Shape.ChangeColor("antiquewhite"),aqua:new ge.Modifier.Shape.ChangeColor("aqua"),aquamarine:new ge.Modifier.Shape.ChangeColor("aquamarine"),azure:new ge.Modifier.Shape.ChangeColor("azure"),beige:new ge.Modifier.Shape.ChangeColor("beige"),bisque:new ge.Modifier.Shape.ChangeColor("bisque"),black:new ge.Modifier.Shape.ChangeColor("black"),blanchedalmond:new ge.Modifier.Shape.ChangeColor("blanchedalmond"),blue:new ge.Modifier.Shape.ChangeColor("blue"),blueviolet:new ge.Modifier.Shape.ChangeColor("blueviolet"),brown:new ge.Modifier.Shape.ChangeColor("brown"),burlywood:new ge.Modifier.Shape.ChangeColor("burlywood"),cadetblue:new ge.Modifier.Shape.ChangeColor("cadetblue"),chartreuse:new ge.Modifier.Shape.ChangeColor("chartreuse"),chocolate:new ge.Modifier.Shape.ChangeColor("chocolate"),coral:new ge.Modifier.Shape.ChangeColor("coral"),cornflowerblue:new ge.Modifier.Shape.ChangeColor("cornflowerblue"),cornsilk:new ge.Modifier.Shape.ChangeColor("cornsilk"),crimson:new ge.Modifier.Shape.ChangeColor("crimson"),cyan:new ge.Modifier.Shape.ChangeColor("cyan"),darkblue:new ge.Modifier.Shape.ChangeColor("darkblue"),darkcyan:new ge.Modifier.Shape.ChangeColor("darkcyan"),darkgoldenrod:new ge.Modifier.Shape.ChangeColor("darkgoldenrod"),darkgray:new ge.Modifier.Shape.ChangeColor("darkgray"),darkgreen:new ge.Modifier.Shape.ChangeColor("darkgreen"),darkgrey:new ge.Modifier.Shape.ChangeColor("darkgrey"),darkkhaki:new ge.Modifier.Shape.ChangeColor("darkkhaki"),darkmagenta:new ge.Modifier.Shape.ChangeColor("darkmagenta"),darkolivegreen:new ge.Modifier.Shape.ChangeColor("darkolivegreen"),darkorange:new ge.Modifier.Shape.ChangeColor("darkorange"),darkorchid:new ge.Modifier.Shape.ChangeColor("darkorchid"),darkred:new ge.Modifier.Shape.ChangeColor("darkred"),darksalmon:new ge.Modifier.Shape.ChangeColor("darksalmon"),darkseagreen:new ge.Modifier.Shape.ChangeColor("darkseagreen"),darkslateblue:new ge.Modifier.Shape.ChangeColor("darkslateblue"),darkslategray:new ge.Modifier.Shape.ChangeColor("darkslategray"),darkslategrey:new ge.Modifier.Shape.ChangeColor("darkslategrey"),darkturquoise:new ge.Modifier.Shape.ChangeColor("darkturquoise"),darkviolet:new ge.Modifier.Shape.ChangeColor("darkviolet"),deeppink:new ge.Modifier.Shape.ChangeColor("deeppink"),deepskyblue:new ge.Modifier.Shape.ChangeColor("deepskyblue"),dimgray:new ge.Modifier.Shape.ChangeColor("dimgray"),dimgrey:new ge.Modifier.Shape.ChangeColor("dimgrey"),dodgerblue:new ge.Modifier.Shape.ChangeColor("dodgerblue"),firebrick:new ge.Modifier.Shape.ChangeColor("firebrick"),floralwhite:new ge.Modifier.Shape.ChangeColor("floralwhite"),forestgreen:new ge.Modifier.Shape.ChangeColor("forestgreen"),fuchsia:new ge.Modifier.Shape.ChangeColor("fuchsia"),gainsboro:new ge.Modifier.Shape.ChangeColor("gainsboro"),ghostwhite:new ge.Modifier.Shape.ChangeColor("ghostwhite"),gold:new ge.Modifier.Shape.ChangeColor("gold"),goldenrod:new ge.Modifier.Shape.ChangeColor("goldenrod"),gray:new ge.Modifier.Shape.ChangeColor("gray"),grey:new ge.Modifier.Shape.ChangeColor("grey"),green:new ge.Modifier.Shape.ChangeColor("green"),greenyellow:new ge.Modifier.Shape.ChangeColor("greenyellow"),honeydew:new ge.Modifier.Shape.ChangeColor("honeydew"),hotpink:new ge.Modifier.Shape.ChangeColor("hotpink"),indianred:new ge.Modifier.Shape.ChangeColor("indianred"),indigo:new ge.Modifier.Shape.ChangeColor("indigo"),ivory:new ge.Modifier.Shape.ChangeColor("ivory"),khaki:new ge.Modifier.Shape.ChangeColor("khaki"),lavender:new ge.Modifier.Shape.ChangeColor("lavender"),lavenderblush:new ge.Modifier.Shape.ChangeColor("lavenderblush"),lawngreen:new ge.Modifier.Shape.ChangeColor("lawngreen"),lemonchiffon:new ge.Modifier.Shape.ChangeColor("lemonchiffon"),lightblue:new ge.Modifier.Shape.ChangeColor("lightblue"),lightcoral:new ge.Modifier.Shape.ChangeColor("lightcoral"),lightcyan:new ge.Modifier.Shape.ChangeColor("lightcyan"),lightgoldenrodyellow:new ge.Modifier.Shape.ChangeColor("lightgoldenrodyellow"),lightgray:new ge.Modifier.Shape.ChangeColor("lightgray"),lightgreen:new ge.Modifier.Shape.ChangeColor("lightgreen"),lightgrey:new ge.Modifier.Shape.ChangeColor("lightgrey"),lightpink:new ge.Modifier.Shape.ChangeColor("lightpink"),lightsalmon:new ge.Modifier.Shape.ChangeColor("lightsalmon"),lightseagreen:new ge.Modifier.Shape.ChangeColor("lightseagreen"),lightskyblue:new ge.Modifier.Shape.ChangeColor("lightskyblue"),lightslategray:new ge.Modifier.Shape.ChangeColor("lightslategray"),lightslategrey:new ge.Modifier.Shape.ChangeColor("lightslategrey"),lightsteelblue:new ge.Modifier.Shape.ChangeColor("lightsteelblue"),lightyellow:new ge.Modifier.Shape.ChangeColor("lightyellow"),lime:new ge.Modifier.Shape.ChangeColor("lime"),limegreen:new ge.Modifier.Shape.ChangeColor("limegreen"),linen:new ge.Modifier.Shape.ChangeColor("linen"),magenta:new ge.Modifier.Shape.ChangeColor("magenta"),maroon:new ge.Modifier.Shape.ChangeColor("maroon"),mediumaquamarine:new ge.Modifier.Shape.ChangeColor("mediumaquamarine"),mediumblue:new ge.Modifier.Shape.ChangeColor("mediumblue"),mediumorchid:new ge.Modifier.Shape.ChangeColor("mediumorchid"),mediumpurple:new ge.Modifier.Shape.ChangeColor("mediumpurple"),mediumseagreen:new ge.Modifier.Shape.ChangeColor("mediumseagreen"),mediumslateblue:new ge.Modifier.Shape.ChangeColor("mediumslateblue"),mediumspringgreen:new ge.Modifier.Shape.ChangeColor("mediumspringgreen"),mediumturquoise:new ge.Modifier.Shape.ChangeColor("mediumturquoise"),mediumvioletred:new ge.Modifier.Shape.ChangeColor("mediumvioletred"),midnightblue:new ge.Modifier.Shape.ChangeColor("midnightblue"),mintcream:new ge.Modifier.Shape.ChangeColor("mintcream"),mistyrose:new ge.Modifier.Shape.ChangeColor("mistyrose"),moccasin:new ge.Modifier.Shape.ChangeColor("moccasin"),navajowhite:new ge.Modifier.Shape.ChangeColor("navajowhite"),navy:new ge.Modifier.Shape.ChangeColor("navy"),oldlace:new ge.Modifier.Shape.ChangeColor("oldlace"),olive:new ge.Modifier.Shape.ChangeColor("olive"),olivedrab:new ge.Modifier.Shape.ChangeColor("olivedrab"),orange:new ge.Modifier.Shape.ChangeColor("orange"),orangered:new ge.Modifier.Shape.ChangeColor("orangered"),orchid:new ge.Modifier.Shape.ChangeColor("orchid"),palegoldenrod:new ge.Modifier.Shape.ChangeColor("palegoldenrod"),palegreen:new ge.Modifier.Shape.ChangeColor("palegreen"),paleturquoise:new ge.Modifier.Shape.ChangeColor("paleturquoise"),palevioletred:new ge.Modifier.Shape.ChangeColor("palevioletred"),papayawhip:new ge.Modifier.Shape.ChangeColor("papayawhip"),peachpuff:new ge.Modifier.Shape.ChangeColor("peachpuff"),peru:new ge.Modifier.Shape.ChangeColor("peru"),pink:new ge.Modifier.Shape.ChangeColor("pink"),plum:new ge.Modifier.Shape.ChangeColor("plum"),powderblue:new ge.Modifier.Shape.ChangeColor("powderblue"),purple:new ge.Modifier.Shape.ChangeColor("purple"),red:new ge.Modifier.Shape.ChangeColor("red"),rosybrown:new ge.Modifier.Shape.ChangeColor("rosybrown"),royalblue:new ge.Modifier.Shape.ChangeColor("royalblue"),saddlebrown:new ge.Modifier.Shape.ChangeColor("saddlebrown"),salmon:new ge.Modifier.Shape.ChangeColor("salmon"),sandybrown:new ge.Modifier.Shape.ChangeColor("sandybrown"),seagreen:new ge.Modifier.Shape.ChangeColor("seagreen"),seashell:new ge.Modifier.Shape.ChangeColor("seashell"),sienna:new ge.Modifier.Shape.ChangeColor("sienna"),silver:new ge.Modifier.Shape.ChangeColor("silver"),skyblue:new ge.Modifier.Shape.ChangeColor("skyblue"),slateblue:new ge.Modifier.Shape.ChangeColor("slateblue"),slategray:new ge.Modifier.Shape.ChangeColor("slategray"),slategrey:new ge.Modifier.Shape.ChangeColor("slategrey"),snow:new ge.Modifier.Shape.ChangeColor("snow"),springgreen:new ge.Modifier.Shape.ChangeColor("springgreen"),steelblue:new ge.Modifier.Shape.ChangeColor("steelblue"),tan:new ge.Modifier.Shape.ChangeColor("tan"),teal:new ge.Modifier.Shape.ChangeColor("teal"),thistle:new ge.Modifier.Shape.ChangeColor("thistle"),tomato:new ge.Modifier.Shape.ChangeColor("tomato"),turquoise:new ge.Modifier.Shape.ChangeColor("turquoise"),violet:new ge.Modifier.Shape.ChangeColor("violet"),wheat:new ge.Modifier.Shape.ChangeColor("wheat"),white:new ge.Modifier.Shape.ChangeColor("white"),whitesmoke:new ge.Modifier.Shape.ChangeColor("whitesmoke"),yellow:new ge.Modifier.Shape.ChangeColor("yellow"),yellowgreen:new ge.Modifier.Shape.ChangeColor("yellowgreen")};var kr={};kr.Macro=o().Macro,kr.xybox=function(e,t,r){var n=Er(e,je.xybox(),vr.kind);e.Push(n)},kr.xymatrixbox=function(e,t,r){var n=Er(e,je.xymatrixbox(),vr.kind);e.Push(n)},kr.newdir=function(e,t,r){var n=Er(e,je.newdir(),gr.kind);e.Push(n)},kr.xyincludegraphics=function(e,t,r){var n=Er(e,je.includegraphics(),Mr.kind);e.Push(n)},kr.xyEnvironment=function(e,t){var r=Er(e,je.xy(),vr.kind);return e.Push(t),r};new i.CommandMap("xypic-command",{hole:["Macro","{\\style{visibility:hidden}{x}}"],objectstyle:["Macro","\\textstyle"],labelstyle:["Macro","\\scriptstyle"],twocellstyle:["Macro","\\scriptstyle"],xybox:["xybox","xybox"],xymatrix:["xymatrixbox","xymatrix"],newdir:["newdir","newdir"],includegraphics:["xyincludegraphics","includegraphics"]},kr),new i.EnvironmentMap("xypic-environment",u().environment,{xy:["xyEnvironment",null,!1]},kr);function Lr(t,r,n,i){void 0===i.getNodeClass(t)&&i.setNodeClass(t,r);var a=e.MathJax.startup.output.factory;if(void 0===a.getNodeClass(t))switch(e.MathJax.startup.output.name){case"CHTML":a.setNodeClass(t,n)}}n.Configuration.create("xypic",{handler:{macro:["xypic-command"],environment:["xypic-environment"]},nodes:{xypic:function(e,t,r){var n=e.mmlFactory;return Lr(vr.kind,ge.xypic,vr,n),new ge.xypic(n,t,r)},"xypic-newdir":function(e,t,r){var n=e.mmlFactory;return Lr(gr.kind,ge.xypic.newdir,gr,n),new ge.xypic.newdir(n,t,r)},"xypic-includegraphics":function(e,t,r){var n=e.mmlFactory;return Lr(Mr.kind,ge.xypic.includegraphics,Mr,n),new ge.xypic.includegraphics(n,t,r)}}});if(void 0===e.MathJax.xypic){var Pr=function(){e.MathJax.xypic.repositories.modifierRepository=new Cr,e.MathJax.xypic.repositories.dirRepository=new Or,e.MathJax.xypic.textObjectIdCounter=0,e.MathJax.xypic.wrapperOfTextObjectMap={}};(0,e.combineWithMathJax)({xypic:{repositories:{modifierRepository:new Cr,dirRepository:new Or},textObjectIdCounter:0,wrapperOfTextObjectMap:{}}}),(0,e.combineConfig)(e.MathJax.config,{options:{renderActions:{initialize_xypic_context:[t.ed.FINDMATH-1,function(e){Pr()},function(e,t){Pr()},!0]}}})}})()})();